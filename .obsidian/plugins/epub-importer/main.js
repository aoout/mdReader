/** GENERATED BY OBSIDIAN-PLUGIN-CLI, DO NOT EDIT */
var Pl=Object.create;var Mt=Object.defineProperty;var Il=Object.getOwnPropertyDescriptor;var Ll=Object.getOwnPropertyNames;var Al=Object.getPrototypeOf,Fl=Object.prototype.hasOwnProperty;var $i=t=>Mt(t,"__esModule",{value:!0});var F=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Tn=(t,e)=>{$i(t);for(var r in e)Mt(t,r,{get:e[r],enumerable:!0})},Ml=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Ll(e))!Fl.call(t,n)&&n!=="default"&&Mt(t,n,{get:()=>e[n],enumerable:!(r=Il(e,n))||r.enumerable});return t},ce=t=>Ml($i(Mt(t!=null?Pl(Al(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var _t=F(On=>{(function(){On.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(On)});var be=F((Vi,_e)=>{(function(){var t,e,r,n,i,s,o,a=[].slice,u={}.hasOwnProperty;t=function(){var c,l,f,p,g,v;if(v=arguments[0],g=2<=arguments.length?a.call(arguments,1):[],i(Object.assign))Object.assign.apply(null,arguments);else for(c=0,f=g.length;c<f;c++)if(p=g[c],p!=null)for(l in p)!u.call(p,l)||(v[l]=p[l]);return v},i=function(c){return!!c&&Object.prototype.toString.call(c)==="[object Function]"},s=function(c){var l;return!!c&&((l=typeof c)==="function"||l==="object")},r=function(c){return i(Array.isArray)?Array.isArray(c):Object.prototype.toString.call(c)==="[object Array]"},n=function(c){var l;if(r(c))return!c.length;for(l in c)if(!!u.call(c,l))return!1;return!0},o=function(c){var l,f;return s(c)&&(f=Object.getPrototypeOf(c))&&(l=f.constructor)&&typeof l=="function"&&l instanceof l&&Function.prototype.toString.call(l)===Function.prototype.toString.call(Object)},e=function(c){return i(c.valueOf)?c.valueOf():c},_e.exports.assign=t,_e.exports.isFunction=i,_e.exports.isObject=s,_e.exports.isArray=r,_e.exports.isEmpty=n,_e.exports.isPlainObject=o,_e.exports.getValue=e}).call(Vi)});var Nn=F((Wi,Hi)=>{(function(){var t;Hi.exports=t=function(){function e(){}return e.prototype.hasFeature=function(r,n){return!0},e.prototype.createDocumentType=function(r,n,i){throw new Error("This DOM method is not implemented.")},e.prototype.createDocument=function(r,n,i){throw new Error("This DOM method is not implemented.")},e.prototype.createHTMLDocument=function(r){throw new Error("This DOM method is not implemented.")},e.prototype.getFeature=function(r,n){throw new Error("This DOM method is not implemented.")},e}()}).call(Wi)});var Yi=F((Ki,Gi)=>{(function(){var t;Gi.exports=t=function(){function e(){}return e.prototype.handleError=function(r){throw new Error(r)},e}()}).call(Ki)});var Zi=F((Ji,Qi)=>{(function(){var t;Qi.exports=t=function(){function e(r){this.arr=r||[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e.prototype.item=function(r){return this.arr[r]||null},e.prototype.contains=function(r){return this.arr.indexOf(r)!==-1},e}()}).call(Ji)});var rs=F((es,ts)=>{(function(){var t,e,r;e=Yi(),r=Zi(),ts.exports=t=function(){function n(){var i;this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new e,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=i=Object.create(this.defaultParams)}return Object.defineProperty(n.prototype,"parameterNames",{get:function(){return new r(Object.keys(this.defaultParams))}}),n.prototype.getParameter=function(i){return this.params.hasOwnProperty(i)?this.params[i]:null},n.prototype.canSetParameter=function(i,s){return!0},n.prototype.setParameter=function(i,s){return s!=null?this.params[i]=s:delete this.params[i]},n}()}).call(es)});var W=F((ns,is)=>{(function(){is.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(ns)});var Sn=F((ss,os)=>{(function(){var t,e,r;t=W(),r=ie(),os.exports=e=function(){function n(i,s,o){if(this.parent=i,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),s==null)throw new Error("Missing attribute name. "+this.debugInfo(s));this.name=this.stringify.name(s),this.value=this.stringify.attValue(o),this.type=t.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(n.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(n.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(n.prototype,"textContent",{get:function(){return this.value},set:function(i){return this.value=i||""}}),Object.defineProperty(n.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(n.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(n.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(n.prototype,"specified",{get:function(){return!0}}),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(i){return this.options.writer.attribute(this,this.options.writer.filterOptions(i))},n.prototype.debugInfo=function(i){return i=i||this.name,i==null?"parent: <"+this.parent.name+">":"attribute: {"+i+"}, parent: <"+this.parent.name+">"},n.prototype.isEqualNode=function(i){return!(i.namespaceURI!==this.namespaceURI||i.prefix!==this.prefix||i.localName!==this.localName||i.value!==this.value)},n}()}).call(ss)});var jt=F((as,us)=>{(function(){var t;us.exports=t=function(){function e(r){this.nodes=r}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.getNamedItem=function(r){return this.nodes[r]},e.prototype.setNamedItem=function(r){var n;return n=this.nodes[r.nodeName],this.nodes[r.nodeName]=r,n||null},e.prototype.removeNamedItem=function(r){var n;return n=this.nodes[r],delete this.nodes[r],n||null},e.prototype.item=function(r){return this.nodes[Object.keys(this.nodes)[r]]||null},e.prototype.getNamedItemNS=function(r,n){throw new Error("This DOM method is not implemented.")},e.prototype.setNamedItemNS=function(r){throw new Error("This DOM method is not implemented.")},e.prototype.removeNamedItemNS=function(r,n){throw new Error("This DOM method is not implemented.")},e}()}).call(as)});var Rt=F((cs,ls)=>{(function(){var t,e,r,n,i,s,o,a,u,c=function(f,p){for(var g in p)l.call(p,g)&&(f[g]=p[g]);function v(){this.constructor=f}return v.prototype=p.prototype,f.prototype=new v,f.__super__=p.prototype,f},l={}.hasOwnProperty;u=be(),a=u.isObject,o=u.isFunction,s=u.getValue,i=ie(),t=W(),e=Sn(),n=jt(),ls.exports=r=function(f){c(p,f);function p(g,v,E){var S,N,T,b;if(p.__super__.constructor.call(this,g),v==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(v),this.type=t.Element,this.attribs={},this.schemaTypeInfo=null,E!=null&&this.attribute(E),g.type===t.Document&&(this.isRoot=!0,this.documentObject=g,g.rootObject=this,g.children)){for(b=g.children,N=0,T=b.length;N<T;N++)if(S=b[N],S.type===t.DocType){S.name=this.name;break}}}return Object.defineProperty(p.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(p.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(p.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(p.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(p.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(p.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(p.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(p.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new n(this.attribs)),this.attributeMap}}),p.prototype.clone=function(){var g,v,E,S;E=Object.create(this),E.isRoot&&(E.documentObject=null),E.attribs={},S=this.attribs;for(v in S)!l.call(S,v)||(g=S[v],E.attribs[v]=g.clone());return E.children=[],this.children.forEach(function(N){var T;return T=N.clone(),T.parent=E,E.children.push(T)}),E},p.prototype.attribute=function(g,v){var E,S;if(g!=null&&(g=s(g)),a(g))for(E in g)!l.call(g,E)||(S=g[E],this.attribute(E,S));else o(v)&&(v=v.apply()),this.options.keepNullAttributes&&v==null?this.attribs[g]=new e(this,g,""):v!=null&&(this.attribs[g]=new e(this,g,v));return this},p.prototype.removeAttribute=function(g){var v,E,S;if(g==null)throw new Error("Missing attribute name. "+this.debugInfo());if(g=s(g),Array.isArray(g))for(E=0,S=g.length;E<S;E++)v=g[E],delete this.attribs[v];else delete this.attribs[g];return this},p.prototype.toString=function(g){return this.options.writer.element(this,this.options.writer.filterOptions(g))},p.prototype.att=function(g,v){return this.attribute(g,v)},p.prototype.a=function(g,v){return this.attribute(g,v)},p.prototype.getAttribute=function(g){return this.attribs.hasOwnProperty(g)?this.attribs[g].value:null},p.prototype.setAttribute=function(g,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getAttributeNode=function(g){return this.attribs.hasOwnProperty(g)?this.attribs[g]:null},p.prototype.setAttributeNode=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.removeAttributeNode=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getElementsByTagName=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getAttributeNS=function(g,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.setAttributeNS=function(g,v,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.removeAttributeNS=function(g,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getAttributeNodeNS=function(g,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.setAttributeNodeNS=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getElementsByTagNameNS=function(g,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.hasAttribute=function(g){return this.attribs.hasOwnProperty(g)},p.prototype.hasAttributeNS=function(g,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.setIdAttribute=function(g,v){return this.attribs.hasOwnProperty(g)?this.attribs[g].isId:v},p.prototype.setIdAttributeNS=function(g,v,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.setIdAttributeNode=function(g,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getElementsByTagName=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getElementsByTagNameNS=function(g,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getElementsByClassName=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.isEqualNode=function(g){var v,E,S;if(!p.__super__.isEqualNode.apply(this,arguments).isEqualNode(g)||g.namespaceURI!==this.namespaceURI||g.prefix!==this.prefix||g.localName!==this.localName||g.attribs.length!==this.attribs.length)return!1;for(v=E=0,S=this.attribs.length-1;0<=S?E<=S:E>=S;v=0<=S?++E:--E)if(!this.attribs[v].isEqualNode(g.attribs[v]))return!1;return!0},p}(i)}).call(cs)});var ft=F((fs,hs)=>{(function(){var t,e,r=function(i,s){for(var o in s)n.call(s,o)&&(i[o]=s[o]);function a(){this.constructor=i}return a.prototype=s.prototype,i.prototype=new a,i.__super__=s.prototype,i},n={}.hasOwnProperty;e=ie(),hs.exports=t=function(i){r(s,i);function s(o){s.__super__.constructor.call(this,o),this.value=""}return Object.defineProperty(s.prototype,"data",{get:function(){return this.value},set:function(o){return this.value=o||""}}),Object.defineProperty(s.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(s.prototype,"textContent",{get:function(){return this.value},set:function(o){return this.value=o||""}}),s.prototype.clone=function(){return Object.create(this)},s.prototype.substringData=function(o,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.appendData=function(o){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.insertData=function(o,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.deleteData=function(o,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.replaceData=function(o,a,u){throw new Error("This DOM method is not implemented."+this.debugInfo())},s.prototype.isEqualNode=function(o){return!(!s.__super__.isEqualNode.apply(this,arguments).isEqualNode(o)||o.data!==this.data)},s}(e)}).call(fs)});var kt=F((ps,ds)=>{(function(){var t,e,r,n=function(s,o){for(var a in o)i.call(o,a)&&(s[a]=o[a]);function u(){this.constructor=s}return u.prototype=o.prototype,s.prototype=new u,s.__super__=o.prototype,s},i={}.hasOwnProperty;t=W(),r=ft(),ds.exports=e=function(s){n(o,s);function o(a,u){if(o.__super__.constructor.call(this,a),u==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=t.CData,this.value=this.stringify.cdata(u)}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(a){return this.options.writer.cdata(this,this.options.writer.filterOptions(a))},o}(r)}).call(ps)});var qt=F((gs,ms)=>{(function(){var t,e,r,n=function(s,o){for(var a in o)i.call(o,a)&&(s[a]=o[a]);function u(){this.constructor=s}return u.prototype=o.prototype,s.prototype=new u,s.__super__=o.prototype,s},i={}.hasOwnProperty;t=W(),e=ft(),ms.exports=r=function(s){n(o,s);function o(a,u){if(o.__super__.constructor.call(this,a),u==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=t.Comment,this.value=this.stringify.comment(u)}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(a){return this.options.writer.comment(this,this.options.writer.filterOptions(a))},o}(e)}).call(gs)});var Xt=F((ys,vs)=>{(function(){var t,e,r,n,i=function(o,a){for(var u in a)s.call(a,u)&&(o[u]=a[u]);function c(){this.constructor=o}return c.prototype=a.prototype,o.prototype=new c,o.__super__=a.prototype,o},s={}.hasOwnProperty;n=be().isObject,r=ie(),t=W(),vs.exports=e=function(o){i(a,o);function a(u,c,l,f){var p;a.__super__.constructor.call(this,u),n(c)&&(p=c,c=p.version,l=p.encoding,f=p.standalone),c||(c="1.0"),this.type=t.Declaration,this.version=this.stringify.xmlVersion(c),l!=null&&(this.encoding=this.stringify.xmlEncoding(l)),f!=null&&(this.standalone=this.stringify.xmlStandalone(f))}return a.prototype.toString=function(u){return this.options.writer.declaration(this,this.options.writer.filterOptions(u))},a}(r)}).call(ys)});var Bt=F((bs,ws)=>{(function(){var t,e,r,n=function(s,o){for(var a in o)i.call(o,a)&&(s[a]=o[a]);function u(){this.constructor=s}return u.prototype=o.prototype,s.prototype=new u,s.__super__=o.prototype,s},i={}.hasOwnProperty;r=ie(),t=W(),ws.exports=e=function(s){n(o,s);function o(a,u,c,l,f,p){if(o.__super__.constructor.call(this,a),u==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(c==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(u));if(!l)throw new Error("Missing DTD attribute type. "+this.debugInfo(u));if(!f)throw new Error("Missing DTD attribute default. "+this.debugInfo(u));if(f.indexOf("#")!==0&&(f="#"+f),!f.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(u));if(p&&!f.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(u));this.elementName=this.stringify.name(u),this.type=t.AttributeDeclaration,this.attributeName=this.stringify.name(c),this.attributeType=this.stringify.dtdAttType(l),p&&(this.defaultValue=this.stringify.dtdAttDefault(p)),this.defaultValueType=f}return o.prototype.toString=function(a){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(a))},o}(r)}).call(bs)});var Ut=F((xs,Es)=>{(function(){var t,e,r,n,i=function(o,a){for(var u in a)s.call(a,u)&&(o[u]=a[u]);function c(){this.constructor=o}return c.prototype=a.prototype,o.prototype=new c,o.__super__=a.prototype,o},s={}.hasOwnProperty;n=be().isObject,r=ie(),t=W(),Es.exports=e=function(o){i(a,o);function a(u,c,l,f){if(a.__super__.constructor.call(this,u),l==null)throw new Error("Missing DTD entity name. "+this.debugInfo(l));if(f==null)throw new Error("Missing DTD entity value. "+this.debugInfo(l));if(this.pe=!!c,this.name=this.stringify.name(l),this.type=t.EntityDeclaration,!n(f))this.value=this.stringify.dtdEntityValue(f),this.internal=!0;else{if(!f.pubID&&!f.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(l));if(f.pubID&&!f.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(l));if(this.internal=!1,f.pubID!=null&&(this.pubID=this.stringify.dtdPubID(f.pubID)),f.sysID!=null&&(this.sysID=this.stringify.dtdSysID(f.sysID)),f.nData!=null&&(this.nData=this.stringify.dtdNData(f.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(l))}}return Object.defineProperty(a.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(a.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(a.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(a.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(a.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(a.prototype,"xmlVersion",{get:function(){return null}}),a.prototype.toString=function(u){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(u))},a}(r)}).call(xs)});var zt=F((Ts,Os)=>{(function(){var t,e,r,n=function(s,o){for(var a in o)i.call(o,a)&&(s[a]=o[a]);function u(){this.constructor=s}return u.prototype=o.prototype,s.prototype=new u,s.__super__=o.prototype,s},i={}.hasOwnProperty;r=ie(),t=W(),Os.exports=e=function(s){n(o,s);function o(a,u,c){if(o.__super__.constructor.call(this,a),u==null)throw new Error("Missing DTD element name. "+this.debugInfo());c||(c="(#PCDATA)"),Array.isArray(c)&&(c="("+c.join(",")+")"),this.name=this.stringify.name(u),this.type=t.ElementDeclaration,this.value=this.stringify.dtdElementValue(c)}return o.prototype.toString=function(a){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(a))},o}(r)}).call(Ts)});var $t=F((Ns,Ss)=>{(function(){var t,e,r,n=function(s,o){for(var a in o)i.call(o,a)&&(s[a]=o[a]);function u(){this.constructor=s}return u.prototype=o.prototype,s.prototype=new u,s.__super__=o.prototype,s},i={}.hasOwnProperty;r=ie(),t=W(),Ss.exports=e=function(s){n(o,s);function o(a,u,c){if(o.__super__.constructor.call(this,a),u==null)throw new Error("Missing DTD notation name. "+this.debugInfo(u));if(!c.pubID&&!c.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(u));this.name=this.stringify.name(u),this.type=t.NotationDeclaration,c.pubID!=null&&(this.pubID=this.stringify.dtdPubID(c.pubID)),c.sysID!=null&&(this.sysID=this.stringify.dtdSysID(c.sysID))}return Object.defineProperty(o.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(o.prototype,"systemId",{get:function(){return this.sysID}}),o.prototype.toString=function(a){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(a))},o}(r)}).call(Ns)});var Vt=F((Ds,Cs)=>{(function(){var t,e,r,n,i,s,o,a,u,c=function(f,p){for(var g in p)l.call(p,g)&&(f[g]=p[g]);function v(){this.constructor=f}return v.prototype=p.prototype,f.prototype=new v,f.__super__=p.prototype,f},l={}.hasOwnProperty;u=be().isObject,a=ie(),t=W(),e=Bt(),n=Ut(),r=zt(),i=$t(),o=jt(),Cs.exports=s=function(f){c(p,f);function p(g,v,E){var S,N,T,b,h,d;if(p.__super__.constructor.call(this,g),this.type=t.DocType,g.children){for(b=g.children,N=0,T=b.length;N<T;N++)if(S=b[N],S.type===t.Element){this.name=S.name;break}}this.documentObject=g,u(v)&&(h=v,v=h.pubID,E=h.sysID),E==null&&(d=[v,E],E=d[0],v=d[1]),v!=null&&(this.pubID=this.stringify.dtdPubID(v)),E!=null&&(this.sysID=this.stringify.dtdSysID(E))}return Object.defineProperty(p.prototype,"entities",{get:function(){var g,v,E,S,N;for(S={},N=this.children,v=0,E=N.length;v<E;v++)g=N[v],g.type===t.EntityDeclaration&&!g.pe&&(S[g.name]=g);return new o(S)}}),Object.defineProperty(p.prototype,"notations",{get:function(){var g,v,E,S,N;for(S={},N=this.children,v=0,E=N.length;v<E;v++)g=N[v],g.type===t.NotationDeclaration&&(S[g.name]=g);return new o(S)}}),Object.defineProperty(p.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(p.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(p.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),p.prototype.element=function(g,v){var E;return E=new r(this,g,v),this.children.push(E),this},p.prototype.attList=function(g,v,E,S,N){var T;return T=new e(this,g,v,E,S,N),this.children.push(T),this},p.prototype.entity=function(g,v){var E;return E=new n(this,!1,g,v),this.children.push(E),this},p.prototype.pEntity=function(g,v){var E;return E=new n(this,!0,g,v),this.children.push(E),this},p.prototype.notation=function(g,v){var E;return E=new i(this,g,v),this.children.push(E),this},p.prototype.toString=function(g){return this.options.writer.docType(this,this.options.writer.filterOptions(g))},p.prototype.ele=function(g,v){return this.element(g,v)},p.prototype.att=function(g,v,E,S,N){return this.attList(g,v,E,S,N)},p.prototype.ent=function(g,v){return this.entity(g,v)},p.prototype.pent=function(g,v){return this.pEntity(g,v)},p.prototype.not=function(g,v){return this.notation(g,v)},p.prototype.up=function(){return this.root()||this.documentObject},p.prototype.isEqualNode=function(g){return!(!p.__super__.isEqualNode.apply(this,arguments).isEqualNode(g)||g.name!==this.name||g.publicId!==this.publicId||g.systemId!==this.systemId)},p}(a)}).call(Ds)});var Wt=F((Ps,Is)=>{(function(){var t,e,r,n=function(s,o){for(var a in o)i.call(o,a)&&(s[a]=o[a]);function u(){this.constructor=s}return u.prototype=o.prototype,s.prototype=new u,s.__super__=o.prototype,s},i={}.hasOwnProperty;t=W(),e=ie(),Is.exports=r=function(s){n(o,s);function o(a,u){if(o.__super__.constructor.call(this,a),u==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=t.Raw,this.value=this.stringify.raw(u)}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(a){return this.options.writer.raw(this,this.options.writer.filterOptions(a))},o}(e)}).call(Ps)});var Ht=F((Ls,As)=>{(function(){var t,e,r,n=function(s,o){for(var a in o)i.call(o,a)&&(s[a]=o[a]);function u(){this.constructor=s}return u.prototype=o.prototype,s.prototype=new u,s.__super__=o.prototype,s},i={}.hasOwnProperty;t=W(),e=ft(),As.exports=r=function(s){n(o,s);function o(a,u){if(o.__super__.constructor.call(this,a),u==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=t.Text,this.value=this.stringify.text(u)}return Object.defineProperty(o.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(o.prototype,"wholeText",{get:function(){var a,u,c;for(c="",u=this.previousSibling;u;)c=u.data+c,u=u.previousSibling;for(c+=this.data,a=this.nextSibling;a;)c=c+a.data,a=a.nextSibling;return c}}),o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(a){return this.options.writer.text(this,this.options.writer.filterOptions(a))},o.prototype.splitText=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.replaceWholeText=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},o}(e)}).call(Ls)});var Kt=F((Fs,Ms)=>{(function(){var t,e,r,n=function(s,o){for(var a in o)i.call(o,a)&&(s[a]=o[a]);function u(){this.constructor=s}return u.prototype=o.prototype,s.prototype=new u,s.__super__=o.prototype,s},i={}.hasOwnProperty;t=W(),e=ft(),Ms.exports=r=function(s){n(o,s);function o(a,u,c){if(o.__super__.constructor.call(this,a),u==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=t.ProcessingInstruction,this.target=this.stringify.insTarget(u),this.name=this.target,c&&(this.value=this.stringify.insValue(c))}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(a){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(a))},o.prototype.isEqualNode=function(a){return!(!o.__super__.isEqualNode.apply(this,arguments).isEqualNode(a)||a.target!==this.target)},o}(e)}).call(Fs)});var Dn=F((_s,js)=>{(function(){var t,e,r,n=function(s,o){for(var a in o)i.call(o,a)&&(s[a]=o[a]);function u(){this.constructor=s}return u.prototype=o.prototype,s.prototype=new u,s.__super__=o.prototype,s},i={}.hasOwnProperty;r=ie(),t=W(),js.exports=e=function(s){n(o,s);function o(a){o.__super__.constructor.call(this,a),this.type=t.Dummy}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(a){return""},o}(r)}).call(_s)});var qs=F((Rs,ks)=>{(function(){var t;ks.exports=t=function(){function e(r){this.nodes=r}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.item=function(r){return this.nodes[r]||null},e}()}).call(Rs)});var Us=F((Xs,Bs)=>{(function(){Bs.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(Xs)});var ie=F((zs,$s)=>{(function(){var t,e,r,n,i,s,o,a,u,c,l,f,p,g,v,E,S,N,T,b={}.hasOwnProperty;T=be(),N=T.isObject,S=T.isFunction,E=T.isEmpty,v=T.getValue,a=null,r=null,n=null,i=null,s=null,p=null,g=null,f=null,o=null,e=null,l=null,u=null,t=null,$s.exports=c=function(){function h(d){this.parent=d,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,a||(a=Rt(),r=kt(),n=qt(),i=Xt(),s=Vt(),p=Wt(),g=Ht(),f=Kt(),o=Dn(),e=W(),l=qs(),u=jt(),t=Us())}return Object.defineProperty(h.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(h.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(h.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(h.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(h.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new l(this.children)),this.childNodeList}}),Object.defineProperty(h.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(h.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(h.prototype,"previousSibling",{get:function(){var d;return d=this.parent.children.indexOf(this),this.parent.children[d-1]||null}}),Object.defineProperty(h.prototype,"nextSibling",{get:function(){var d;return d=this.parent.children.indexOf(this),this.parent.children[d+1]||null}}),Object.defineProperty(h.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(h.prototype,"textContent",{get:function(){var d,x,D,y,P;if(this.nodeType===e.Element||this.nodeType===e.DocumentFragment){for(P="",y=this.children,x=0,D=y.length;x<D;x++)d=y[x],d.textContent&&(P+=d.textContent);return P}else return null},set:function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),h.prototype.setParent=function(d){var x,D,y,P,O;for(this.parent=d,d&&(this.options=d.options,this.stringify=d.stringify),P=this.children,O=[],D=0,y=P.length;D<y;D++)x=P[D],O.push(x.setParent(this));return O},h.prototype.element=function(d,x,D){var y,P,O,I,A,M,R,k,_,z,q;if(M=null,x===null&&D==null&&(_=[{},null],x=_[0],D=_[1]),x==null&&(x={}),x=v(x),N(x)||(z=[x,D],D=z[0],x=z[1]),d!=null&&(d=v(d)),Array.isArray(d))for(O=0,R=d.length;O<R;O++)P=d[O],M=this.element(P);else if(S(d))M=this.element(d.apply());else if(N(d)){for(A in d)if(!!b.call(d,A))if(q=d[A],S(q)&&(q=q.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&A.indexOf(this.stringify.convertAttKey)===0)M=this.attribute(A.substr(this.stringify.convertAttKey.length),q);else if(!this.options.separateArrayItems&&Array.isArray(q)&&E(q))M=this.dummy();else if(N(q)&&E(q))M=this.element(A);else if(!this.options.keepNullNodes&&q==null)M=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(q))for(I=0,k=q.length;I<k;I++)P=q[I],y={},y[A]=P,M=this.element(y);else N(q)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&A.indexOf(this.stringify.convertTextKey)===0?M=this.element(q):(M=this.element(A),M.element(q)):M=this.element(A,q)}else!this.options.keepNullNodes&&D===null?M=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&d.indexOf(this.stringify.convertTextKey)===0?M=this.text(D):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&d.indexOf(this.stringify.convertCDataKey)===0?M=this.cdata(D):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&d.indexOf(this.stringify.convertCommentKey)===0?M=this.comment(D):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&d.indexOf(this.stringify.convertRawKey)===0?M=this.raw(D):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&d.indexOf(this.stringify.convertPIKey)===0?M=this.instruction(d.substr(this.stringify.convertPIKey.length),D):M=this.node(d,x,D);if(M==null)throw new Error("Could not create any elements with: "+d+". "+this.debugInfo());return M},h.prototype.insertBefore=function(d,x,D){var y,P,O,I,A;if(d!=null?d.type:void 0)return O=d,I=x,O.setParent(this),I?(P=children.indexOf(I),A=children.splice(P),children.push(O),Array.prototype.push.apply(children,A)):children.push(O),O;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(d));return P=this.parent.children.indexOf(this),A=this.parent.children.splice(P),y=this.parent.element(d,x,D),Array.prototype.push.apply(this.parent.children,A),y},h.prototype.insertAfter=function(d,x,D){var y,P,O;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(d));return P=this.parent.children.indexOf(this),O=this.parent.children.splice(P+1),y=this.parent.element(d,x,D),Array.prototype.push.apply(this.parent.children,O),y},h.prototype.remove=function(){var d,x;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return d=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[d,d-d+1].concat(x=[])),this.parent},h.prototype.node=function(d,x,D){var y,P;return d!=null&&(d=v(d)),x||(x={}),x=v(x),N(x)||(P=[x,D],D=P[0],x=P[1]),y=new a(this,d,x),D!=null&&y.text(D),this.children.push(y),y},h.prototype.text=function(d){var x;return N(d)&&this.element(d),x=new g(this,d),this.children.push(x),this},h.prototype.cdata=function(d){var x;return x=new r(this,d),this.children.push(x),this},h.prototype.comment=function(d){var x;return x=new n(this,d),this.children.push(x),this},h.prototype.commentBefore=function(d){var x,D,y;return D=this.parent.children.indexOf(this),y=this.parent.children.splice(D),x=this.parent.comment(d),Array.prototype.push.apply(this.parent.children,y),this},h.prototype.commentAfter=function(d){var x,D,y;return D=this.parent.children.indexOf(this),y=this.parent.children.splice(D+1),x=this.parent.comment(d),Array.prototype.push.apply(this.parent.children,y),this},h.prototype.raw=function(d){var x;return x=new p(this,d),this.children.push(x),this},h.prototype.dummy=function(){var d;return d=new o(this),d},h.prototype.instruction=function(d,x){var D,y,P,O,I;if(d!=null&&(d=v(d)),x!=null&&(x=v(x)),Array.isArray(d))for(O=0,I=d.length;O<I;O++)D=d[O],this.instruction(D);else if(N(d))for(D in d)!b.call(d,D)||(y=d[D],this.instruction(D,y));else S(x)&&(x=x.apply()),P=new f(this,d,x),this.children.push(P);return this},h.prototype.instructionBefore=function(d,x){var D,y,P;return y=this.parent.children.indexOf(this),P=this.parent.children.splice(y),D=this.parent.instruction(d,x),Array.prototype.push.apply(this.parent.children,P),this},h.prototype.instructionAfter=function(d,x){var D,y,P;return y=this.parent.children.indexOf(this),P=this.parent.children.splice(y+1),D=this.parent.instruction(d,x),Array.prototype.push.apply(this.parent.children,P),this},h.prototype.declaration=function(d,x,D){var y,P;return y=this.document(),P=new i(y,d,x,D),y.children.length===0?y.children.unshift(P):y.children[0].type===e.Declaration?y.children[0]=P:y.children.unshift(P),y.root()||y},h.prototype.dtd=function(d,x){var D,y,P,O,I,A,M,R,k,_;for(y=this.document(),P=new s(y,d,x),k=y.children,O=I=0,M=k.length;I<M;O=++I)if(D=k[O],D.type===e.DocType)return y.children[O]=P,P;for(_=y.children,O=A=0,R=_.length;A<R;O=++A)if(D=_[O],D.isRoot)return y.children.splice(O,0,P),P;return y.children.push(P),P},h.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},h.prototype.root=function(){var d;for(d=this;d;){if(d.type===e.Document)return d.rootObject;if(d.isRoot)return d;d=d.parent}},h.prototype.document=function(){var d;for(d=this;d;){if(d.type===e.Document)return d;d=d.parent}},h.prototype.end=function(d){return this.document().end(d)},h.prototype.prev=function(){var d;if(d=this.parent.children.indexOf(this),d<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[d-1]},h.prototype.next=function(){var d;if(d=this.parent.children.indexOf(this),d===-1||d===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[d+1]},h.prototype.importDocument=function(d){var x;return x=d.root().clone(),x.parent=this,x.isRoot=!1,this.children.push(x),this},h.prototype.debugInfo=function(d){var x,D;return d=d||this.name,d==null&&!((x=this.parent)!=null?x.name:void 0)?"":d==null?"parent: <"+this.parent.name+">":((D=this.parent)!=null?D.name:void 0)?"node: <"+d+">, parent: <"+this.parent.name+">":"node: <"+d+">"},h.prototype.ele=function(d,x,D){return this.element(d,x,D)},h.prototype.nod=function(d,x,D){return this.node(d,x,D)},h.prototype.txt=function(d){return this.text(d)},h.prototype.dat=function(d){return this.cdata(d)},h.prototype.com=function(d){return this.comment(d)},h.prototype.ins=function(d,x){return this.instruction(d,x)},h.prototype.doc=function(){return this.document()},h.prototype.dec=function(d,x,D){return this.declaration(d,x,D)},h.prototype.e=function(d,x,D){return this.element(d,x,D)},h.prototype.n=function(d,x,D){return this.node(d,x,D)},h.prototype.t=function(d){return this.text(d)},h.prototype.d=function(d){return this.cdata(d)},h.prototype.c=function(d){return this.comment(d)},h.prototype.r=function(d){return this.raw(d)},h.prototype.i=function(d,x){return this.instruction(d,x)},h.prototype.u=function(){return this.up()},h.prototype.importXMLBuilder=function(d){return this.importDocument(d)},h.prototype.replaceChild=function(d,x){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.removeChild=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.appendChild=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.hasChildNodes=function(){return this.children.length!==0},h.prototype.cloneNode=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.isSupported=function(d,x){return!0},h.prototype.hasAttributes=function(){return this.attribs.length!==0},h.prototype.compareDocumentPosition=function(d){var x,D;return x=this,x===d?0:this.document()!==d.document()?(D=t.Disconnected|t.ImplementationSpecific,Math.random()<.5?D|=t.Preceding:D|=t.Following,D):x.isAncestor(d)?t.Contains|t.Preceding:x.isDescendant(d)?t.Contains|t.Following:x.isPreceding(d)?t.Preceding:t.Following},h.prototype.isSameNode=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.lookupPrefix=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.isDefaultNamespace=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.lookupNamespaceURI=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.isEqualNode=function(d){var x,D,y;if(d.nodeType!==this.nodeType||d.children.length!==this.children.length)return!1;for(x=D=0,y=this.children.length-1;0<=y?D<=y:D>=y;x=0<=y?++D:--D)if(!this.children[x].isEqualNode(d.children[x]))return!1;return!0},h.prototype.getFeature=function(d,x){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.setUserData=function(d,x,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.getUserData=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},h.prototype.contains=function(d){return d?d===this||this.isDescendant(d):!1},h.prototype.isDescendant=function(d){var x,D,y,P,O;for(O=this.children,y=0,P=O.length;y<P;y++)if(x=O[y],d===x||(D=x.isDescendant(d),D))return!0;return!1},h.prototype.isAncestor=function(d){return d.isDescendant(this)},h.prototype.isPreceding=function(d){var x,D;return x=this.treePosition(d),D=this.treePosition(this),x===-1||D===-1?!1:x<D},h.prototype.isFollowing=function(d){var x,D;return x=this.treePosition(d),D=this.treePosition(this),x===-1||D===-1?!1:x>D},h.prototype.treePosition=function(d){var x,D;return D=0,x=!1,this.foreachTreeNode(this.document(),function(y){if(D++,!x&&y===d)return x=!0}),x?D:-1},h.prototype.foreachTreeNode=function(d,x){var D,y,P,O,I;for(d||(d=this.document()),O=d.children,y=0,P=O.length;y<P;y++){if(D=O[y],I=x(D))return I;if(I=this.foreachTreeNode(D,x),I)return I}},h}()}).call(zs)});var Cn=F((Vs,Ws)=>{(function(){var t,e=function(n,i){return function(){return n.apply(i,arguments)}},r={}.hasOwnProperty;Ws.exports=t=function(){function n(i){this.assertLegalName=e(this.assertLegalName,this),this.assertLegalChar=e(this.assertLegalChar,this);var s,o,a;i||(i={}),this.options=i,this.options.version||(this.options.version="1.0"),o=i.stringify||{};for(s in o)!r.call(o,s)||(a=o[s],this[s]=a)}return n.prototype.name=function(i){return this.options.noValidation?i:this.assertLegalName(""+i||"")},n.prototype.text=function(i){return this.options.noValidation?i:this.assertLegalChar(this.textEscape(""+i||""))},n.prototype.cdata=function(i){return this.options.noValidation?i:(i=""+i||"",i=i.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(i))},n.prototype.comment=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+i);return this.assertLegalChar(i)},n.prototype.raw=function(i){return this.options.noValidation?i:""+i||""},n.prototype.attValue=function(i){return this.options.noValidation?i:this.assertLegalChar(this.attEscape(i=""+i||""))},n.prototype.insTarget=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.insValue=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/\?>/))throw new Error("Invalid processing instruction value: "+i);return this.assertLegalChar(i)},n.prototype.xmlVersion=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+i);return i},n.prototype.xmlEncoding=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+i);return this.assertLegalChar(i)},n.prototype.xmlStandalone=function(i){return this.options.noValidation?i:i?"yes":"no"},n.prototype.dtdPubID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdSysID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdElementValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdAttType=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdAttDefault=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdEntityValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdNData=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.convertAttKey="@",n.prototype.convertPIKey="?",n.prototype.convertTextKey="#text",n.prototype.convertCDataKey="#cdata",n.prototype.convertCommentKey="#comment",n.prototype.convertRawKey="#raw",n.prototype.assertLegalChar=function(i){var s,o;if(this.options.noValidation)return i;if(s="",this.options.version==="1.0"){if(s=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,o=i.match(s))throw new Error("Invalid character in string: "+i+" at index "+o.index)}else if(this.options.version==="1.1"&&(s=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,o=i.match(s)))throw new Error("Invalid character in string: "+i+" at index "+o.index);return i},n.prototype.assertLegalName=function(i){var s;if(this.options.noValidation)return i;if(this.assertLegalChar(i),s=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!i.match(s))throw new Error("Invalid character in name");return i},n.prototype.textEscape=function(i){var s;return this.options.noValidation?i:(s=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(s,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},n.prototype.attEscape=function(i){var s;return this.options.noValidation?i:(s=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(s,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},n}()}).call(Vs)});var ht=F((Hs,Ks)=>{(function(){Ks.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(Hs)});var Pn=F((Gs,Ys)=>{(function(){var t,e,r,n,i,s,o,a,u,c,l,f,p,g,v,E,S,N={}.hasOwnProperty;S=be().assign,t=W(),u=Xt(),c=Vt(),r=kt(),n=qt(),f=Rt(),g=Wt(),v=Ht(),p=Kt(),l=Dn(),i=Bt(),s=zt(),o=Ut(),a=$t(),e=ht(),Ys.exports=E=function(){function T(b){var h,d,x;b||(b={}),this.options=b,d=b.writer||{};for(h in d)!N.call(d,h)||(x=d[h],this["_"+h]=this[h],this[h]=x)}return T.prototype.filterOptions=function(b){var h,d,x,D,y,P,O,I;return b||(b={}),b=S({},this.options,b),h={writer:this},h.pretty=b.pretty||!1,h.allowEmpty=b.allowEmpty||!1,h.indent=(d=b.indent)!=null?d:"  ",h.newline=(x=b.newline)!=null?x:`
`,h.offset=(D=b.offset)!=null?D:0,h.dontPrettyTextNodes=(y=(P=b.dontPrettyTextNodes)!=null?P:b.dontprettytextnodes)!=null?y:0,h.spaceBeforeSlash=(O=(I=b.spaceBeforeSlash)!=null?I:b.spacebeforeslash)!=null?O:"",h.spaceBeforeSlash===!0&&(h.spaceBeforeSlash=" "),h.suppressPrettyCount=0,h.user={},h.state=e.None,h},T.prototype.indent=function(b,h,d){var x;return!h.pretty||h.suppressPrettyCount?"":h.pretty&&(x=(d||0)+h.offset+1,x>0)?new Array(x).join(h.indent):""},T.prototype.endline=function(b,h,d){return!h.pretty||h.suppressPrettyCount?"":h.newline},T.prototype.attribute=function(b,h,d){var x;return this.openAttribute(b,h,d),x=" "+b.name+'="'+b.value+'"',this.closeAttribute(b,h,d),x},T.prototype.cdata=function(b,h,d){var x;return this.openNode(b,h,d),h.state=e.OpenTag,x=this.indent(b,h,d)+"<![CDATA[",h.state=e.InsideTag,x+=b.value,h.state=e.CloseTag,x+="]]>"+this.endline(b,h,d),h.state=e.None,this.closeNode(b,h,d),x},T.prototype.comment=function(b,h,d){var x;return this.openNode(b,h,d),h.state=e.OpenTag,x=this.indent(b,h,d)+"<!-- ",h.state=e.InsideTag,x+=b.value,h.state=e.CloseTag,x+=" -->"+this.endline(b,h,d),h.state=e.None,this.closeNode(b,h,d),x},T.prototype.declaration=function(b,h,d){var x;return this.openNode(b,h,d),h.state=e.OpenTag,x=this.indent(b,h,d)+"<?xml",h.state=e.InsideTag,x+=' version="'+b.version+'"',b.encoding!=null&&(x+=' encoding="'+b.encoding+'"'),b.standalone!=null&&(x+=' standalone="'+b.standalone+'"'),h.state=e.CloseTag,x+=h.spaceBeforeSlash+"?>",x+=this.endline(b,h,d),h.state=e.None,this.closeNode(b,h,d),x},T.prototype.docType=function(b,h,d){var x,D,y,P,O;if(d||(d=0),this.openNode(b,h,d),h.state=e.OpenTag,P=this.indent(b,h,d),P+="<!DOCTYPE "+b.root().name,b.pubID&&b.sysID?P+=' PUBLIC "'+b.pubID+'" "'+b.sysID+'"':b.sysID&&(P+=' SYSTEM "'+b.sysID+'"'),b.children.length>0){for(P+=" [",P+=this.endline(b,h,d),h.state=e.InsideTag,O=b.children,D=0,y=O.length;D<y;D++)x=O[D],P+=this.writeChildNode(x,h,d+1);h.state=e.CloseTag,P+="]"}return h.state=e.CloseTag,P+=h.spaceBeforeSlash+">",P+=this.endline(b,h,d),h.state=e.None,this.closeNode(b,h,d),P},T.prototype.element=function(b,h,d){var x,D,y,P,O,I,A,M,R,k,_,z,q,pe;d||(d=0),k=!1,_="",this.openNode(b,h,d),h.state=e.OpenTag,_+=this.indent(b,h,d)+"<"+b.name,z=b.attribs;for(R in z)!N.call(z,R)||(x=z[R],_+=this.attribute(x,h,d));if(y=b.children.length,P=y===0?null:b.children[0],y===0||b.children.every(function(ne){return(ne.type===t.Text||ne.type===t.Raw)&&ne.value===""}))h.allowEmpty?(_+=">",h.state=e.CloseTag,_+="</"+b.name+">"+this.endline(b,h,d)):(h.state=e.CloseTag,_+=h.spaceBeforeSlash+"/>"+this.endline(b,h,d));else if(h.pretty&&y===1&&(P.type===t.Text||P.type===t.Raw)&&P.value!=null)_+=">",h.state=e.InsideTag,h.suppressPrettyCount++,k=!0,_+=this.writeChildNode(P,h,d+1),h.suppressPrettyCount--,k=!1,h.state=e.CloseTag,_+="</"+b.name+">"+this.endline(b,h,d);else{if(h.dontPrettyTextNodes){for(q=b.children,O=0,A=q.length;O<A;O++)if(D=q[O],(D.type===t.Text||D.type===t.Raw)&&D.value!=null){h.suppressPrettyCount++,k=!0;break}}for(_+=">"+this.endline(b,h,d),h.state=e.InsideTag,pe=b.children,I=0,M=pe.length;I<M;I++)D=pe[I],_+=this.writeChildNode(D,h,d+1);h.state=e.CloseTag,_+=this.indent(b,h,d)+"</"+b.name+">",k&&h.suppressPrettyCount--,_+=this.endline(b,h,d),h.state=e.None}return this.closeNode(b,h,d),_},T.prototype.writeChildNode=function(b,h,d){switch(b.type){case t.CData:return this.cdata(b,h,d);case t.Comment:return this.comment(b,h,d);case t.Element:return this.element(b,h,d);case t.Raw:return this.raw(b,h,d);case t.Text:return this.text(b,h,d);case t.ProcessingInstruction:return this.processingInstruction(b,h,d);case t.Dummy:return"";case t.Declaration:return this.declaration(b,h,d);case t.DocType:return this.docType(b,h,d);case t.AttributeDeclaration:return this.dtdAttList(b,h,d);case t.ElementDeclaration:return this.dtdElement(b,h,d);case t.EntityDeclaration:return this.dtdEntity(b,h,d);case t.NotationDeclaration:return this.dtdNotation(b,h,d);default:throw new Error("Unknown XML node type: "+b.constructor.name)}},T.prototype.processingInstruction=function(b,h,d){var x;return this.openNode(b,h,d),h.state=e.OpenTag,x=this.indent(b,h,d)+"<?",h.state=e.InsideTag,x+=b.target,b.value&&(x+=" "+b.value),h.state=e.CloseTag,x+=h.spaceBeforeSlash+"?>",x+=this.endline(b,h,d),h.state=e.None,this.closeNode(b,h,d),x},T.prototype.raw=function(b,h,d){var x;return this.openNode(b,h,d),h.state=e.OpenTag,x=this.indent(b,h,d),h.state=e.InsideTag,x+=b.value,h.state=e.CloseTag,x+=this.endline(b,h,d),h.state=e.None,this.closeNode(b,h,d),x},T.prototype.text=function(b,h,d){var x;return this.openNode(b,h,d),h.state=e.OpenTag,x=this.indent(b,h,d),h.state=e.InsideTag,x+=b.value,h.state=e.CloseTag,x+=this.endline(b,h,d),h.state=e.None,this.closeNode(b,h,d),x},T.prototype.dtdAttList=function(b,h,d){var x;return this.openNode(b,h,d),h.state=e.OpenTag,x=this.indent(b,h,d)+"<!ATTLIST",h.state=e.InsideTag,x+=" "+b.elementName+" "+b.attributeName+" "+b.attributeType,b.defaultValueType!=="#DEFAULT"&&(x+=" "+b.defaultValueType),b.defaultValue&&(x+=' "'+b.defaultValue+'"'),h.state=e.CloseTag,x+=h.spaceBeforeSlash+">"+this.endline(b,h,d),h.state=e.None,this.closeNode(b,h,d),x},T.prototype.dtdElement=function(b,h,d){var x;return this.openNode(b,h,d),h.state=e.OpenTag,x=this.indent(b,h,d)+"<!ELEMENT",h.state=e.InsideTag,x+=" "+b.name+" "+b.value,h.state=e.CloseTag,x+=h.spaceBeforeSlash+">"+this.endline(b,h,d),h.state=e.None,this.closeNode(b,h,d),x},T.prototype.dtdEntity=function(b,h,d){var x;return this.openNode(b,h,d),h.state=e.OpenTag,x=this.indent(b,h,d)+"<!ENTITY",h.state=e.InsideTag,b.pe&&(x+=" %"),x+=" "+b.name,b.value?x+=' "'+b.value+'"':(b.pubID&&b.sysID?x+=' PUBLIC "'+b.pubID+'" "'+b.sysID+'"':b.sysID&&(x+=' SYSTEM "'+b.sysID+'"'),b.nData&&(x+=" NDATA "+b.nData)),h.state=e.CloseTag,x+=h.spaceBeforeSlash+">"+this.endline(b,h,d),h.state=e.None,this.closeNode(b,h,d),x},T.prototype.dtdNotation=function(b,h,d){var x;return this.openNode(b,h,d),h.state=e.OpenTag,x=this.indent(b,h,d)+"<!NOTATION",h.state=e.InsideTag,x+=" "+b.name,b.pubID&&b.sysID?x+=' PUBLIC "'+b.pubID+'" "'+b.sysID+'"':b.pubID?x+=' PUBLIC "'+b.pubID+'"':b.sysID&&(x+=' SYSTEM "'+b.sysID+'"'),h.state=e.CloseTag,x+=h.spaceBeforeSlash+">"+this.endline(b,h,d),h.state=e.None,this.closeNode(b,h,d),x},T.prototype.openNode=function(b,h,d){},T.prototype.closeNode=function(b,h,d){},T.prototype.openAttribute=function(b,h,d){},T.prototype.closeAttribute=function(b,h,d){},T}()}).call(Gs)});var Gt=F((Js,Qs)=>{(function(){var t,e,r=function(i,s){for(var o in s)n.call(s,o)&&(i[o]=s[o]);function a(){this.constructor=i}return a.prototype=s.prototype,i.prototype=new a,i.__super__=s.prototype,i},n={}.hasOwnProperty;e=Pn(),Qs.exports=t=function(i){r(s,i);function s(o){s.__super__.constructor.call(this,o)}return s.prototype.document=function(o,a){var u,c,l,f,p;for(a=this.filterOptions(a),f="",p=o.children,c=0,l=p.length;c<l;c++)u=p[c],f+=this.writeChildNode(u,a,0);return a.pretty&&f.slice(-a.newline.length)===a.newline&&(f=f.slice(0,-a.newline.length)),f},s}(e)}).call(Js)});var In=F((Zs,eo)=>{(function(){var t,e,r,n,i,s,o,a,u=function(l,f){for(var p in f)c.call(f,p)&&(l[p]=f[p]);function g(){this.constructor=l}return g.prototype=f.prototype,l.prototype=new g,l.__super__=f.prototype,l},c={}.hasOwnProperty;a=be().isPlainObject,r=Nn(),e=rs(),i=ie(),t=W(),o=Cn(),s=Gt(),eo.exports=n=function(l){u(f,l);function f(p){f.__super__.constructor.call(this,null),this.name="#document",this.type=t.Document,this.documentURI=null,this.domConfig=new e,p||(p={}),p.writer||(p.writer=new s),this.options=p,this.stringify=new o(p)}return Object.defineProperty(f.prototype,"implementation",{value:new r}),Object.defineProperty(f.prototype,"doctype",{get:function(){var p,g,v,E;for(E=this.children,g=0,v=E.length;g<v;g++)if(p=E[g],p.type===t.DocType)return p;return null}}),Object.defineProperty(f.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(f.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(f.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(f.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].encoding:null}}),Object.defineProperty(f.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(f.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(f.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(f.prototype,"origin",{get:function(){return null}}),Object.defineProperty(f.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(f.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(f.prototype,"contentType",{get:function(){return null}}),f.prototype.end=function(p){var g;return g={},p?a(p)&&(g=p,p=this.options.writer):p=this.options.writer,p.document(this,p.filterOptions(g))},f.prototype.toString=function(p){return this.options.writer.document(this,this.options.writer.filterOptions(p))},f.prototype.createElement=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.createTextNode=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.createComment=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.createCDATASection=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.createProcessingInstruction=function(p,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.createAttribute=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.createEntityReference=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getElementsByTagName=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.importNode=function(p,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.createElementNS=function(p,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.createAttributeNS=function(p,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getElementsByTagNameNS=function(p,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getElementById=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.adoptNode=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.renameNode=function(p,g,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getElementsByClassName=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.createEvent=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.createNodeIterator=function(p,g,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.createTreeWalker=function(p,g,v){throw new Error("This DOM method is not implemented."+this.debugInfo())},f}(i)}).call(Zs)});var no=F((to,ro)=>{(function(){var t,e,r,n,i,s,o,a,u,c,l,f,p,g,v,E,S,N,T,b,h,d,x,D,y={}.hasOwnProperty;D=be(),d=D.isObject,h=D.isFunction,x=D.isPlainObject,b=D.getValue,t=W(),f=In(),g=Rt(),n=kt(),i=qt(),E=Wt(),T=Ht(),v=Kt(),c=Xt(),l=Vt(),s=Bt(),a=Ut(),o=zt(),u=$t(),r=Sn(),N=Cn(),S=Gt(),e=ht(),ro.exports=p=function(){function P(O,I,A){var M;this.name="?xml",this.type=t.Document,O||(O={}),M={},O.writer?x(O.writer)&&(M=O.writer,O.writer=new S):O.writer=new S,this.options=O,this.writer=O.writer,this.writerOptions=this.writer.filterOptions(M),this.stringify=new N(O),this.onDataCallback=I||function(){},this.onEndCallback=A||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return P.prototype.createChildNode=function(O){var I,A,M,R,k,_,z,q;switch(O.type){case t.CData:this.cdata(O.value);break;case t.Comment:this.comment(O.value);break;case t.Element:M={},z=O.attribs;for(A in z)!y.call(z,A)||(I=z[A],M[A]=I.value);this.node(O.name,M);break;case t.Dummy:this.dummy();break;case t.Raw:this.raw(O.value);break;case t.Text:this.text(O.value);break;case t.ProcessingInstruction:this.instruction(O.target,O.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+O.constructor.name)}for(q=O.children,k=0,_=q.length;k<_;k++)R=q[k],this.createChildNode(R),R.type===t.Element&&this.up();return this},P.prototype.dummy=function(){return this},P.prototype.node=function(O,I,A){var M;if(O==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(O));return this.openCurrent(),O=b(O),I==null&&(I={}),I=b(I),d(I)||(M=[I,A],A=M[0],I=M[1]),this.currentNode=new g(this,O,I),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,A!=null&&this.text(A),this},P.prototype.element=function(O,I,A){var M,R,k,_,z,q;if(this.currentNode&&this.currentNode.type===t.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(O)||d(O)||h(O))for(_=this.options.noValidation,this.options.noValidation=!0,q=new f(this.options).element("TEMP_ROOT"),q.element(O),this.options.noValidation=_,z=q.children,R=0,k=z.length;R<k;R++)M=z[R],this.createChildNode(M),M.type===t.Element&&this.up();else this.node(O,I,A);return this},P.prototype.attribute=function(O,I){var A,M;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(O));if(O!=null&&(O=b(O)),d(O))for(A in O)!y.call(O,A)||(M=O[A],this.attribute(A,M));else h(I)&&(I=I.apply()),this.options.keepNullAttributes&&I==null?this.currentNode.attribs[O]=new r(this,O,""):I!=null&&(this.currentNode.attribs[O]=new r(this,O,I));return this},P.prototype.text=function(O){var I;return this.openCurrent(),I=new T(this,O),this.onData(this.writer.text(I,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},P.prototype.cdata=function(O){var I;return this.openCurrent(),I=new n(this,O),this.onData(this.writer.cdata(I,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},P.prototype.comment=function(O){var I;return this.openCurrent(),I=new i(this,O),this.onData(this.writer.comment(I,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},P.prototype.raw=function(O){var I;return this.openCurrent(),I=new E(this,O),this.onData(this.writer.raw(I,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},P.prototype.instruction=function(O,I){var A,M,R,k,_;if(this.openCurrent(),O!=null&&(O=b(O)),I!=null&&(I=b(I)),Array.isArray(O))for(A=0,k=O.length;A<k;A++)M=O[A],this.instruction(M);else if(d(O))for(M in O)!y.call(O,M)||(R=O[M],this.instruction(M,R));else h(I)&&(I=I.apply()),_=new v(this,O,I),this.onData(this.writer.processingInstruction(_,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},P.prototype.declaration=function(O,I,A){var M;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return M=new c(this,O,I,A),this.onData(this.writer.declaration(M,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},P.prototype.doctype=function(O,I,A){if(this.openCurrent(),O==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new l(this,I,A),this.currentNode.rootNodeName=O,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},P.prototype.dtdElement=function(O,I){var A;return this.openCurrent(),A=new o(this,O,I),this.onData(this.writer.dtdElement(A,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},P.prototype.attList=function(O,I,A,M,R){var k;return this.openCurrent(),k=new s(this,O,I,A,M,R),this.onData(this.writer.dtdAttList(k,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},P.prototype.entity=function(O,I){var A;return this.openCurrent(),A=new a(this,!1,O,I),this.onData(this.writer.dtdEntity(A,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},P.prototype.pEntity=function(O,I){var A;return this.openCurrent(),A=new a(this,!0,O,I),this.onData(this.writer.dtdEntity(A,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},P.prototype.notation=function(O,I){var A;return this.openCurrent(),A=new u(this,O,I),this.onData(this.writer.dtdNotation(A,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},P.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},P.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},P.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},P.prototype.openNode=function(O){var I,A,M,R;if(!O.isOpen){if(!this.root&&this.currentLevel===0&&O.type===t.Element&&(this.root=O),A="",O.type===t.Element){this.writerOptions.state=e.OpenTag,A=this.writer.indent(O,this.writerOptions,this.currentLevel)+"<"+O.name,R=O.attribs;for(M in R)!y.call(R,M)||(I=R[M],A+=this.writer.attribute(I,this.writerOptions,this.currentLevel));A+=(O.children?">":"/>")+this.writer.endline(O,this.writerOptions,this.currentLevel),this.writerOptions.state=e.InsideTag}else this.writerOptions.state=e.OpenTag,A=this.writer.indent(O,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+O.rootNodeName,O.pubID&&O.sysID?A+=' PUBLIC "'+O.pubID+'" "'+O.sysID+'"':O.sysID&&(A+=' SYSTEM "'+O.sysID+'"'),O.children?(A+=" [",this.writerOptions.state=e.InsideTag):(this.writerOptions.state=e.CloseTag,A+=">"),A+=this.writer.endline(O,this.writerOptions,this.currentLevel);return this.onData(A,this.currentLevel),O.isOpen=!0}},P.prototype.closeNode=function(O){var I;if(!O.isClosed)return I="",this.writerOptions.state=e.CloseTag,O.type===t.Element?I=this.writer.indent(O,this.writerOptions,this.currentLevel)+"</"+O.name+">"+this.writer.endline(O,this.writerOptions,this.currentLevel):I=this.writer.indent(O,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(O,this.writerOptions,this.currentLevel),this.writerOptions.state=e.None,this.onData(I,this.currentLevel),O.isClosed=!0},P.prototype.onData=function(O,I){return this.documentStarted=!0,this.onDataCallback(O,I+1)},P.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},P.prototype.debugInfo=function(O){return O==null?"":"node: <"+O+">"},P.prototype.ele=function(){return this.element.apply(this,arguments)},P.prototype.nod=function(O,I,A){return this.node(O,I,A)},P.prototype.txt=function(O){return this.text(O)},P.prototype.dat=function(O){return this.cdata(O)},P.prototype.com=function(O){return this.comment(O)},P.prototype.ins=function(O,I){return this.instruction(O,I)},P.prototype.dec=function(O,I,A){return this.declaration(O,I,A)},P.prototype.dtd=function(O,I,A){return this.doctype(O,I,A)},P.prototype.e=function(O,I,A){return this.element(O,I,A)},P.prototype.n=function(O,I,A){return this.node(O,I,A)},P.prototype.t=function(O){return this.text(O)},P.prototype.d=function(O){return this.cdata(O)},P.prototype.c=function(O){return this.comment(O)},P.prototype.r=function(O){return this.raw(O)},P.prototype.i=function(O,I){return this.instruction(O,I)},P.prototype.att=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},P.prototype.a=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},P.prototype.ent=function(O,I){return this.entity(O,I)},P.prototype.pent=function(O,I){return this.pEntity(O,I)},P.prototype.not=function(O,I){return this.notation(O,I)},P}()}).call(to)});var oo=F((io,so)=>{(function(){var t,e,r,n,i=function(o,a){for(var u in a)s.call(a,u)&&(o[u]=a[u]);function c(){this.constructor=o}return c.prototype=a.prototype,o.prototype=new c,o.__super__=a.prototype,o},s={}.hasOwnProperty;t=W(),n=Pn(),e=ht(),so.exports=r=function(o){i(a,o);function a(u,c){this.stream=u,a.__super__.constructor.call(this,c)}return a.prototype.endline=function(u,c,l){return u.isLastRootNode&&c.state===e.CloseTag?"":a.__super__.endline.call(this,u,c,l)},a.prototype.document=function(u,c){var l,f,p,g,v,E,S,N,T;for(S=u.children,f=p=0,v=S.length;p<v;f=++p)l=S[f],l.isLastRootNode=f===u.children.length-1;for(c=this.filterOptions(c),N=u.children,T=[],g=0,E=N.length;g<E;g++)l=N[g],T.push(this.writeChildNode(l,c,0));return T},a.prototype.attribute=function(u,c,l){return this.stream.write(a.__super__.attribute.call(this,u,c,l))},a.prototype.cdata=function(u,c,l){return this.stream.write(a.__super__.cdata.call(this,u,c,l))},a.prototype.comment=function(u,c,l){return this.stream.write(a.__super__.comment.call(this,u,c,l))},a.prototype.declaration=function(u,c,l){return this.stream.write(a.__super__.declaration.call(this,u,c,l))},a.prototype.docType=function(u,c,l){var f,p,g,v;if(l||(l=0),this.openNode(u,c,l),c.state=e.OpenTag,this.stream.write(this.indent(u,c,l)),this.stream.write("<!DOCTYPE "+u.root().name),u.pubID&&u.sysID?this.stream.write(' PUBLIC "'+u.pubID+'" "'+u.sysID+'"'):u.sysID&&this.stream.write(' SYSTEM "'+u.sysID+'"'),u.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(u,c,l)),c.state=e.InsideTag,v=u.children,p=0,g=v.length;p<g;p++)f=v[p],this.writeChildNode(f,c,l+1);c.state=e.CloseTag,this.stream.write("]")}return c.state=e.CloseTag,this.stream.write(c.spaceBeforeSlash+">"),this.stream.write(this.endline(u,c,l)),c.state=e.None,this.closeNode(u,c,l)},a.prototype.element=function(u,c,l){var f,p,g,v,E,S,N,T,b,h;l||(l=0),this.openNode(u,c,l),c.state=e.OpenTag,this.stream.write(this.indent(u,c,l)+"<"+u.name),b=u.attribs;for(N in b)!s.call(b,N)||(f=b[N],this.attribute(f,c,l));if(g=u.children.length,v=g===0?null:u.children[0],g===0||u.children.every(function(d){return(d.type===t.Text||d.type===t.Raw)&&d.value===""}))c.allowEmpty?(this.stream.write(">"),c.state=e.CloseTag,this.stream.write("</"+u.name+">")):(c.state=e.CloseTag,this.stream.write(c.spaceBeforeSlash+"/>"));else if(c.pretty&&g===1&&(v.type===t.Text||v.type===t.Raw)&&v.value!=null)this.stream.write(">"),c.state=e.InsideTag,c.suppressPrettyCount++,T=!0,this.writeChildNode(v,c,l+1),c.suppressPrettyCount--,T=!1,c.state=e.CloseTag,this.stream.write("</"+u.name+">");else{for(this.stream.write(">"+this.endline(u,c,l)),c.state=e.InsideTag,h=u.children,E=0,S=h.length;E<S;E++)p=h[E],this.writeChildNode(p,c,l+1);c.state=e.CloseTag,this.stream.write(this.indent(u,c,l)+"</"+u.name+">")}return this.stream.write(this.endline(u,c,l)),c.state=e.None,this.closeNode(u,c,l)},a.prototype.processingInstruction=function(u,c,l){return this.stream.write(a.__super__.processingInstruction.call(this,u,c,l))},a.prototype.raw=function(u,c,l){return this.stream.write(a.__super__.raw.call(this,u,c,l))},a.prototype.text=function(u,c,l){return this.stream.write(a.__super__.text.call(this,u,c,l))},a.prototype.dtdAttList=function(u,c,l){return this.stream.write(a.__super__.dtdAttList.call(this,u,c,l))},a.prototype.dtdElement=function(u,c,l){return this.stream.write(a.__super__.dtdElement.call(this,u,c,l))},a.prototype.dtdEntity=function(u,c,l){return this.stream.write(a.__super__.dtdEntity.call(this,u,c,l))},a.prototype.dtdNotation=function(u,c,l){return this.stream.write(a.__super__.dtdNotation.call(this,u,c,l))},a}(n)}).call(io)});var uo=F((ao,je)=>{(function(){var t,e,r,n,i,s,o,a,u,c;c=be(),a=c.assign,u=c.isFunction,r=Nn(),n=In(),i=no(),o=Gt(),s=oo(),t=W(),e=ht(),je.exports.create=function(l,f,p,g){var v,E;if(l==null)throw new Error("Root element needs a name.");return g=a({},f,p,g),v=new n(g),E=v.element(l),g.headless||(v.declaration(g),(g.pubID!=null||g.sysID!=null)&&v.dtd(g)),E},je.exports.begin=function(l,f,p){var g;return u(l)&&(g=[l,f],f=g[0],p=g[1],l={}),f?new i(l,f,p):new n(l)},je.exports.stringWriter=function(l){return new o(l)},je.exports.streamWriter=function(l,f){return new s(l,f)},je.exports.implementation=new r,je.exports.nodeType=t,je.exports.writerState=e}).call(ao)});var co=F(Ln=>{(function(){"use strict";var t,e,r,n,i,s={}.hasOwnProperty;t=uo(),e=_t().defaults,n=function(o){return typeof o=="string"&&(o.indexOf("&")>=0||o.indexOf(">")>=0||o.indexOf("<")>=0)},i=function(o){return"<![CDATA["+r(o)+"]]>"},r=function(o){return o.replace("]]>","]]]]><![CDATA[>")},Ln.Builder=function(){function o(a){var u,c,l;this.options={},c=e["0.2"];for(u in c)!s.call(c,u)||(l=c[u],this.options[u]=l);for(u in a)!s.call(a,u)||(l=a[u],this.options[u]=l)}return o.prototype.buildObject=function(a){var u,c,l,f,p;return u=this.options.attrkey,c=this.options.charkey,Object.keys(a).length===1&&this.options.rootName===e["0.2"].rootName?(p=Object.keys(a)[0],a=a[p]):p=this.options.rootName,l=function(g){return function(v,E){var S,N,T,b,h,d;if(typeof E!="object")g.options.cdata&&n(E)?v.raw(i(E)):v.txt(E);else if(Array.isArray(E)){for(b in E)if(!!s.call(E,b)){N=E[b];for(h in N)T=N[h],v=l(v.ele(h),T).up()}}else for(h in E)if(!!s.call(E,h))if(N=E[h],h===u){if(typeof N=="object")for(S in N)d=N[S],v=v.att(S,d)}else if(h===c)g.options.cdata&&n(N)?v=v.raw(i(N)):v=v.txt(N);else if(Array.isArray(N))for(b in N)!s.call(N,b)||(T=N[b],typeof T=="string"?g.options.cdata&&n(T)?v=v.ele(h).raw(i(T)).up():v=v.ele(h,T).up():v=l(v.ele(h),T).up());else typeof N=="object"?v=l(v.ele(h),N).up():typeof N=="string"&&g.options.cdata&&n(N)?v=v.ele(h).raw(i(N)).up():(N==null&&(N=""),v=v.ele(h,N.toString()).up());return v}}(this),f=t.create(p,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),l(f,a).end(this.options.renderOpts)},o}()}).call(Ln)});var lo=F(Yt=>{(function(t){t.parser=function(w,m){return new r(w,m)},t.SAXParser=r,t.SAXStream=c,t.createStream=u,t.MAX_BUFFER_LENGTH=64*1024;var e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function r(w,m){if(!(this instanceof r))return new r(w,m);var L=this;i(L),L.q=L.c="",L.bufferCheckPosition=t.MAX_BUFFER_LENGTH,L.opt=m||{},L.opt.lowercase=L.opt.lowercase||L.opt.lowercasetags,L.looseCase=L.opt.lowercase?"toLowerCase":"toUpperCase",L.tags=[],L.closed=L.closedRoot=L.sawRoot=!1,L.tag=L.error=null,L.strict=!!w,L.noscript=!!(w||L.opt.noscript),L.state=y.BEGIN,L.strictEntities=L.opt.strictEntities,L.ENTITIES=L.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),L.attribList=[],L.opt.xmlns&&(L.ns=Object.create(v)),L.trackPosition=L.opt.position!==!1,L.trackPosition&&(L.position=L.line=L.column=0),O(L,"onready")}Object.create||(Object.create=function(w){function m(){}m.prototype=w;var L=new m;return L}),Object.keys||(Object.keys=function(w){var m=[];for(var L in w)w.hasOwnProperty(L)&&m.push(L);return m});function n(w){for(var m=Math.max(t.MAX_BUFFER_LENGTH,10),L=0,C=0,X=e.length;C<X;C++){var $=w[e[C]].length;if($>m)switch(e[C]){case"textNode":A(w);break;case"cdata":I(w,"oncdata",w.cdata),w.cdata="";break;case"script":I(w,"onscript",w.script),w.script="";break;default:R(w,"Max buffer length exceeded: "+e[C])}L=Math.max(L,$)}var V=t.MAX_BUFFER_LENGTH-L;w.bufferCheckPosition=V+w.position}function i(w){for(var m=0,L=e.length;m<L;m++)w[e[m]]=""}function s(w){A(w),w.cdata!==""&&(I(w,"oncdata",w.cdata),w.cdata=""),w.script!==""&&(I(w,"onscript",w.script),w.script="")}r.prototype={end:function(){k(this)},write:Ft,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){s(this)}};var o;try{o=require("stream").Stream}catch(w){o=function(){}}o||(o=function(){});var a=t.EVENTS.filter(function(w){return w!=="error"&&w!=="end"});function u(w,m){return new c(w,m)}function c(w,m){if(!(this instanceof c))return new c(w,m);o.apply(this),this._parser=new r(w,m),this.writable=!0,this.readable=!0;var L=this;this._parser.onend=function(){L.emit("end")},this._parser.onerror=function(C){L.emit("error",C),L._parser.error=null},this._decoder=null,a.forEach(function(C){Object.defineProperty(L,"on"+C,{get:function(){return L._parser["on"+C]},set:function(X){if(!X)return L.removeAllListeners(C),L._parser["on"+C]=X,X;L.on(C,X)},enumerable:!0,configurable:!1})})}c.prototype=Object.create(o.prototype,{constructor:{value:c}}),c.prototype.write=function(w){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(w)){if(!this._decoder){var m=require("string_decoder").StringDecoder;this._decoder=new m("utf8")}w=this._decoder.write(w)}return this._parser.write(w.toString()),this.emit("data",w),!0},c.prototype.end=function(w){return w&&w.length&&this.write(w),this._parser.end(),!0},c.prototype.on=function(w,m){var L=this;return!L._parser["on"+w]&&a.indexOf(w)!==-1&&(L._parser["on"+w]=function(){var C=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);C.splice(0,0,w),L.emit.apply(L,C)}),o.prototype.on.call(L,w,m)};var l="[CDATA[",f="DOCTYPE",p="http://www.w3.org/XML/1998/namespace",g="http://www.w3.org/2000/xmlns/",v={xml:p,xmlns:g},E=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,S=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,N=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,T=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function b(w){return w===" "||w===`
`||w==="\r"||w==="	"}function h(w){return w==='"'||w==="'"}function d(w){return w===">"||b(w)}function x(w,m){return w.test(m)}function D(w,m){return!x(w,m)}var y=0;t.STATE={BEGIN:y++,BEGIN_WHITESPACE:y++,TEXT:y++,TEXT_ENTITY:y++,OPEN_WAKA:y++,SGML_DECL:y++,SGML_DECL_QUOTED:y++,DOCTYPE:y++,DOCTYPE_QUOTED:y++,DOCTYPE_DTD:y++,DOCTYPE_DTD_QUOTED:y++,COMMENT_STARTING:y++,COMMENT:y++,COMMENT_ENDING:y++,COMMENT_ENDED:y++,CDATA:y++,CDATA_ENDING:y++,CDATA_ENDING_2:y++,PROC_INST:y++,PROC_INST_BODY:y++,PROC_INST_ENDING:y++,OPEN_TAG:y++,OPEN_TAG_SLASH:y++,ATTRIB:y++,ATTRIB_NAME:y++,ATTRIB_NAME_SAW_WHITE:y++,ATTRIB_VALUE:y++,ATTRIB_VALUE_QUOTED:y++,ATTRIB_VALUE_CLOSED:y++,ATTRIB_VALUE_UNQUOTED:y++,ATTRIB_VALUE_ENTITY_Q:y++,ATTRIB_VALUE_ENTITY_U:y++,CLOSE_TAG:y++,CLOSE_TAG_SAW_WHITE:y++,SCRIPT:y++,SCRIPT_ENDING:y++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(w){var m=t.ENTITIES[w],L=typeof m=="number"?String.fromCharCode(m):m;t.ENTITIES[w]=L});for(var P in t.STATE)t.STATE[t.STATE[P]]=P;y=t.STATE;function O(w,m,L){w[m]&&w[m](L)}function I(w,m,L){w.textNode&&A(w),O(w,m,L)}function A(w){w.textNode=M(w.opt,w.textNode),w.textNode&&O(w,"ontext",w.textNode),w.textNode=""}function M(w,m){return w.trim&&(m=m.trim()),w.normalize&&(m=m.replace(/\s+/g," ")),m}function R(w,m){return A(w),w.trackPosition&&(m+=`
Line: `+w.line+`
Column: `+w.column+`
Char: `+w.c),m=new Error(m),w.error=m,O(w,"onerror",m),w}function k(w){return w.sawRoot&&!w.closedRoot&&_(w,"Unclosed root tag"),w.state!==y.BEGIN&&w.state!==y.BEGIN_WHITESPACE&&w.state!==y.TEXT&&R(w,"Unexpected end"),A(w),w.c="",w.closed=!0,O(w,"onend"),r.call(w,w.strict,w.opt),w}function _(w,m){if(typeof w!="object"||!(w instanceof r))throw new Error("bad call to strictFail");w.strict&&R(w,m)}function z(w){w.strict||(w.tagName=w.tagName[w.looseCase]());var m=w.tags[w.tags.length-1]||w,L=w.tag={name:w.tagName,attributes:{}};w.opt.xmlns&&(L.ns=m.ns),w.attribList.length=0,I(w,"onopentagstart",L)}function q(w,m){var L=w.indexOf(":"),C=L<0?["",w]:w.split(":"),X=C[0],$=C[1];return m&&w==="xmlns"&&(X="xmlns",$=""),{prefix:X,local:$}}function pe(w){if(w.strict||(w.attribName=w.attribName[w.looseCase]()),w.attribList.indexOf(w.attribName)!==-1||w.tag.attributes.hasOwnProperty(w.attribName)){w.attribName=w.attribValue="";return}if(w.opt.xmlns){var m=q(w.attribName,!0),L=m.prefix,C=m.local;if(L==="xmlns")if(C==="xml"&&w.attribValue!==p)_(w,"xml: prefix must be bound to "+p+`
Actual: `+w.attribValue);else if(C==="xmlns"&&w.attribValue!==g)_(w,"xmlns: prefix must be bound to "+g+`
Actual: `+w.attribValue);else{var X=w.tag,$=w.tags[w.tags.length-1]||w;X.ns===$.ns&&(X.ns=Object.create($.ns)),X.ns[C]=w.attribValue}w.attribList.push([w.attribName,w.attribValue])}else w.tag.attributes[w.attribName]=w.attribValue,I(w,"onattribute",{name:w.attribName,value:w.attribValue});w.attribName=w.attribValue=""}function ne(w,m){if(w.opt.xmlns){var L=w.tag,C=q(w.tagName);L.prefix=C.prefix,L.local=C.local,L.uri=L.ns[C.prefix]||"",L.prefix&&!L.uri&&(_(w,"Unbound namespace prefix: "+JSON.stringify(w.tagName)),L.uri=C.prefix);var X=w.tags[w.tags.length-1]||w;L.ns&&X.ns!==L.ns&&Object.keys(L.ns).forEach(function(zi){I(w,"onopennamespace",{prefix:zi,uri:L.ns[zi]})});for(var $=0,V=w.attribList.length;$<V;$++){var G=w.attribList[$],te=G[0],Ke=G[1],Y=q(te,!0),Ce=Y.prefix,Cl=Y.local,Ui=Ce===""?"":L.ns[Ce]||"",En={name:te,value:Ke,prefix:Ce,local:Cl,uri:Ui};Ce&&Ce!=="xmlns"&&!Ui&&(_(w,"Unbound namespace prefix: "+JSON.stringify(Ce)),En.uri=Ce),w.tag.attributes[te]=En,I(w,"onattribute",En)}w.attribList.length=0}w.tag.isSelfClosing=!!m,w.sawRoot=!0,w.tags.push(w.tag),I(w,"onopentag",w.tag),m||(!w.noscript&&w.tagName.toLowerCase()==="script"?w.state=y.SCRIPT:w.state=y.TEXT,w.tag=null,w.tagName=""),w.attribName=w.attribValue="",w.attribList.length=0}function De(w){if(!w.tagName){_(w,"Weird empty close tag."),w.textNode+="</>",w.state=y.TEXT;return}if(w.script){if(w.tagName!=="script"){w.script+="</"+w.tagName+">",w.tagName="",w.state=y.SCRIPT;return}I(w,"onscript",w.script),w.script=""}var m=w.tags.length,L=w.tagName;w.strict||(L=L[w.looseCase]());for(var C=L;m--;){var X=w.tags[m];if(X.name!==C)_(w,"Unexpected close tag");else break}if(m<0){_(w,"Unmatched closing tag: "+w.tagName),w.textNode+="</"+w.tagName+">",w.state=y.TEXT;return}w.tagName=L;for(var $=w.tags.length;$-- >m;){var V=w.tag=w.tags.pop();w.tagName=w.tag.name,I(w,"onclosetag",w.tagName);var G={};for(var te in V.ns)G[te]=V.ns[te];var Ke=w.tags[w.tags.length-1]||w;w.opt.xmlns&&V.ns!==Ke.ns&&Object.keys(V.ns).forEach(function(Y){var Ce=V.ns[Y];I(w,"onclosenamespace",{prefix:Y,uri:Ce})})}m===0&&(w.closedRoot=!0),w.tagName=w.attribValue=w.attribName="",w.attribList.length=0,w.state=y.TEXT}function Lt(w){var m=w.entity,L=m.toLowerCase(),C,X="";return w.ENTITIES[m]?w.ENTITIES[m]:w.ENTITIES[L]?w.ENTITIES[L]:(m=L,m.charAt(0)==="#"&&(m.charAt(1)==="x"?(m=m.slice(2),C=parseInt(m,16),X=C.toString(16)):(m=m.slice(1),C=parseInt(m,10),X=C.toString(10))),m=m.replace(/^0+/,""),isNaN(C)||X.toLowerCase()!==m?(_(w,"Invalid character entity"),"&"+w.entity+";"):String.fromCodePoint(C))}function At(w,m){m==="<"?(w.state=y.OPEN_WAKA,w.startTagPosition=w.position):b(m)||(_(w,"Non-whitespace before first tag."),w.textNode=m,w.state=y.TEXT)}function Me(w,m){var L="";return m<w.length&&(L=w.charAt(m)),L}function Ft(w){var m=this;if(this.error)throw this.error;if(m.closed)return R(m,"Cannot write after close. Assign an onready handler.");if(w===null)return k(m);typeof w=="object"&&(w=w.toString());for(var L=0,C="";C=Me(w,L++),m.c=C,!!C;)switch(m.trackPosition&&(m.position++,C===`
`?(m.line++,m.column=0):m.column++),m.state){case y.BEGIN:if(m.state=y.BEGIN_WHITESPACE,C==="\uFEFF")continue;At(m,C);continue;case y.BEGIN_WHITESPACE:At(m,C);continue;case y.TEXT:if(m.sawRoot&&!m.closedRoot){for(var X=L-1;C&&C!=="<"&&C!=="&";)C=Me(w,L++),C&&m.trackPosition&&(m.position++,C===`
`?(m.line++,m.column=0):m.column++);m.textNode+=w.substring(X,L-1)}C==="<"&&!(m.sawRoot&&m.closedRoot&&!m.strict)?(m.state=y.OPEN_WAKA,m.startTagPosition=m.position):(!b(C)&&(!m.sawRoot||m.closedRoot)&&_(m,"Text data outside of root node."),C==="&"?m.state=y.TEXT_ENTITY:m.textNode+=C);continue;case y.SCRIPT:C==="<"?m.state=y.SCRIPT_ENDING:m.script+=C;continue;case y.SCRIPT_ENDING:C==="/"?m.state=y.CLOSE_TAG:(m.script+="<"+C,m.state=y.SCRIPT);continue;case y.OPEN_WAKA:if(C==="!")m.state=y.SGML_DECL,m.sgmlDecl="";else if(!b(C))if(x(E,C))m.state=y.OPEN_TAG,m.tagName=C;else if(C==="/")m.state=y.CLOSE_TAG,m.tagName="";else if(C==="?")m.state=y.PROC_INST,m.procInstName=m.procInstBody="";else{if(_(m,"Unencoded <"),m.startTagPosition+1<m.position){var $=m.position-m.startTagPosition;C=new Array($).join(" ")+C}m.textNode+="<"+C,m.state=y.TEXT}continue;case y.SGML_DECL:(m.sgmlDecl+C).toUpperCase()===l?(I(m,"onopencdata"),m.state=y.CDATA,m.sgmlDecl="",m.cdata=""):m.sgmlDecl+C==="--"?(m.state=y.COMMENT,m.comment="",m.sgmlDecl=""):(m.sgmlDecl+C).toUpperCase()===f?(m.state=y.DOCTYPE,(m.doctype||m.sawRoot)&&_(m,"Inappropriately located doctype declaration"),m.doctype="",m.sgmlDecl=""):C===">"?(I(m,"onsgmldeclaration",m.sgmlDecl),m.sgmlDecl="",m.state=y.TEXT):(h(C)&&(m.state=y.SGML_DECL_QUOTED),m.sgmlDecl+=C);continue;case y.SGML_DECL_QUOTED:C===m.q&&(m.state=y.SGML_DECL,m.q=""),m.sgmlDecl+=C;continue;case y.DOCTYPE:C===">"?(m.state=y.TEXT,I(m,"ondoctype",m.doctype),m.doctype=!0):(m.doctype+=C,C==="["?m.state=y.DOCTYPE_DTD:h(C)&&(m.state=y.DOCTYPE_QUOTED,m.q=C));continue;case y.DOCTYPE_QUOTED:m.doctype+=C,C===m.q&&(m.q="",m.state=y.DOCTYPE);continue;case y.DOCTYPE_DTD:m.doctype+=C,C==="]"?m.state=y.DOCTYPE:h(C)&&(m.state=y.DOCTYPE_DTD_QUOTED,m.q=C);continue;case y.DOCTYPE_DTD_QUOTED:m.doctype+=C,C===m.q&&(m.state=y.DOCTYPE_DTD,m.q="");continue;case y.COMMENT:C==="-"?m.state=y.COMMENT_ENDING:m.comment+=C;continue;case y.COMMENT_ENDING:C==="-"?(m.state=y.COMMENT_ENDED,m.comment=M(m.opt,m.comment),m.comment&&I(m,"oncomment",m.comment),m.comment=""):(m.comment+="-"+C,m.state=y.COMMENT);continue;case y.COMMENT_ENDED:C!==">"?(_(m,"Malformed comment"),m.comment+="--"+C,m.state=y.COMMENT):m.state=y.TEXT;continue;case y.CDATA:C==="]"?m.state=y.CDATA_ENDING:m.cdata+=C;continue;case y.CDATA_ENDING:C==="]"?m.state=y.CDATA_ENDING_2:(m.cdata+="]"+C,m.state=y.CDATA);continue;case y.CDATA_ENDING_2:C===">"?(m.cdata&&I(m,"oncdata",m.cdata),I(m,"onclosecdata"),m.cdata="",m.state=y.TEXT):C==="]"?m.cdata+="]":(m.cdata+="]]"+C,m.state=y.CDATA);continue;case y.PROC_INST:C==="?"?m.state=y.PROC_INST_ENDING:b(C)?m.state=y.PROC_INST_BODY:m.procInstName+=C;continue;case y.PROC_INST_BODY:if(!m.procInstBody&&b(C))continue;C==="?"?m.state=y.PROC_INST_ENDING:m.procInstBody+=C;continue;case y.PROC_INST_ENDING:C===">"?(I(m,"onprocessinginstruction",{name:m.procInstName,body:m.procInstBody}),m.procInstName=m.procInstBody="",m.state=y.TEXT):(m.procInstBody+="?"+C,m.state=y.PROC_INST_BODY);continue;case y.OPEN_TAG:x(S,C)?m.tagName+=C:(z(m),C===">"?ne(m):C==="/"?m.state=y.OPEN_TAG_SLASH:(b(C)||_(m,"Invalid character in tag name"),m.state=y.ATTRIB));continue;case y.OPEN_TAG_SLASH:C===">"?(ne(m,!0),De(m)):(_(m,"Forward-slash in opening tag not followed by >"),m.state=y.ATTRIB);continue;case y.ATTRIB:if(b(C))continue;C===">"?ne(m):C==="/"?m.state=y.OPEN_TAG_SLASH:x(E,C)?(m.attribName=C,m.attribValue="",m.state=y.ATTRIB_NAME):_(m,"Invalid attribute name");continue;case y.ATTRIB_NAME:C==="="?m.state=y.ATTRIB_VALUE:C===">"?(_(m,"Attribute without value"),m.attribValue=m.attribName,pe(m),ne(m)):b(C)?m.state=y.ATTRIB_NAME_SAW_WHITE:x(S,C)?m.attribName+=C:_(m,"Invalid attribute name");continue;case y.ATTRIB_NAME_SAW_WHITE:if(C==="=")m.state=y.ATTRIB_VALUE;else{if(b(C))continue;_(m,"Attribute without value"),m.tag.attributes[m.attribName]="",m.attribValue="",I(m,"onattribute",{name:m.attribName,value:""}),m.attribName="",C===">"?ne(m):x(E,C)?(m.attribName=C,m.state=y.ATTRIB_NAME):(_(m,"Invalid attribute name"),m.state=y.ATTRIB)}continue;case y.ATTRIB_VALUE:if(b(C))continue;h(C)?(m.q=C,m.state=y.ATTRIB_VALUE_QUOTED):(_(m,"Unquoted attribute value"),m.state=y.ATTRIB_VALUE_UNQUOTED,m.attribValue=C);continue;case y.ATTRIB_VALUE_QUOTED:if(C!==m.q){C==="&"?m.state=y.ATTRIB_VALUE_ENTITY_Q:m.attribValue+=C;continue}pe(m),m.q="",m.state=y.ATTRIB_VALUE_CLOSED;continue;case y.ATTRIB_VALUE_CLOSED:b(C)?m.state=y.ATTRIB:C===">"?ne(m):C==="/"?m.state=y.OPEN_TAG_SLASH:x(E,C)?(_(m,"No whitespace between attributes"),m.attribName=C,m.attribValue="",m.state=y.ATTRIB_NAME):_(m,"Invalid attribute name");continue;case y.ATTRIB_VALUE_UNQUOTED:if(!d(C)){C==="&"?m.state=y.ATTRIB_VALUE_ENTITY_U:m.attribValue+=C;continue}pe(m),C===">"?ne(m):m.state=y.ATTRIB;continue;case y.CLOSE_TAG:if(m.tagName)C===">"?De(m):x(S,C)?m.tagName+=C:m.script?(m.script+="</"+m.tagName,m.tagName="",m.state=y.SCRIPT):(b(C)||_(m,"Invalid tagname in closing tag"),m.state=y.CLOSE_TAG_SAW_WHITE);else{if(b(C))continue;D(E,C)?m.script?(m.script+="</"+C,m.state=y.SCRIPT):_(m,"Invalid tagname in closing tag."):m.tagName=C}continue;case y.CLOSE_TAG_SAW_WHITE:if(b(C))continue;C===">"?De(m):_(m,"Invalid characters in closing tag");continue;case y.TEXT_ENTITY:case y.ATTRIB_VALUE_ENTITY_Q:case y.ATTRIB_VALUE_ENTITY_U:var V,G;switch(m.state){case y.TEXT_ENTITY:V=y.TEXT,G="textNode";break;case y.ATTRIB_VALUE_ENTITY_Q:V=y.ATTRIB_VALUE_QUOTED,G="attribValue";break;case y.ATTRIB_VALUE_ENTITY_U:V=y.ATTRIB_VALUE_UNQUOTED,G="attribValue";break}if(C===";")if(m.opt.unparsedEntities){var te=Lt(m);m.entity="",m.state=V,m.write(te)}else m[G]+=Lt(m),m.entity="",m.state=V;else x(m.entity.length?T:N,C)?m.entity+=C:(_(m,"Invalid character in entity name"),m[G]+="&"+m.entity+C,m.entity="",m.state=V);continue;default:throw new Error(m,"Unknown state: "+m.state)}return m.position>=m.bufferCheckPosition&&n(m),m}String.fromCodePoint||function(){var w=String.fromCharCode,m=Math.floor,L=function(){var C=16384,X=[],$,V,G=-1,te=arguments.length;if(!te)return"";for(var Ke="";++G<te;){var Y=Number(arguments[G]);if(!isFinite(Y)||Y<0||Y>1114111||m(Y)!==Y)throw RangeError("Invalid code point: "+Y);Y<=65535?X.push(Y):(Y-=65536,$=(Y>>10)+55296,V=Y%1024+56320,X.push($,V)),(G+1===te||X.length>C)&&(Ke+=w.apply(null,X),X.length=0)}return Ke};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:L,configurable:!0,writable:!0}):String.fromCodePoint=L}()})(typeof Yt=="undefined"?Yt.sax={}:Yt)});var fo=F(An=>{(function(){"use strict";An.stripBOM=function(t){return t[0]==="\uFEFF"?t.substring(1):t}}).call(An)});var Fn=F(ze=>{(function(){"use strict";var t;t=new RegExp(/(?!xmlns)^.*:/),ze.normalize=function(e){return e.toLowerCase()},ze.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},ze.stripPrefix=function(e){return e.replace(t,"")},ze.parseNumbers=function(e){return isNaN(e)||(e=e%1==0?parseInt(e,10):parseFloat(e)),e},ze.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e=e.toLowerCase()==="true"),e}}).call(ze)});var ho=F(Pe=>{(function(){"use strict";var t,e,r,n,i,s,o,a,u,c=function(p,g){return function(){return p.apply(g,arguments)}},l=function(p,g){for(var v in g)f.call(g,v)&&(p[v]=g[v]);function E(){this.constructor=p}return E.prototype=g.prototype,p.prototype=new E,p.__super__=g.prototype,p},f={}.hasOwnProperty;a=lo(),n=require("events"),t=fo(),o=Fn(),u=require("timers").setImmediate,e=_t().defaults,i=function(p){return typeof p=="object"&&p!=null&&Object.keys(p).length===0},s=function(p,g,v){var E,S,N;for(E=0,S=p.length;E<S;E++)N=p[E],g=N(g,v);return g},r=function(p,g,v){var E;return E=Object.create(null),E.value=v,E.writable=!0,E.enumerable=!0,E.configurable=!0,Object.defineProperty(p,g,E)},Pe.Parser=function(p){l(g,p);function g(v){this.parseStringPromise=c(this.parseStringPromise,this),this.parseString=c(this.parseString,this),this.reset=c(this.reset,this),this.assignOrPush=c(this.assignOrPush,this),this.processAsync=c(this.processAsync,this);var E,S,N;if(!(this instanceof Pe.Parser))return new Pe.Parser(v);this.options={},S=e["0.2"];for(E in S)!f.call(S,E)||(N=S[E],this.options[E]=N);for(E in v)!f.call(v,E)||(N=v[E],this.options[E]=N);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(o.normalize)),this.reset()}return g.prototype.processAsync=function(){var v,E;try{return this.remaining.length<=this.options.chunkSize?(v=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(v),this.saxParser.close()):(v=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(v),u(this.processAsync))}catch(S){if(E=S,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(E)}},g.prototype.assignOrPush=function(v,E,S){return E in v?(v[E]instanceof Array||r(v,E,[v[E]]),v[E].push(S)):this.options.explicitArray?r(v,E,[S]):r(v,E,S)},g.prototype.reset=function(){var v,E,S,N;return this.removeAllListeners(),this.saxParser=a.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(T){return function(b){if(T.saxParser.resume(),!T.saxParser.errThrown)return T.saxParser.errThrown=!0,T.emit("error",b)}}(this),this.saxParser.onend=function(T){return function(){if(!T.saxParser.ended)return T.saxParser.ended=!0,T.emit("end",T.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,N=[],v=this.options.attrkey,E=this.options.charkey,this.saxParser.onopentag=function(T){return function(b){var h,d,x,D,y;if(x={},x[E]="",!T.options.ignoreAttrs){y=b.attributes;for(h in y)!f.call(y,h)||(!(v in x)&&!T.options.mergeAttrs&&(x[v]={}),d=T.options.attrValueProcessors?s(T.options.attrValueProcessors,b.attributes[h],h):b.attributes[h],D=T.options.attrNameProcessors?s(T.options.attrNameProcessors,h):h,T.options.mergeAttrs?T.assignOrPush(x,D,d):r(x[v],D,d))}return x["#name"]=T.options.tagNameProcessors?s(T.options.tagNameProcessors,b.name):b.name,T.options.xmlns&&(x[T.options.xmlnskey]={uri:b.uri,local:b.local}),N.push(x)}}(this),this.saxParser.onclosetag=function(T){return function(){var b,h,d,x,D,y,P,O,I,A;if(y=N.pop(),D=y["#name"],(!T.options.explicitChildren||!T.options.preserveChildrenOrder)&&delete y["#name"],y.cdata===!0&&(b=y.cdata,delete y.cdata),I=N[N.length-1],y[E].match(/^\s*$/)&&!b?(h=y[E],delete y[E]):(T.options.trim&&(y[E]=y[E].trim()),T.options.normalize&&(y[E]=y[E].replace(/\s{2,}/g," ").trim()),y[E]=T.options.valueProcessors?s(T.options.valueProcessors,y[E],D):y[E],Object.keys(y).length===1&&E in y&&!T.EXPLICIT_CHARKEY&&(y=y[E])),i(y)&&(typeof T.options.emptyTag=="function"?y=T.options.emptyTag():y=T.options.emptyTag!==""?T.options.emptyTag:h),T.options.validator!=null&&(A="/"+function(){var M,R,k;for(k=[],M=0,R=N.length;M<R;M++)x=N[M],k.push(x["#name"]);return k}().concat(D).join("/"),function(){var M;try{return y=T.options.validator(A,I&&I[D],y)}catch(R){return M=R,T.emit("error",M)}}()),T.options.explicitChildren&&!T.options.mergeAttrs&&typeof y=="object"){if(!T.options.preserveChildrenOrder)x={},T.options.attrkey in y&&(x[T.options.attrkey]=y[T.options.attrkey],delete y[T.options.attrkey]),!T.options.charsAsChildren&&T.options.charkey in y&&(x[T.options.charkey]=y[T.options.charkey],delete y[T.options.charkey]),Object.getOwnPropertyNames(y).length>0&&(x[T.options.childkey]=y),y=x;else if(I){I[T.options.childkey]=I[T.options.childkey]||[],P={};for(d in y)!f.call(y,d)||r(P,d,y[d]);I[T.options.childkey].push(P),delete y["#name"],Object.keys(y).length===1&&E in y&&!T.EXPLICIT_CHARKEY&&(y=y[E])}}return N.length>0?T.assignOrPush(I,D,y):(T.options.explicitRoot&&(O=y,y={},r(y,D,O)),T.resultObject=y,T.saxParser.ended=!0,T.emit("end",T.resultObject))}}(this),S=function(T){return function(b){var h,d;if(d=N[N.length-1],d)return d[E]+=b,T.options.explicitChildren&&T.options.preserveChildrenOrder&&T.options.charsAsChildren&&(T.options.includeWhiteChars||b.replace(/\\n/g,"").trim()!=="")&&(d[T.options.childkey]=d[T.options.childkey]||[],h={"#name":"__text__"},h[E]=b,T.options.normalize&&(h[E]=h[E].replace(/\s{2,}/g," ").trim()),d[T.options.childkey].push(h)),d}}(this),this.saxParser.ontext=S,this.saxParser.oncdata=function(T){return function(b){var h;if(h=S(b),h)return h.cdata=!0}}(this)},g.prototype.parseString=function(v,E){var S;E!=null&&typeof E=="function"&&(this.on("end",function(N){return this.reset(),E(null,N)}),this.on("error",function(N){return this.reset(),E(N)}));try{return v=v.toString(),v.trim()===""?(this.emit("end",null),!0):(v=t.stripBOM(v),this.options.async?(this.remaining=v,u(this.processAsync),this.saxParser):this.saxParser.write(v).close())}catch(N){if(S=N,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw S}else return this.emit("error",S),this.saxParser.errThrown=!0}},g.prototype.parseStringPromise=function(v){return new Promise(function(E){return function(S,N){return E.parseString(v,function(T,b){return T?N(T):S(b)})}}(this))},g}(n),Pe.parseString=function(p,g,v){var E,S,N;return v!=null?(typeof v=="function"&&(E=v),typeof g=="object"&&(S=g)):(typeof g=="function"&&(E=g),S={}),N=new Pe.Parser(S),N.parseString(p,E)},Pe.parseStringPromise=function(p,g){var v,E;return typeof g=="object"&&(v=g),E=new Pe.Parser(v),E.parseStringPromise(p)}}).call(Pe)});var po=F(Ie=>{(function(){"use strict";var t,e,r,n,i=function(o,a){for(var u in a)s.call(a,u)&&(o[u]=a[u]);function c(){this.constructor=o}return c.prototype=a.prototype,o.prototype=new c,o.__super__=a.prototype,o},s={}.hasOwnProperty;e=_t(),t=co(),r=ho(),n=Fn(),Ie.defaults=e.defaults,Ie.processors=n,Ie.ValidationError=function(o){i(a,o);function a(u){this.message=u}return a}(Error),Ie.Builder=t.Builder,Ie.Parser=r.Parser,Ie.parseString=r.parseString,Ie.parseStringPromise=r.parseStringPromise}).call(Ie)});var mo=F((Nd,go)=>{var Ge=1e3,Ye=Ge*60,Je=Ye*60,$e=Je*24,_l=$e*7,jl=$e*365.25;go.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return Rl(t);if(r==="number"&&isFinite(t))return e.long?ql(t):kl(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Rl(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*jl;case"weeks":case"week":case"w":return r*_l;case"days":case"day":case"d":return r*$e;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Je;case"minutes":case"minute":case"mins":case"min":case"m":return r*Ye;case"seconds":case"second":case"secs":case"sec":case"s":return r*Ge;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function kl(t){var e=Math.abs(t);return e>=$e?Math.round(t/$e)+"d":e>=Je?Math.round(t/Je)+"h":e>=Ye?Math.round(t/Ye)+"m":e>=Ge?Math.round(t/Ge)+"s":t+"ms"}function ql(t){var e=Math.abs(t);return e>=$e?Jt(t,e,$e,"day"):e>=Je?Jt(t,e,Je,"hour"):e>=Ye?Jt(t,e,Ye,"minute"):e>=Ge?Jt(t,e,Ge,"second"):t+" ms"}function Jt(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var vo=F((Sd,yo)=>{function Xl(t){r.debug=r,r.default=r,r.coerce=u,r.disable=s,r.enable=i,r.enabled=o,r.humanize=mo(),r.destroy=c,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let f=0;for(let p=0;p<l.length;p++)f=(f<<5)-f+l.charCodeAt(p),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(l){let f,p=null,g,v;function E(...S){if(!E.enabled)return;let N=E,T=Number(new Date),b=T-(f||T);N.diff=b,N.prev=f,N.curr=T,f=T,S[0]=r.coerce(S[0]),typeof S[0]!="string"&&S.unshift("%O");let h=0;S[0]=S[0].replace(/%([a-zA-Z%])/g,(x,D)=>{if(x==="%%")return"%";h++;let y=r.formatters[D];if(typeof y=="function"){let P=S[h];x=y.call(N,P),S.splice(h,1),h--}return x}),r.formatArgs.call(N,S),(N.log||r.log).apply(N,S)}return E.namespace=l,E.useColors=r.useColors(),E.color=r.selectColor(l),E.extend=n,E.destroy=r.destroy,Object.defineProperty(E,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(g!==r.namespaces&&(g=r.namespaces,v=r.enabled(l)),v),set:S=>{p=S}}),typeof r.init=="function"&&r.init(E),E}function n(l,f){let p=r(this.namespace+(typeof f=="undefined"?":":f)+l);return p.log=this.log,p}function i(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let f,p=(typeof l=="string"?l:"").split(/[\s,]+/),g=p.length;for(f=0;f<g;f++)!p[f]||(l=p[f].replace(/\*/g,".*?"),l[0]==="-"?r.skips.push(new RegExp("^"+l.slice(1)+"$")):r.names.push(new RegExp("^"+l+"$")))}function s(){let l=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),l}function o(l){if(l[l.length-1]==="*")return!0;let f,p;for(f=0,p=r.skips.length;f<p;f++)if(r.skips[f].test(l))return!1;for(f=0,p=r.names.length;f<p;f++)if(r.names[f].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function u(l){return l instanceof Error?l.stack||l.message:l}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}yo.exports=Xl});var bo=F((se,Qt)=>{se.formatArgs=Ul;se.save=zl;se.load=$l;se.useColors=Bl;se.storage=Vl();se.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();se.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Bl(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Ul(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Qt.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}se.log=console.debug||console.log||(()=>{});function zl(t){try{t?se.storage.setItem("debug",t):se.storage.removeItem("debug")}catch(e){}}function $l(){let t;try{t=se.storage.getItem("debug")}catch(e){}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function Vl(){try{return localStorage}catch(t){}}Qt.exports=vo()(se);var{formatters:Wl}=Qt.exports;Wl.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Eo=F((Dd,xo)=>{xo.exports=wo;function wo(t,e){if(t&&e)return wo(t)(e);if(typeof t!="function")throw new TypeError("need wrapper function");return Object.keys(t).forEach(function(n){r[n]=t[n]}),r;function r(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];var s=t.apply(this,n),o=n[n.length-1];return typeof s=="function"&&s!==o&&Object.keys(o).forEach(function(a){s[a]=o[a]}),s}}});var _n=F((Cd,Mn)=>{var To=Eo();Mn.exports=To(Zt);Mn.exports.strict=To(Oo);Zt.proto=Zt(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Zt(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Oo(this)},configurable:!0})});function Zt(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function Oo(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},r=t.name||"Function wrapped with `once`";return e.onceError=r+" shouldn't be called more than once",e.called=!1,e}});var Do=F((Pd,So)=>{var Hl=_n(),Kl=function(){},Gl=function(t){return t.setHeader&&typeof t.abort=="function"},Yl=function(t){return t.stdio&&Array.isArray(t.stdio)&&t.stdio.length===3},No=function(t,e,r){if(typeof e=="function")return No(t,null,e);e||(e={}),r=Hl(r||Kl);var n=t._writableState,i=t._readableState,s=e.readable||e.readable!==!1&&t.readable,o=e.writable||e.writable!==!1&&t.writable,a=!1,u=function(){t.writable||c()},c=function(){o=!1,s||r.call(t)},l=function(){s=!1,o||r.call(t)},f=function(S){r.call(t,S?new Error("exited with error code: "+S):null)},p=function(S){r.call(t,S)},g=function(){process.nextTick(v)},v=function(){if(!a){if(s&&!(i&&i.ended&&!i.destroyed))return r.call(t,new Error("premature close"));if(o&&!(n&&n.ended&&!n.destroyed))return r.call(t,new Error("premature close"))}},E=function(){t.req.on("finish",c)};return Gl(t)?(t.on("complete",c),t.on("abort",g),t.req?E():t.on("request",E)):o&&!n&&(t.on("end",u),t.on("close",u)),Yl(t)&&t.on("exit",f),t.on("end",l),t.on("finish",c),e.error!==!1&&t.on("error",p),t.on("close",g),function(){a=!0,t.removeListener("complete",c),t.removeListener("abort",g),t.removeListener("request",E),t.req&&t.req.removeListener("finish",c),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",c),t.removeListener("exit",f),t.removeListener("end",l),t.removeListener("error",p),t.removeListener("close",g)}};So.exports=No});var Io=F((Id,Po)=>{var Jl=_n(),Ql=Do(),jn=require("fs"),pt=function(){},Zl=/^v?\.0/.test(process.version),er=function(t){return typeof t=="function"},ef=function(t){return!Zl||!jn?!1:(t instanceof(jn.ReadStream||pt)||t instanceof(jn.WriteStream||pt))&&er(t.close)},tf=function(t){return t.setHeader&&er(t.abort)},rf=function(t,e,r,n){n=Jl(n);var i=!1;t.on("close",function(){i=!0}),Ql(t,{readable:e,writable:r},function(o){if(o)return n(o);i=!0,n()});var s=!1;return function(o){if(!i&&!s){if(s=!0,ef(t))return t.close(pt);if(tf(t))return t.abort();if(er(t.destroy))return t.destroy();n(o||new Error("stream was destroyed"))}}},Co=function(t){t()},nf=function(t,e){return t.pipe(e)},sf=function(){var t=Array.prototype.slice.call(arguments),e=er(t[t.length-1]||pt)&&t.pop()||pt;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var r,n=t.map(function(i,s){var o=s<t.length-1,a=s>0;return rf(i,o,a,function(u){r||(r=u),u&&n.forEach(Co),!o&&(n.forEach(Co),e(r))})});return t.reduce(nf)};Po.exports=sf});var Ao=F((Ld,Lo)=>{"use strict";var{PassThrough:of}=require("stream");Lo.exports=t=>{t={...t};let{array:e}=t,{encoding:r}=t,n=r==="buffer",i=!1;e?i=!(r||n):r=r||"utf8",n&&(r=null);let s=new of({objectMode:i});r&&s.setEncoding(r);let o=0,a=[];return s.on("data",u=>{a.push(u),i?o=a.length:o+=u.length}),s.getBufferedValue=()=>e?a:n?Buffer.concat(a,o):a.join(""),s.getBufferedLength=()=>o,s}});var Fo=F((Ad,Qe)=>{"use strict";var{constants:af}=require("buffer"),uf=Io(),cf=Ao(),Rn=class extends Error{constructor(){super("maxBuffer exceeded");this.name="MaxBufferError"}};async function tr(t,e){if(!t)return Promise.reject(new Error("Expected a stream"));e={maxBuffer:1/0,...e};let{maxBuffer:r}=e,n;return await new Promise((i,s)=>{let o=a=>{a&&n.getBufferedLength()<=af.MAX_LENGTH&&(a.bufferedData=n.getBufferedValue()),s(a)};n=uf(t,cf(e),a=>{if(a){o(a);return}i()}),n.on("data",()=>{n.getBufferedLength()>r&&o(new Rn)})}),n.getBufferedValue()}Qe.exports=tr;Qe.exports.default=tr;Qe.exports.buffer=(t,e)=>tr(t,{...e,encoding:"buffer"});Qe.exports.array=(t,e)=>tr(t,{...e,array:!0});Qe.exports.MaxBufferError=Rn});var Ro=F((Fd,jo)=>{jo.exports=rr;function rr(){this.pending=0,this.max=1/0,this.listeners=[],this.waiting=[],this.error=null}rr.prototype.go=function(t){this.pending<this.max?_o(this,t):this.waiting.push(t)};rr.prototype.wait=function(t){this.pending===0?t(this.error):this.listeners.push(t)};rr.prototype.hold=function(){return Mo(this)};function Mo(t){t.pending+=1;var e=!1;return r;function r(i){if(e)throw new Error("callback called twice");if(e=!0,t.error=t.error||i,t.pending-=1,t.waiting.length>0&&t.pending<t.max)_o(t,t.waiting.shift());else if(t.pending===0){var s=t.listeners;t.listeners=[],s.forEach(n)}}function n(i){i(t.error)}}function _o(t,e){e(Mo(t))}});var qo=F(gt=>{var dt=require("fs"),nr=require("util"),kn=require("stream"),ko=kn.Readable,qn=kn.Writable,lf=kn.PassThrough,ff=Ro(),ir=require("events").EventEmitter;gt.createFromBuffer=hf;gt.createFromFd=pf;gt.BufferSlicer=Ae;gt.FdSlicer=Le;nr.inherits(Le,ir);function Le(t,e){e=e||{},ir.call(this),this.fd=t,this.pend=new ff,this.pend.max=1,this.refCount=0,this.autoClose=!!e.autoClose}Le.prototype.read=function(t,e,r,n,i){var s=this;s.pend.go(function(o){dt.read(s.fd,t,e,r,n,function(a,u,c){o(),i(a,u,c)})})};Le.prototype.write=function(t,e,r,n,i){var s=this;s.pend.go(function(o){dt.write(s.fd,t,e,r,n,function(a,u,c){o(),i(a,u,c)})})};Le.prototype.createReadStream=function(t){return new sr(this,t)};Le.prototype.createWriteStream=function(t){return new or(this,t)};Le.prototype.ref=function(){this.refCount+=1};Le.prototype.unref=function(){var t=this;if(t.refCount-=1,t.refCount>0)return;if(t.refCount<0)throw new Error("invalid unref");t.autoClose&&dt.close(t.fd,e);function e(r){r?t.emit("error",r):t.emit("close")}};nr.inherits(sr,ko);function sr(t,e){e=e||{},ko.call(this,e),this.context=t,this.context.ref(),this.start=e.start||0,this.endOffset=e.end,this.pos=this.start,this.destroyed=!1}sr.prototype._read=function(t){var e=this;if(!e.destroyed){var r=Math.min(e._readableState.highWaterMark,t);if(e.endOffset!=null&&(r=Math.min(r,e.endOffset-e.pos)),r<=0){e.destroyed=!0,e.push(null),e.context.unref();return}e.context.pend.go(function(n){if(e.destroyed)return n();var i=new Buffer(r);dt.read(e.context.fd,i,0,r,e.pos,function(s,o){s?e.destroy(s):o===0?(e.destroyed=!0,e.push(null),e.context.unref()):(e.pos+=o,e.push(i.slice(0,o))),n()})})}};sr.prototype.destroy=function(t){this.destroyed||(t=t||new Error("stream destroyed"),this.destroyed=!0,this.emit("error",t),this.context.unref())};nr.inherits(or,qn);function or(t,e){e=e||{},qn.call(this,e),this.context=t,this.context.ref(),this.start=e.start||0,this.endOffset=e.end==null?1/0:+e.end,this.bytesWritten=0,this.pos=this.start,this.destroyed=!1,this.on("finish",this.destroy.bind(this))}or.prototype._write=function(t,e,r){var n=this;if(!n.destroyed){if(n.pos+t.length>n.endOffset){var i=new Error("maximum file length exceeded");i.code="ETOOBIG",n.destroy(),r(i);return}n.context.pend.go(function(s){if(n.destroyed)return s();dt.write(n.context.fd,t,0,t.length,n.pos,function(o,a){o?(n.destroy(),s(),r(o)):(n.bytesWritten+=a,n.pos+=a,n.emit("progress"),s(),r())})})}};or.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.context.unref())};nr.inherits(Ae,ir);function Ae(t,e){ir.call(this),e=e||{},this.refCount=0,this.buffer=t,this.maxChunkSize=e.maxChunkSize||Number.MAX_SAFE_INTEGER}Ae.prototype.read=function(t,e,r,n,i){var s=n+r,o=s-this.buffer.length,a=o>0?o:r;this.buffer.copy(t,e,n,s),setImmediate(function(){i(null,a)})};Ae.prototype.write=function(t,e,r,n,i){t.copy(this.buffer,n,e,e+r),setImmediate(function(){i(null,r,t)})};Ae.prototype.createReadStream=function(t){t=t||{};var e=new lf(t);e.destroyed=!1,e.start=t.start||0,e.endOffset=t.end,e.pos=e.endOffset||this.buffer.length;for(var r=this.buffer.slice(e.start,e.pos),n=0;;){var i=n+this.maxChunkSize;if(i>=r.length){n<r.length&&e.write(r.slice(n,r.length));break}e.write(r.slice(n,i)),n=i}return e.end(),e.destroy=function(){e.destroyed=!0},e};Ae.prototype.createWriteStream=function(t){var e=this;t=t||{};var r=new qn(t);return r.start=t.start||0,r.endOffset=t.end==null?this.buffer.length:+t.end,r.bytesWritten=0,r.pos=r.start,r.destroyed=!1,r._write=function(n,i,s){if(!r.destroyed){var o=r.pos+n.length;if(o>r.endOffset){var a=new Error("maximum file length exceeded");a.code="ETOOBIG",r.destroyed=!0,s(a);return}n.copy(e.buffer,r.pos,0,n.length),r.bytesWritten+=n.length,r.pos=o,r.emit("progress"),s()}},r.destroy=function(){r.destroyed=!0},r};Ae.prototype.ref=function(){this.refCount+=1};Ae.prototype.unref=function(){if(this.refCount-=1,this.refCount<0)throw new Error("invalid unref")};function hf(t,e){return new Ae(t,e)}function pf(t,e){return new Le(t,e)}});var Uo=F((_d,Bo)=>{var Re=require("buffer").Buffer,Xn=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array!="undefined"&&(Xn=new Int32Array(Xn));function Xo(t){if(Re.isBuffer(t))return t;var e=typeof Re.alloc=="function"&&typeof Re.from=="function";if(typeof t=="number")return e?Re.alloc(t):new Re(t);if(typeof t=="string")return e?Re.from(t):new Re(t);throw new Error("input must be buffer, number, or string, received "+typeof t)}function df(t){var e=Xo(4);return e.writeInt32BE(t,0),e}function Bn(t,e){t=Xo(t),Re.isBuffer(e)&&(e=e.readUInt32BE(0));for(var r=~~e^-1,n=0;n<t.length;n++)r=Xn[(r^t[n])&255]^r>>>8;return r^-1}function Un(){return df(Bn.apply(null,arguments))}Un.signed=function(){return Bn.apply(null,arguments)};Un.unsigned=function(){return Bn.apply(null,arguments)>>>0};Bo.exports=Un});var Go=F(xe=>{var zn=require("fs"),gf=require("zlib"),zo=qo(),mf=Uo(),ar=require("util"),ur=require("events").EventEmitter,$o=require("stream").Transform,$n=require("stream").PassThrough,yf=require("stream").Writable;xe.open=vf;xe.fromFd=Vo;xe.fromBuffer=bf;xe.fromRandomAccessReader=Vn;xe.dosDateTimeToDate=Ho;xe.validateFileName=Ko;xe.ZipFile=ke;xe.Entry=mt;xe.RandomAccessReader=qe;function vf(t,e,r){typeof e=="function"&&(r=e,e=null),e==null&&(e={}),e.autoClose==null&&(e.autoClose=!0),e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1),r==null&&(r=fr),zn.open(t,"r",function(n,i){if(n)return r(n);Vo(i,e,function(s,o){s&&zn.close(i,fr),r(s,o)})})}function Vo(t,e,r){typeof e=="function"&&(r=e,e=null),e==null&&(e={}),e.autoClose==null&&(e.autoClose=!1),e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1),r==null&&(r=fr),zn.fstat(t,function(n,i){if(n)return r(n);var s=zo.createFromFd(t,{autoClose:!0});Vn(s,i.size,e,r)})}function bf(t,e,r){typeof e=="function"&&(r=e,e=null),e==null&&(e={}),e.autoClose=!1,e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1);var n=zo.createFromBuffer(t,{maxChunkSize:65536});Vn(n,t.length,e,r)}function Vn(t,e,r,n){typeof r=="function"&&(n=r,r=null),r==null&&(r={}),r.autoClose==null&&(r.autoClose=!0),r.lazyEntries==null&&(r.lazyEntries=!1),r.decodeStrings==null&&(r.decodeStrings=!0);var i=!!r.decodeStrings;if(r.validateEntrySizes==null&&(r.validateEntrySizes=!0),r.strictFileNames==null&&(r.strictFileNames=!1),n==null&&(n=fr),typeof e!="number")throw new Error("expected totalSize parameter to be a number");if(e>Number.MAX_SAFE_INTEGER)throw new Error("zip file too large. only file sizes up to 2^52 are supported due to JavaScript's Number type being an IEEE 754 double.");t.ref();var s=22,o=65535,a=Math.min(s+o,e),u=we(a),c=e-u.length;Ze(t,u,0,a,c,function(l){if(l)return n(l);for(var f=a-s;f>=0;f-=1)if(u.readUInt32LE(f)===101010256){var p=u.slice(f),g=p.readUInt16LE(4);if(g!==0)return n(new Error("multi-disk zip files are not supported: found disk number: "+g));var v=p.readUInt16LE(10),E=p.readUInt32LE(16),S=p.readUInt16LE(20),N=p.length-s;if(S!==N)return n(new Error("invalid comment length. expected: "+N+". found: "+S));var T=i?lr(p,22,p.length,!1):p.slice(22);if(!(v===65535||E===4294967295))return n(null,new ke(t,E,e,v,T,r.autoClose,r.lazyEntries,i,r.validateEntrySizes,r.strictFileNames));var b=we(20),h=c+f-b.length;Ze(t,b,0,b.length,h,function(d){if(d)return n(d);if(b.readUInt32LE(0)!==117853008)return n(new Error("invalid zip64 end of central directory locator signature"));var x=et(b,8),D=we(56);Ze(t,D,0,D.length,x,function(y){return y?n(y):D.readUInt32LE(0)!==101075792?n(new Error("invalid zip64 end of central directory record signature")):(v=et(D,32),E=et(D,48),n(null,new ke(t,E,e,v,T,r.autoClose,r.lazyEntries,i,r.validateEntrySizes,r.strictFileNames)))})});return}n(new Error("end of central directory record signature not found"))})}ar.inherits(ke,ur);function ke(t,e,r,n,i,s,o,a,u,c){var l=this;ur.call(l),l.reader=t,l.reader.on("error",function(f){Wo(l,f)}),l.reader.once("close",function(){l.emit("close")}),l.readEntryCursor=e,l.fileSize=r,l.entryCount=n,l.comment=i,l.entriesRead=0,l.autoClose=!!s,l.lazyEntries=!!o,l.decodeStrings=!!a,l.validateEntrySizes=!!u,l.strictFileNames=!!c,l.isOpen=!0,l.emittedError=!1,l.lazyEntries||l._readEntry()}ke.prototype.close=function(){!this.isOpen||(this.isOpen=!1,this.reader.unref())};function de(t,e){t.autoClose&&t.close(),Wo(t,e)}function Wo(t,e){t.emittedError||(t.emittedError=!0,t.emit("error",e))}ke.prototype.readEntry=function(){if(!this.lazyEntries)throw new Error("readEntry() called without lazyEntries:true");this._readEntry()};ke.prototype._readEntry=function(){var t=this;if(t.entryCount===t.entriesRead){setImmediate(function(){t.autoClose&&t.close(),!t.emittedError&&t.emit("end")});return}if(!t.emittedError){var e=we(46);Ze(t.reader,e,0,e.length,t.readEntryCursor,function(r){if(r)return de(t,r);if(!t.emittedError){var n=new mt,i=e.readUInt32LE(0);if(i!==33639248)return de(t,new Error("invalid central directory file header signature: 0x"+i.toString(16)));if(n.versionMadeBy=e.readUInt16LE(4),n.versionNeededToExtract=e.readUInt16LE(6),n.generalPurposeBitFlag=e.readUInt16LE(8),n.compressionMethod=e.readUInt16LE(10),n.lastModFileTime=e.readUInt16LE(12),n.lastModFileDate=e.readUInt16LE(14),n.crc32=e.readUInt32LE(16),n.compressedSize=e.readUInt32LE(20),n.uncompressedSize=e.readUInt32LE(24),n.fileNameLength=e.readUInt16LE(28),n.extraFieldLength=e.readUInt16LE(30),n.fileCommentLength=e.readUInt16LE(32),n.internalFileAttributes=e.readUInt16LE(36),n.externalFileAttributes=e.readUInt32LE(38),n.relativeOffsetOfLocalHeader=e.readUInt32LE(42),n.generalPurposeBitFlag&64)return de(t,new Error("strong encryption is not supported"));t.readEntryCursor+=46,e=we(n.fileNameLength+n.extraFieldLength+n.fileCommentLength),Ze(t.reader,e,0,e.length,t.readEntryCursor,function(s){if(s)return de(t,s);if(!t.emittedError){var o=(n.generalPurposeBitFlag&2048)!=0;n.fileName=t.decodeStrings?lr(e,0,n.fileNameLength,o):e.slice(0,n.fileNameLength);var a=n.fileNameLength+n.extraFieldLength,u=e.slice(n.fileNameLength,a);n.extraFields=[];for(var c=0;c<u.length-3;){var l=u.readUInt16LE(c+0),f=u.readUInt16LE(c+2),p=c+4,g=p+f;if(g>u.length)return de(t,new Error("extra field length exceeds extra field buffer size"));var v=we(f);u.copy(v,0,p,g),n.extraFields.push({id:l,data:v}),c=g}if(n.fileComment=t.decodeStrings?lr(e,a,a+n.fileCommentLength,o):e.slice(a,a+n.fileCommentLength),n.comment=n.fileComment,t.readEntryCursor+=e.length,t.entriesRead+=1,n.uncompressedSize===4294967295||n.compressedSize===4294967295||n.relativeOffsetOfLocalHeader===4294967295){for(var E=null,c=0;c<n.extraFields.length;c++){var S=n.extraFields[c];if(S.id===1){E=S.data;break}}if(E==null)return de(t,new Error("expected zip64 extended information extra field"));var N=0;if(n.uncompressedSize===4294967295){if(N+8>E.length)return de(t,new Error("zip64 extended information extra field does not include uncompressed size"));n.uncompressedSize=et(E,N),N+=8}if(n.compressedSize===4294967295){if(N+8>E.length)return de(t,new Error("zip64 extended information extra field does not include compressed size"));n.compressedSize=et(E,N),N+=8}if(n.relativeOffsetOfLocalHeader===4294967295){if(N+8>E.length)return de(t,new Error("zip64 extended information extra field does not include relative header offset"));n.relativeOffsetOfLocalHeader=et(E,N),N+=8}}if(t.decodeStrings)for(var c=0;c<n.extraFields.length;c++){var S=n.extraFields[c];if(S.id===28789){if(S.data.length<6||S.data.readUInt8(0)!==1)continue;var T=S.data.readUInt32LE(1);if(mf.unsigned(e.slice(0,n.fileNameLength))!==T)continue;n.fileName=lr(S.data,5,S.data.length,!0);break}}if(t.validateEntrySizes&&n.compressionMethod===0){var b=n.uncompressedSize;if(n.isEncrypted()&&(b+=12),n.compressedSize!==b){var h="compressed/uncompressed size mismatch for stored file: "+n.compressedSize+" != "+n.uncompressedSize;return de(t,new Error(h))}}if(t.decodeStrings){t.strictFileNames||(n.fileName=n.fileName.replace(/\\/g,"/"));var d=Ko(n.fileName,t.validateFileNameOptions);if(d!=null)return de(t,new Error(d))}t.emit("entry",n),t.lazyEntries||t._readEntry()}})}})}};ke.prototype.openReadStream=function(t,e,r){var n=this,i=0,s=t.compressedSize;if(r==null)r=e,e={};else{if(e.decrypt!=null){if(!t.isEncrypted())throw new Error("options.decrypt can only be specified for encrypted entries");if(e.decrypt!==!1)throw new Error("invalid options.decrypt value: "+e.decrypt);if(t.isCompressed()&&e.decompress!==!1)throw new Error("entry is encrypted and compressed, and options.decompress !== false")}if(e.decompress!=null){if(!t.isCompressed())throw new Error("options.decompress can only be specified for compressed entries");if(!(e.decompress===!1||e.decompress===!0))throw new Error("invalid options.decompress value: "+e.decompress)}if(e.start!=null||e.end!=null){if(t.isCompressed()&&e.decompress!==!1)throw new Error("start/end range not allowed for compressed entry without options.decompress === false");if(t.isEncrypted()&&e.decrypt!==!1)throw new Error("start/end range not allowed for encrypted entry without options.decrypt === false")}if(e.start!=null){if(i=e.start,i<0)throw new Error("options.start < 0");if(i>t.compressedSize)throw new Error("options.start > entry.compressedSize")}if(e.end!=null){if(s=e.end,s<0)throw new Error("options.end < 0");if(s>t.compressedSize)throw new Error("options.end > entry.compressedSize");if(s<i)throw new Error("options.end < options.start")}}if(!n.isOpen)return r(new Error("closed"));if(t.isEncrypted()&&e.decrypt!==!1)return r(new Error("entry is encrypted, and options.decrypt !== false"));n.reader.ref();var o=we(30);Ze(n.reader,o,0,o.length,t.relativeOffsetOfLocalHeader,function(a){try{if(a)return r(a);var u=o.readUInt32LE(0);if(u!==67324752)return r(new Error("invalid local file header signature: 0x"+u.toString(16)));var c=o.readUInt16LE(26),l=o.readUInt16LE(28),f=t.relativeOffsetOfLocalHeader+o.length+c+l,p;if(t.compressionMethod===0)p=!1;else if(t.compressionMethod===8)p=e.decompress!=null?e.decompress:!0;else return r(new Error("unsupported compression method: "+t.compressionMethod));var g=f,v=g+t.compressedSize;if(t.compressedSize!==0&&v>n.fileSize)return r(new Error("file data overflows file bounds: "+g+" + "+t.compressedSize+" > "+n.fileSize));var E=n.reader.createReadStream({start:g+i,end:g+s}),S=E;if(p){var N=!1,T=gf.createInflateRaw();E.on("error",function(b){setImmediate(function(){N||T.emit("error",b)})}),E.pipe(T),n.validateEntrySizes?(S=new yt(t.uncompressedSize),T.on("error",function(b){setImmediate(function(){N||S.emit("error",b)})}),T.pipe(S)):S=T,S.destroy=function(){N=!0,T!==S&&T.unpipe(S),E.unpipe(T),E.destroy()}}r(null,S)}finally{n.reader.unref()}})};function mt(){}mt.prototype.getLastModDate=function(){return Ho(this.lastModFileDate,this.lastModFileTime)};mt.prototype.isEncrypted=function(){return(this.generalPurposeBitFlag&1)!=0};mt.prototype.isCompressed=function(){return this.compressionMethod===8};function Ho(t,e){var r=t&31,n=(t>>5&15)-1,i=(t>>9&127)+1980,s=0,o=(e&31)*2,a=e>>5&63,u=e>>11&31;return new Date(i,n,r,u,a,o,s)}function Ko(t){return t.indexOf("\\")!==-1?"invalid characters in fileName: "+t:/^[a-zA-Z]:/.test(t)||/^\//.test(t)?"absolute path: "+t:t.split("/").indexOf("..")!==-1?"invalid relative path: "+t:null}function Ze(t,e,r,n,i,s){if(n===0)return setImmediate(function(){s(null,we(0))});t.read(e,r,n,i,function(o,a){if(o)return s(o);if(a<n)return s(new Error("unexpected EOF"));s()})}ar.inherits(yt,$o);function yt(t){$o.call(this),this.actualByteCount=0,this.expectedByteCount=t}yt.prototype._transform=function(t,e,r){if(this.actualByteCount+=t.length,this.actualByteCount>this.expectedByteCount){var n="too many bytes in the stream. expected "+this.expectedByteCount+". got at least "+this.actualByteCount;return r(new Error(n))}r(null,t)};yt.prototype._flush=function(t){if(this.actualByteCount<this.expectedByteCount){var e="not enough bytes in the stream. expected "+this.expectedByteCount+". got only "+this.actualByteCount;return t(new Error(e))}t()};ar.inherits(qe,ur);function qe(){ur.call(this),this.refCount=0}qe.prototype.ref=function(){this.refCount+=1};qe.prototype.unref=function(){var t=this;if(t.refCount-=1,t.refCount>0)return;if(t.refCount<0)throw new Error("invalid unref");t.close(e);function e(r){if(r)return t.emit("error",r);t.emit("close")}};qe.prototype.createReadStream=function(t){var e=t.start,r=t.end;if(e===r){var n=new $n;return setImmediate(function(){n.end()}),n}var i=this._readStreamForRange(e,r),s=!1,o=new cr(this);i.on("error",function(u){setImmediate(function(){s||o.emit("error",u)})}),o.destroy=function(){i.unpipe(o),o.unref(),i.destroy()};var a=new yt(r-e);return o.on("error",function(u){setImmediate(function(){s||a.emit("error",u)})}),a.destroy=function(){s=!0,o.unpipe(a),o.destroy()},i.pipe(o).pipe(a)};qe.prototype._readStreamForRange=function(t,e){throw new Error("not implemented")};qe.prototype.read=function(t,e,r,n,i){var s=this.createReadStream({start:n,end:n+r}),o=new yf,a=0;o._write=function(u,c,l){u.copy(t,e+a,0,u.length),a+=u.length,l()},o.on("finish",i),s.on("error",function(u){i(u)}),s.pipe(o)};qe.prototype.close=function(t){setImmediate(t)};ar.inherits(cr,$n);function cr(t){$n.call(this),this.context=t,this.context.ref(),this.unreffedYet=!1}cr.prototype._flush=function(t){this.unref(),t()};cr.prototype.unref=function(t){this.unreffedYet||(this.unreffedYet=!0,this.context.unref())};var wf="\0\u263A\u263B\u2665\u2666\u2663\u2660\u2022\u25D8\u25CB\u25D9\u2642\u2640\u266A\u266B\u263C\u25BA\u25C4\u2195\u203C\xB6\xA7\u25AC\u21A8\u2191\u2193\u2192\u2190\u221F\u2194\u25B2\u25BC !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u2302\xC7\xFC\xE9\xE2\xE4\xE0\xE5\xE7\xEA\xEB\xE8\xEF\xEE\xEC\xC4\xC5\xC9\xE6\xC6\xF4\xF6\xF2\xFB\xF9\xFF\xD6\xDC\xA2\xA3\xA5\u20A7\u0192\xE1\xED\xF3\xFA\xF1\xD1\xAA\xBA\xBF\u2310\xAC\xBD\xBC\xA1\xAB\xBB\u2591\u2592\u2593\u2502\u2524\u2561\u2562\u2556\u2555\u2563\u2551\u2557\u255D\u255C\u255B\u2510\u2514\u2534\u252C\u251C\u2500\u253C\u255E\u255F\u255A\u2554\u2569\u2566\u2560\u2550\u256C\u2567\u2568\u2564\u2565\u2559\u2558\u2552\u2553\u256B\u256A\u2518\u250C\u2588\u2584\u258C\u2590\u2580\u03B1\xDF\u0393\u03C0\u03A3\u03C3\xB5\u03C4\u03A6\u0398\u03A9\u03B4\u221E\u03C6\u03B5\u2229\u2261\xB1\u2265\u2264\u2320\u2321\xF7\u2248\xB0\u2219\xB7\u221A\u207F\xB2\u25A0\xA0";function lr(t,e,r,n){if(n)return t.toString("utf8",e,r);for(var i="",s=e;s<r;s++)i+=wf[t[s]];return i}function et(t,e){var r=t.readUInt32LE(e),n=t.readUInt32LE(e+4);return n*4294967296+r}var we;typeof Buffer.allocUnsafe=="function"?we=function(t){return Buffer.allocUnsafe(t)}:we=function(t){return new Buffer(t)};function fr(t){if(t)throw t}});var Qo=F((Rd,Jo)=>{var ge=bo()("extract-zip"),{createWriteStream:xf,promises:tt}=require("fs"),Ef=Fo(),Ve=require("path"),{promisify:Wn}=require("util"),Tf=require("stream"),Of=Go(),Nf=Wn(Of.open),Sf=Wn(Tf.pipeline),Yo=class{constructor(e,r){this.zipPath=e,this.opts=r}async extract(){return ge("opening",this.zipPath,"with opts",this.opts),this.zipfile=await Nf(this.zipPath,{lazyEntries:!0}),this.canceled=!1,new Promise((e,r)=>{this.zipfile.on("error",n=>{this.canceled=!0,r(n)}),this.zipfile.readEntry(),this.zipfile.on("close",()=>{this.canceled||(ge("zip extraction complete"),e())}),this.zipfile.on("entry",async n=>{if(this.canceled){ge("skipping entry",n.fileName,{cancelled:this.canceled});return}if(ge("zipfile entry",n.fileName),n.fileName.startsWith("__MACOSX/")){this.zipfile.readEntry();return}let i=Ve.dirname(Ve.join(this.opts.dir,n.fileName));try{await tt.mkdir(i,{recursive:!0});let s=await tt.realpath(i);if(Ve.relative(this.opts.dir,s).split(Ve.sep).includes(".."))throw new Error(`Out of bound path "${s}" found while processing file ${n.fileName}`);await this.extractEntry(n),ge("finished processing",n.fileName),this.zipfile.readEntry()}catch(s){this.canceled=!0,this.zipfile.close(),r(s)}})})}async extractEntry(e){if(this.canceled){ge("skipping entry extraction",e.fileName,{cancelled:this.canceled});return}this.opts.onEntry&&this.opts.onEntry(e,this.zipfile);let r=Ve.join(this.opts.dir,e.fileName),n=e.externalFileAttributes>>16&65535,i=61440,s=16384,o=40960,a=(n&i)===o,u=(n&i)===s;!u&&e.fileName.endsWith("/")&&(u=!0);let c=e.versionMadeBy>>8;u||(u=c===0&&e.externalFileAttributes===16),ge("extracting entry",{filename:e.fileName,isDir:u,isSymlink:a});let l=this.getExtractedMode(n,u)&511,f=u?r:Ve.dirname(r),p={recursive:!0};if(u&&(p.mode=l),ge("mkdir",{dir:f,...p}),await tt.mkdir(f,p),u)return;ge("opening read stream",r);let g=await Wn(this.zipfile.openReadStream.bind(this.zipfile))(e);if(a){let v=await Ef(g);ge("creating symlink",v,r),await tt.symlink(v,r)}else await Sf(g,xf(r,{mode:l}))}getExtractedMode(e,r){let n=e;return n===0&&(r?(this.opts.defaultDirMode&&(n=parseInt(this.opts.defaultDirMode,10)),n||(n=493)):(this.opts.defaultFileMode&&(n=parseInt(this.opts.defaultFileMode,10)),n||(n=420))),n}};Jo.exports=async function(t,e){if(ge("creating target directory",e.dir),!Ve.isAbsolute(e.dir))throw new Error("Target directory is expected to be absolute");return await tt.mkdir(e.dir,{recursive:!0}),e.dir=await tt.realpath(e.dir),new Yo(t,e).extract()}});var ea=F((kd,Zo)=>{"use strict";Zo.exports=t=>function(){let e=arguments.length,r=new Array(e);for(let n=0;n<e;n+=1)r[n]=arguments[n];return new Promise((n,i)=>{r.push((s,o)=>{s?i(s):n(o)}),t.apply(null,r)})}});var re=F((qd,ta)=>{"use strict";var hr=require("fs"),Df=ea(),Cf=t=>[typeof hr[t]=="function",!t.match(/Sync$/),!t.match(/^[A-Z]/),!t.match(/^create/),!t.match(/^(un)?watch/)].every(Boolean),Pf=t=>{let e=hr[t];return Df(e)},If=()=>{let t={};return Object.keys(hr).forEach(e=>{Cf(e)?e==="exists"?t.exists=()=>{throw new Error("fs.exists() is deprecated")}:t[e]=Pf(e):t[e]=hr[e]}),t};ta.exports=If()});var J=F((Xd,sa)=>{"use strict";var Lf=t=>{let e=r=>["a","e","i","o","u"].indexOf(r[0])!==-1?`an ${r}`:`a ${r}`;return t.map(e).join(" or ")},ra=t=>/array of /.test(t),na=t=>t.split(" of ")[1],ia=t=>ra(t)?ia(na(t)):["string","number","boolean","array","object","buffer","null","undefined","function"].some(e=>e===t),vt=t=>t===null?"null":Array.isArray(t)?"array":Buffer.isBuffer(t)?"buffer":typeof t,Af=(t,e,r)=>r.indexOf(t)===e,Ff=t=>{let e=vt(t),r;return e==="array"&&(r=t.map(n=>vt(n)).filter(Af),e+=` of ${r.join(", ")}`),e},Mf=(t,e)=>{let r=na(e);return vt(t)!=="array"?!1:t.every(n=>vt(n)===r)},Hn=(t,e,r,n)=>{if(!n.some(s=>{if(!ia(s))throw new Error(`Unknown type "${s}"`);return ra(s)?Mf(r,s):s===vt(r)}))throw new Error(`Argument "${e}" passed to ${t} must be ${Lf(n)}. Received ${Ff(r)}`)},_f=(t,e,r,n)=>{r!==void 0&&(Hn(t,e,r,["object"]),Object.keys(r).forEach(i=>{let s=`${e}.${i}`;if(n[i]!==void 0)Hn(t,s,r[i],n[i]);else throw new Error(`Unknown argument "${s}" passed to ${t}`)}))};sa.exports={argument:Hn,options:_f}});var pr=F(oa=>{"use strict";oa.normalizeFileMode=t=>{let e;return typeof t=="number"?e=t.toString(8):e=t,e.substring(e.length-3)}});var gr=F(dr=>{"use strict";var aa=re(),jf=J(),Rf=(t,e)=>{let r=`${t}([path])`;jf.argument(r,"path",e,["string","undefined"])},kf=t=>{aa.rmSync(t,{recursive:!0,force:!0,maxRetries:3})},qf=t=>aa.rm(t,{recursive:!0,force:!0,maxRetries:3});dr.validateInput=Rf;dr.sync=kf;dr.async=qf});var We=F(rt=>{"use strict";var mr=require("path"),Ee=re(),Kn=pr(),ua=J(),ca=gr(),Xf=(t,e,r)=>{let n=`${t}(path, [criteria])`;ua.argument(n,"path",e,["string"]),ua.options(n,"criteria",r,{empty:["boolean"],mode:["string","number"]})},la=t=>{let e=t||{};return typeof e.empty!="boolean"&&(e.empty=!1),e.mode!==void 0&&(e.mode=Kn.normalizeFileMode(e.mode)),e},fa=t=>new Error(`Path ${t} exists but is not a directory. Halting jetpack.dir() call for safety reasons.`),Bf=t=>{let e;try{e=Ee.statSync(t)}catch(r){if(r.code!=="ENOENT")throw r}if(e&&!e.isDirectory())throw fa(t);return e},Gn=(t,e)=>{let r=e||{};try{Ee.mkdirSync(t,r.mode)}catch(n){if(n.code==="ENOENT")Gn(mr.dirname(t),r),Ee.mkdirSync(t,r.mode);else if(n.code!=="EEXIST")throw n}},Uf=(t,e,r)=>{let n=()=>{let s=Kn.normalizeFileMode(e.mode);r.mode!==void 0&&r.mode!==s&&Ee.chmodSync(t,r.mode)},i=()=>{r.empty&&Ee.readdirSync(t).forEach(o=>{ca.sync(mr.resolve(t,o))})};n(),i()},zf=(t,e)=>{let r=la(e),n=Bf(t);n?Uf(t,n,r):Gn(t,r)},$f=t=>new Promise((e,r)=>{Ee.stat(t).then(n=>{n.isDirectory()?e(n):r(fa(t))}).catch(n=>{n.code==="ENOENT"?e(void 0):r(n)})}),Vf=t=>new Promise((e,r)=>{Ee.readdir(t).then(n=>{let i=s=>{if(s===n.length)e();else{let o=mr.resolve(t,n[s]);ca.async(o).then(()=>{i(s+1)})}};i(0)}).catch(r)}),Wf=(t,e,r)=>new Promise((n,i)=>{let s=()=>{let a=Kn.normalizeFileMode(e.mode);return r.mode!==void 0&&r.mode!==a?Ee.chmod(t,r.mode):Promise.resolve()},o=()=>r.empty?Vf(t):Promise.resolve();s().then(o).then(n,i)}),Yn=(t,e)=>{let r=e||{};return new Promise((n,i)=>{Ee.mkdir(t,r.mode).then(n).catch(s=>{s.code==="ENOENT"?Yn(mr.dirname(t),r).then(()=>Ee.mkdir(t,r.mode)).then(n).catch(o=>{o.code==="EEXIST"?n():i(o)}):s.code==="EEXIST"?n():i(s)})})},Hf=(t,e)=>new Promise((r,n)=>{let i=la(e);$f(t).then(s=>s!==void 0?Wf(t,s,i):Yn(t,i)).then(r,n)});rt.validateInput=Xf;rt.sync=zf;rt.createSync=Gn;rt.async=Hf;rt.createAsync=Yn});var bt=F(vr=>{"use strict";var ha=require("path"),nt=re(),Jn=J(),pa=We(),Kf=(t,e,r,n)=>{let i=`${t}(path, data, [options])`;Jn.argument(i,"path",e,["string"]),Jn.argument(i,"data",r,["string","buffer","object","array"]),Jn.options(i,"options",n,{mode:["string","number"],atomic:["boolean"],jsonIndent:["number"]})},yr=".__new__",da=(t,e)=>{let r=e;return typeof r!="number"&&(r=2),typeof t=="object"&&!Buffer.isBuffer(t)&&t!==null?JSON.stringify(t,null,r):t},ga=(t,e,r)=>{try{nt.writeFileSync(t,e,r)}catch(n){if(n.code==="ENOENT")pa.createSync(ha.dirname(t)),nt.writeFileSync(t,e,r);else throw n}},Gf=(t,e,r)=>{ga(t+yr,e,r),nt.renameSync(t+yr,t)},Yf=(t,e,r)=>{let n=r||{},i=da(e,n.jsonIndent),s=ga;n.atomic&&(s=Gf),s(t,i,{mode:n.mode})},ma=(t,e,r)=>new Promise((n,i)=>{nt.writeFile(t,e,r).then(n).catch(s=>{s.code==="ENOENT"?pa.createAsync(ha.dirname(t)).then(()=>nt.writeFile(t,e,r)).then(n,i):i(s)})}),Jf=(t,e,r)=>new Promise((n,i)=>{ma(t+yr,e,r).then(()=>nt.rename(t+yr,t)).then(n,i)}),Qf=(t,e,r)=>{let n=r||{},i=da(e,n.jsonIndent),s=ma;return n.atomic&&(s=Jf),s(t,i,{mode:n.mode})};vr.validateInput=Kf;vr.sync=Yf;vr.async=Qf});var ba=F(br=>{"use strict";var ya=re(),va=bt(),Qn=J(),Zf=(t,e,r,n)=>{let i=`${t}(path, data, [options])`;Qn.argument(i,"path",e,["string"]),Qn.argument(i,"data",r,["string","buffer"]),Qn.options(i,"options",n,{mode:["string","number"]})},eh=(t,e,r)=>{try{ya.appendFileSync(t,e,r)}catch(n){if(n.code==="ENOENT")va.sync(t,e,r);else throw n}},th=(t,e,r)=>new Promise((n,i)=>{ya.appendFile(t,e,r).then(n).catch(s=>{s.code==="ENOENT"?va.async(t,e,r).then(n,i):i(s)})});br.validateInput=Zf;br.sync=eh;br.async=th});var Ta=F(Er=>{"use strict";var wr=re(),Zn=pr(),wa=J(),xr=bt(),rh=(t,e,r)=>{let n=`${t}(path, [criteria])`;wa.argument(n,"path",e,["string"]),wa.options(n,"criteria",r,{content:["string","buffer","object","array"],jsonIndent:["number"],mode:["string","number"]})},xa=t=>{let e=t||{};return e.mode!==void 0&&(e.mode=Zn.normalizeFileMode(e.mode)),e},Ea=t=>new Error(`Path ${t} exists but is not a file. Halting jetpack.file() call for safety reasons.`),nh=t=>{let e;try{e=wr.statSync(t)}catch(r){if(r.code!=="ENOENT")throw r}if(e&&!e.isFile())throw Ea(t);return e},ih=(t,e,r)=>{let n=Zn.normalizeFileMode(e.mode),i=()=>r.content!==void 0?(xr.sync(t,r.content,{mode:n,jsonIndent:r.jsonIndent}),!0):!1,s=()=>{r.mode!==void 0&&r.mode!==n&&wr.chmodSync(t,r.mode)};i()||s()},sh=(t,e)=>{let r="";e.content!==void 0&&(r=e.content),xr.sync(t,r,{mode:e.mode,jsonIndent:e.jsonIndent})},oh=(t,e)=>{let r=xa(e),n=nh(t);n!==void 0?ih(t,n,r):sh(t,r)},ah=t=>new Promise((e,r)=>{wr.stat(t).then(n=>{n.isFile()?e(n):r(Ea(t))}).catch(n=>{n.code==="ENOENT"?e(void 0):r(n)})}),uh=(t,e,r)=>{let n=Zn.normalizeFileMode(e.mode),i=()=>new Promise((o,a)=>{r.content!==void 0?xr.async(t,r.content,{mode:n,jsonIndent:r.jsonIndent}).then(()=>{o(!0)}).catch(a):o(!1)}),s=()=>{if(r.mode!==void 0&&r.mode!==n)return wr.chmod(t,r.mode)};return i().then(o=>{if(!o)return s()})},ch=(t,e)=>{let r="";return e.content!==void 0&&(r=e.content),xr.async(t,r,{mode:e.mode,jsonIndent:e.jsonIndent})},lh=(t,e)=>new Promise((r,n)=>{let i=xa(e);ah(t).then(s=>s!==void 0?uh(t,s,i):ch(t,i)).then(r,n)});Er.validateInput=rh;Er.sync=oh;Er.async=lh});var st=F(it=>{"use strict";var Oa=require("crypto"),fh=require("path"),Xe=re(),Na=J(),ei=["md5","sha1","sha256","sha512"],ti=["report","follow"],hh=(t,e,r)=>{let n=`${t}(path, [options])`;if(Na.argument(n,"path",e,["string"]),Na.options(n,"options",r,{checksum:["string"],mode:["boolean"],times:["boolean"],absolutePath:["boolean"],symlinks:["string"]}),r&&r.checksum!==void 0&&ei.indexOf(r.checksum)===-1)throw new Error(`Argument "options.checksum" passed to ${n} must have one of values: ${ei.join(", ")}`);if(r&&r.symlinks!==void 0&&ti.indexOf(r.symlinks)===-1)throw new Error(`Argument "options.symlinks" passed to ${n} must have one of values: ${ti.join(", ")}`)},Sa=(t,e,r)=>{let n={};return n.name=fh.basename(t),r.isFile()?(n.type="file",n.size=r.size):r.isDirectory()?n.type="dir":r.isSymbolicLink()?n.type="symlink":n.type="other",e.mode&&(n.mode=r.mode),e.times&&(n.accessTime=r.atime,n.modifyTime=r.mtime,n.changeTime=r.ctime,n.birthTime=r.birthtime),e.absolutePath&&(n.absolutePath=t),n},ph=(t,e)=>{let r=Oa.createHash(e),n=Xe.readFileSync(t);return r.update(n),r.digest("hex")},dh=(t,e,r)=>{e.type==="file"&&r.checksum?e[r.checksum]=ph(t,r.checksum):e.type==="symlink"&&(e.pointsAt=Xe.readlinkSync(t))},gh=(t,e)=>{let r=Xe.lstatSync,n,i=e||{};i.symlinks==="follow"&&(r=Xe.statSync);try{n=r(t)}catch(o){if(o.code==="ENOENT")return;throw o}let s=Sa(t,i,n);return dh(t,s,i),s},mh=(t,e)=>new Promise((r,n)=>{let i=Oa.createHash(e),s=Xe.createReadStream(t);s.on("data",o=>{i.update(o)}),s.on("end",()=>{r(i.digest("hex"))}),s.on("error",n)}),yh=(t,e,r)=>e.type==="file"&&r.checksum?mh(t,r.checksum).then(n=>(e[r.checksum]=n,e)):e.type==="symlink"?Xe.readlink(t).then(n=>(e.pointsAt=n,e)):Promise.resolve(e),vh=(t,e)=>new Promise((r,n)=>{let i=Xe.lstat,s=e||{};s.symlinks==="follow"&&(i=Xe.stat),i(t).then(o=>{let a=Sa(t,s,o);yh(t,a,s).then(r,n)}).catch(o=>{o.code==="ENOENT"?r(void 0):n(o)})});it.supportedChecksumAlgorithms=ei;it.symlinkOptions=ti;it.validateInput=hh;it.sync=gh;it.async=vh});var Or=F(Tr=>{"use strict";var Da=re(),bh=J(),wh=(t,e)=>{let r=`${t}(path)`;bh.argument(r,"path",e,["string","undefined"])},xh=t=>{try{return Da.readdirSync(t)}catch(e){if(e.code==="ENOENT")return;throw e}},Eh=t=>new Promise((e,r)=>{Da.readdir(t).then(n=>{e(n)}).catch(n=>{n.code==="ENOENT"?e(void 0):r(n)})});Tr.validateInput=wh;Tr.sync=xh;Tr.async=Eh});var Cr=F(ri=>{"use strict";var Nr=require("fs"),Sr=require("path"),wt=st(),Gd=Or(),Dr=t=>t.isDirectory()?"dir":t.isFile()?"file":t.isSymbolicLink()?"symlink":"other",Th=(t,e,r)=>{e.maxLevelsDeep===void 0&&(e.maxLevelsDeep=1/0);let n=e.inspectOptions!==void 0;e.symlinks&&(e.inspectOptions===void 0?e.inspectOptions={symlinks:e.symlinks}:e.inspectOptions.symlinks=e.symlinks);let i=(o,a)=>{Nr.readdirSync(o,{withFileTypes:!0}).forEach(u=>{let c=typeof u=="string",l;c?l=Sr.join(o,u):l=Sr.join(o,u.name);let f;if(n)f=wt.sync(l,e.inspectOptions);else if(c){let p=wt.sync(l,e.inspectOptions);f={name:p.name,type:p.type}}else{let p=Dr(u);if(p==="symlink"&&e.symlinks==="follow"){let g=Nr.statSync(l);f={name:u.name,type:Dr(g)}}else f={name:u.name,type:p}}f!==void 0&&(r(l,f),f.type==="dir"&&a<e.maxLevelsDeep&&i(l,a+1))})},s=wt.sync(t,e.inspectOptions);s?(n?r(t,s):r(t,{name:s.name,type:s.type}),s.type==="dir"&&i(t,1)):r(t,void 0)},Oh=5,Nh=(t,e,r,n)=>{e.maxLevelsDeep===void 0&&(e.maxLevelsDeep=1/0);let i=e.inspectOptions!==void 0;e.symlinks&&(e.inspectOptions===void 0?e.inspectOptions={symlinks:e.symlinks}:e.inspectOptions.symlinks=e.symlinks);let s=[],o=0,a=()=>{if(s.length===0&&o===0)n();else if(s.length>0&&o<Oh){let f=s.pop();o+=1,f()}},u=f=>{s.push(f),a()},c=()=>{o-=1,a()},l=(f,p)=>{let g=(v,E)=>{E.type==="dir"&&p<e.maxLevelsDeep&&l(v,p+1)};u(()=>{Nr.readdir(f,{withFileTypes:!0},(v,E)=>{v?n(v):(E.forEach(S=>{let N=typeof S=="string",T;if(N?T=Sr.join(f,S):T=Sr.join(f,S.name),i||N)u(()=>{wt.async(T,e.inspectOptions).then(b=>{b!==void 0&&(i?r(T,b):r(T,{name:b.name,type:b.type}),g(T,b)),c()}).catch(b=>{n(b)})});else{let b=Dr(S);if(b==="symlink"&&e.symlinks==="follow")u(()=>{Nr.stat(T,(h,d)=>{if(h)n(h);else{let x={name:S.name,type:Dr(d)};r(T,x),g(T,x),c()}})});else{let h={name:S.name,type:b};r(T,h),g(T,h)}}}),c())})})};wt.async(t,e.inspectOptions).then(f=>{f?(i?r(t,f):r(t,{name:f.name,type:f.type}),f.type==="dir"?l(t,1):n()):(r(t,void 0),n())}).catch(f=>{n(f)})};ri.sync=Th;ri.async=Nh});var Pa=F((Jd,Ca)=>{var Sh=typeof process=="object"&&process&&process.platform==="win32";Ca.exports=Sh?{sep:"\\"}:{sep:"/"}});var Ma=F((Qd,Fa)=>{"use strict";Fa.exports=Ia;function Ia(t,e,r){t instanceof RegExp&&(t=La(t,r)),e instanceof RegExp&&(e=La(e,r));var n=Aa(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function La(t,e){var r=e.match(t);return r?r[0]:null}Ia.range=Aa;function Aa(t,e,r){var n,i,s,o,a,u=r.indexOf(t),c=r.indexOf(e,u+1),l=u;if(u>=0&&c>0){if(t===e)return[u,c];for(n=[],s=r.length;l>=0&&!a;)l==u?(n.push(l),u=r.indexOf(t,l+1)):n.length==1?a=[n.pop(),c]:(i=n.pop(),i<s&&(s=i,o=c),c=r.indexOf(e,l+1)),l=u<c&&u>=0?u:c;n.length&&(a=[s,o])}return a}});var Ua=F((Zd,Ba)=>{var _a=Ma();Ba.exports=Ph;var ja="\0SLASH"+Math.random()+"\0",Ra="\0OPEN"+Math.random()+"\0",ni="\0CLOSE"+Math.random()+"\0",ka="\0COMMA"+Math.random()+"\0",qa="\0PERIOD"+Math.random()+"\0";function ii(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function Dh(t){return t.split("\\\\").join(ja).split("\\{").join(Ra).split("\\}").join(ni).split("\\,").join(ka).split("\\.").join(qa)}function Ch(t){return t.split(ja).join("\\").split(Ra).join("{").split(ni).join("}").split(ka).join(",").split(qa).join(".")}function Xa(t){if(!t)return[""];var e=[],r=_a("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,s=r.post,o=n.split(",");o[o.length-1]+="{"+i+"}";var a=Xa(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function Ph(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),xt(Dh(t),!0).map(Ch)):[]}function Ih(t){return"{"+t+"}"}function Lh(t){return/^-?0\d/.test(t)}function Ah(t,e){return t<=e}function Fh(t,e){return t>=e}function xt(t,e){var r=[],n=_a("{","}",t);if(!n)return[t];var i=n.pre,s=n.post.length?xt(n.post,!1):[""];if(/\$$/.test(n.pre))for(var o=0;o<s.length;o++){var a=i+"{"+n.body+"}"+s[o];r.push(a)}else{var u=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),l=u||c,f=n.body.indexOf(",")>=0;if(!l&&!f)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+ni+n.post,xt(t)):[t];var p;if(l)p=n.body.split(/\.\./);else if(p=Xa(n.body),p.length===1&&(p=xt(p[0],!1).map(Ih),p.length===1))return s.map(function(O){return n.pre+p[0]+O});var g;if(l){var v=ii(p[0]),E=ii(p[1]),S=Math.max(p[0].length,p[1].length),N=p.length==3?Math.abs(ii(p[2])):1,T=Ah,b=E<v;b&&(N*=-1,T=Fh);var h=p.some(Lh);g=[];for(var d=v;T(d,E);d+=N){var x;if(c)x=String.fromCharCode(d),x==="\\"&&(x="");else if(x=String(d),h){var D=S-x.length;if(D>0){var y=new Array(D+1).join("0");d<0?x="-"+y+x.slice(1):x=y+x}}g.push(x)}}else{g=[];for(var P=0;P<p.length;P++)g.push.apply(g,xt(p[P],!1))}for(var P=0;P<g.length;P++)for(var o=0;o<s.length;o++){var a=i+g[P]+s[o];(!e||l||a)&&r.push(a)}}return r}});var Ka=F((tg,ci)=>{var oe=ci.exports=(t,e,r={})=>(Pr(e),!r.nocomment&&e.charAt(0)==="#"?!1:new Et(e,r).match(t));ci.exports=oe;var si=Pa();oe.sep=si.sep;var me=Symbol("globstar **");oe.GLOBSTAR=me;var Mh=Ua(),za={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},oi="[^/]",ai=oi+"*?",_h="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",jh="(?:(?!(?:\\/|^)\\.).)*?",$a=t=>t.split("").reduce((e,r)=>(e[r]=!0,e),{}),Va=$a("().*{}+?[]^$\\!"),Rh=$a("[.("),Wa=/\/+/;oe.filter=(t,e={})=>(r,n,i)=>oe(r,t,e);var Be=(t,e={})=>{let r={};return Object.keys(t).forEach(n=>r[n]=t[n]),Object.keys(e).forEach(n=>r[n]=e[n]),r};oe.defaults=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return oe;let e=oe,r=(n,i,s)=>e(n,i,Be(t,s));return r.Minimatch=class extends e.Minimatch{constructor(i,s){super(i,Be(t,s))}},r.Minimatch.defaults=n=>e.defaults(Be(t,n)).Minimatch,r.filter=(n,i)=>e.filter(n,Be(t,i)),r.defaults=n=>e.defaults(Be(t,n)),r.makeRe=(n,i)=>e.makeRe(n,Be(t,i)),r.braceExpand=(n,i)=>e.braceExpand(n,Be(t,i)),r.match=(n,i,s)=>e.match(n,i,Be(t,s)),r};oe.braceExpand=(t,e)=>Ha(t,e);var Ha=(t,e={})=>(Pr(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:Mh(t)),kh=1024*64,Pr=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>kh)throw new TypeError("pattern is too long")},ui=Symbol("subparse");oe.makeRe=(t,e)=>new Et(t,e||{}).makeRe();oe.match=(t,e,r={})=>{let n=new Et(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};var qh=t=>t.replace(/\\(.)/g,"$1"),Xh=t=>t.replace(/\\([^-\]])/g,"$1"),Bh=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Uh=t=>t.replace(/[[\]\\]/g,"\\$&"),Et=class{constructor(e,r){Pr(e),r||(r={}),this.options=r,this.set=[],this.pattern=e,this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.make()}debug(){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();let n=this.globSet=this.braceExpand();r.debug&&(this.debug=(...i)=>console.error(...i)),this.debug(this.pattern,n),n=this.globParts=n.map(i=>i.split(Wa)),this.debug(this.pattern,n),n=n.map((i,s,o)=>i.map(this.parse,this)),this.debug(this.pattern,n),n=n.filter(i=>i.indexOf(!1)===-1),this.debug(this.pattern,n),this.set=n}parseNegate(){if(this.options.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n){var i=this.options;this.debug("matchOne",{this:this,file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var s=0,o=0,a=e.length,u=r.length;s<a&&o<u;s++,o++){this.debug("matchOne loop");var c=r[o],l=e[s];if(this.debug(r,c,l),c===!1)return!1;if(c===me){this.debug("GLOBSTAR",[r,c,l]);var f=s,p=o+1;if(p===u){for(this.debug("** at the end");s<a;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;f<a;){var g=e[f];if(this.debug(`
globstar while`,e,f,r,p,g),this.matchOne(e.slice(f),r.slice(p),n))return this.debug("globstar found match!",f,a,g),!0;if(g==="."||g===".."||!i.dot&&g.charAt(0)==="."){this.debug("dot detected!",e,f,r,p);break}this.debug("globstar swallow a segment, and continue"),f++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,f,r,p),f===a))}var v;if(typeof c=="string"?(v=l===c,this.debug("string match",c,l,v)):(v=l.match(c),this.debug("pattern match",c,l,v)),!v)return!1}if(s===a&&o===u)return!0;if(s===a)return n;if(o===u)return s===a-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return Ha(this.pattern,this.options)}parse(e,r){Pr(e);let n=this.options;if(e==="**")if(n.noglobstar)e="*";else return me;if(e==="")return"";let i="",s=!1,o=!1,a=[],u=[],c,l=!1,f=-1,p=-1,g,v,E,S=e.charAt(0)===".",N=n.dot||S,T=()=>S?"":N?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",b=D=>D.charAt(0)==="."?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",h=()=>{if(c){switch(c){case"*":i+=ai,s=!0;break;case"?":i+=oi,s=!0;break;default:i+="\\"+c;break}this.debug("clearStateChar %j %j",c,i),c=!1}};for(let D=0,y;D<e.length&&(y=e.charAt(D));D++){if(this.debug("%s	%s %s %j",e,D,i,y),o){if(y==="/")return!1;Va[y]&&(i+="\\"),i+=y,o=!1;continue}switch(y){case"/":return!1;case"\\":if(l&&e.charAt(D+1)==="-"){i+=y;continue}h(),o=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,D,i,y),l){this.debug("  in class"),y==="!"&&D===p+1&&(y="^"),i+=y;continue}this.debug("call clearStateChar %j",c),h(),c=y,n.noext&&h();continue;case"(":{if(l){i+="(";continue}if(!c){i+="\\(";continue}let P={type:c,start:D-1,reStart:i.length,open:za[c].open,close:za[c].close};this.debug(this.pattern,"	",P),a.push(P),i+=P.open,P.start===0&&P.type!=="!"&&(S=!0,i+=b(e.slice(D+1))),this.debug("plType %j %j",c,i),c=!1;continue}case")":{let P=a[a.length-1];if(l||!P){i+="\\)";continue}a.pop(),h(),s=!0,v=P,i+=v.close,v.type==="!"&&u.push(Object.assign(v,{reEnd:i.length}));continue}case"|":{let P=a[a.length-1];if(l||!P){i+="\\|";continue}h(),i+="|",P.start===0&&P.type!=="!"&&(S=!0,i+=b(e.slice(D+1)));continue}case"[":if(h(),l){i+="\\"+y;continue}l=!0,p=D,f=i.length,i+=y;continue;case"]":if(D===p+1||!l){i+="\\"+y;continue}g=e.substring(p+1,D);try{RegExp("["+Uh(Xh(g))+"]"),i+=y}catch(P){i=i.substring(0,f)+"(?:$.)"}s=!0,l=!1;continue;default:h(),Va[y]&&!(y==="^"&&l)&&(i+="\\"),i+=y;break}}for(l&&(g=e.slice(p+1),E=this.parse(g,ui),i=i.substring(0,f)+"\\["+E[0],s=s||E[1]),v=a.pop();v;v=a.pop()){let D;D=i.slice(v.reStart+v.open.length),this.debug("setting tail",i,v),D=D.replace(/((?:\\{2}){0,64})(\\?)\|/g,(P,O,I)=>(I||(I="\\"),O+O+I+"|")),this.debug(`tail=%j
   %s`,D,D,v,i);let y=v.type==="*"?ai:v.type==="?"?oi:"\\"+v.type;s=!0,i=i.slice(0,v.reStart)+y+"\\("+D}h(),o&&(i+="\\\\");let d=Rh[i.charAt(0)];for(let D=u.length-1;D>-1;D--){let y=u[D],P=i.slice(0,y.reStart),O=i.slice(y.reStart,y.reEnd-8),I=i.slice(y.reEnd),A=i.slice(y.reEnd-8,y.reEnd)+I,M=P.split(")").length,R=P.split("(").length-M,k=I;for(let z=0;z<R;z++)k=k.replace(/\)[+*?]?/,"");I=k;let _=I===""&&r!==ui?"(?:$|\\/)":"";i=P+O+I+_+A}if(i!==""&&s&&(i="(?=.)"+i),d&&(i=T()+i),r===ui)return[i,s];if(n.nocase&&!s&&(s=e.toUpperCase()!==e.toLowerCase()),!s)return qh(e);let x=n.nocase?"i":"";try{return Object.assign(new RegExp("^"+i+"$",x),{_glob:e,_src:i})}catch(D){return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?ai:r.dot?_h:jh,i=r.nocase?"i":"",s=e.map(o=>(o=o.map(a=>typeof a=="string"?Bh(a):a===me?me:a._src).reduce((a,u)=>(a[a.length-1]===me&&u===me||a.push(u),a),[]),o.forEach((a,u)=>{a!==me||o[u-1]===me||(u===0?o.length>1?o[u+1]="(?:\\/|"+n+"\\/)?"+o[u+1]:o[u]=n:u===o.length-1?o[u-1]+="(?:\\/|"+n+")?":(o[u-1]+="(?:\\/|\\/"+n+"\\/)"+o[u+1],o[u+1]=me))}),o.filter(a=>a!==me).join("/"))).join("|");s="^(?:"+s+")$",this.negate&&(s="^(?!"+s+").*$");try{this.regexp=new RegExp(s,i)}catch(o){this.regexp=!1}return this.regexp}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;si.sep!=="/"&&(e=e.split(si.sep).join("/")),e=e.split(Wa),this.debug(this.pattern,"split",e);let i=this.set;this.debug(this.pattern,"set",i);let s;for(let o=e.length-1;o>=0&&(s=e[o],!s);o--);for(let o=0;o<i.length;o++){let a=i[o],u=e;if(n.matchBase&&a.length===1&&(u=[s]),this.matchOne(u,a,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return oe.defaults(e).Minimatch}};oe.Minimatch=Et});var li=F(Ga=>{"use strict";var zh=Ka().Minimatch,$h=(t,e)=>{let r=e.indexOf("/")!==-1,n=/^!?\//.test(e),i=/^!/.test(e),s;if(!n&&r){let o=e.replace(/^!/,"").replace(/^\.\//,"");return/\/$/.test(t)?s="":s="/",i?`!${t}${s}${o}`:`${t}${s}${o}`}return e};Ga.create=(t,e,r)=>{let n;typeof e=="string"?n=[e]:n=e;let i=n.map(o=>$h(t,o)).map(o=>new zh(o,{matchBase:!0,nocomment:!0,nocase:r||!1,dot:!0,windowsPathsNoEscape:!0}));return o=>{let a="matching",u=!1,c,l;for(l=0;l<i.length;l+=1){if(c=i[l],c.negate&&(a="negation",l===0&&(u=!0)),a==="negation"&&u&&!c.match(o))return!1;a==="matching"&&!u&&(u=c.match(o))}return u}}});var iu=F(Ir=>{"use strict";var Vh=require("path"),Ya=Cr(),Ja=st(),Qa=li(),Za=J(),Wh=(t,e,r)=>{let n=`${t}([path], options)`;Za.argument(n,"path",e,["string"]),Za.options(n,"options",r,{matching:["string","array of string"],filter:["function"],files:["boolean"],directories:["boolean"],recursive:["boolean"],ignoreCase:["boolean"]})},eu=t=>{let e=t||{};return e.matching===void 0&&(e.matching="*"),e.files===void 0&&(e.files=!0),e.ignoreCase===void 0&&(e.ignoreCase=!1),e.directories===void 0&&(e.directories=!1),e.recursive===void 0&&(e.recursive=!0),e},tu=(t,e)=>t.map(r=>Vh.relative(e,r)),ru=t=>{let e=new Error(`Path you want to find stuff in doesn't exist ${t}`);return e.code="ENOENT",e},nu=t=>{let e=new Error(`Path you want to find stuff in must be a directory ${t}`);return e.code="ENOTDIR",e},Hh=(t,e)=>{let r=[],n=Qa.create(t,e.matching,e.ignoreCase),i=1/0;return e.recursive===!1&&(i=1),Ya.sync(t,{maxLevelsDeep:i,symlinks:"follow",inspectOptions:{times:!0,absolutePath:!0}},(s,o)=>{o&&s!==t&&n(s)&&(o.type==="file"&&e.files===!0||o.type==="dir"&&e.directories===!0)&&(e.filter?e.filter(o)&&r.push(s):r.push(s))}),r.sort(),tu(r,e.cwd)},Kh=(t,e)=>{let r=Ja.sync(t,{symlinks:"follow"});if(r===void 0)throw ru(t);if(r.type!=="dir")throw nu(t);return Hh(t,eu(e))},Gh=(t,e)=>new Promise((r,n)=>{let i=[],s=Qa.create(t,e.matching,e.ignoreCase),o=1/0;e.recursive===!1&&(o=1);let a=0,u=!1,c=()=>{u&&a===0&&(i.sort(),r(tu(i,e.cwd)))};Ya.async(t,{maxLevelsDeep:o,symlinks:"follow",inspectOptions:{times:!0,absolutePath:!0}},(l,f)=>{if(f&&l!==t&&s(l)&&(f.type==="file"&&e.files===!0||f.type==="dir"&&e.directories===!0))if(e.filter){let g=e.filter(f);typeof g.then=="function"?(a+=1,g.then(E=>{E&&i.push(l),a-=1,c()}).catch(E=>{n(E)})):g&&i.push(l)}else i.push(l)},l=>{l?n(l):(u=!0,c())})}),Yh=(t,e)=>Ja.async(t,{symlinks:"follow"}).then(r=>{if(r===void 0)throw ru(t);if(r.type!=="dir")throw nu(t);return Gh(t,eu(e))});Ir.validateInput=Wh;Ir.sync=Kh;Ir.async=Yh});var au=F(Fr=>{"use strict";var Jh=require("crypto"),Lr=require("path"),Ar=st(),ig=Or(),su=J(),ou=Cr(),Qh=(t,e,r)=>{let n=`${t}(path, [options])`;if(su.argument(n,"path",e,["string"]),su.options(n,"options",r,{checksum:["string"],relativePath:["boolean"],times:["boolean"],symlinks:["string"]}),r&&r.checksum!==void 0&&Ar.supportedChecksumAlgorithms.indexOf(r.checksum)===-1)throw new Error(`Argument "options.checksum" passed to ${n} must have one of values: ${Ar.supportedChecksumAlgorithms.join(", ")}`);if(r&&r.symlinks!==void 0&&Ar.symlinkOptions.indexOf(r.symlinks)===-1)throw new Error(`Argument "options.symlinks" passed to ${n} must have one of values: ${Ar.symlinkOptions.join(", ")}`)},Zh=(t,e)=>t===void 0?".":t.relativePath+"/"+e.name,ep=(t,e)=>{let r=Jh.createHash(e);return t.forEach(n=>{r.update(n.name+n[e])}),r.digest("hex")},fi=(t,e,r)=>{r.relativePath&&(e.relativePath=Zh(t,e)),e.type==="dir"&&(e.children.forEach(n=>{fi(e,n,r)}),e.size=0,e.children.sort((n,i)=>n.type==="dir"&&i.type==="file"?-1:n.type==="file"&&i.type==="dir"?1:n.name.localeCompare(i.name)),e.children.forEach(n=>{e.size+=n.size||0}),r.checksum&&(e[r.checksum]=ep(e.children,r.checksum)))},hi=(t,e,r)=>{let n=e[0];if(e.length>1){let i=t.children.find(s=>s.name===n);return hi(i,e.slice(1),r)}return t},tp=(t,e)=>{let r=e||{},n;return ou.sync(t,{inspectOptions:r},(i,s)=>{if(s){s.type==="dir"&&(s.children=[]);let o=Lr.relative(t,i);o===""?n=s:hi(n,o.split(Lr.sep),s).children.push(s)}}),n&&fi(void 0,n,r),n},rp=(t,e)=>{let r=e||{},n;return new Promise((i,s)=>{ou.async(t,{inspectOptions:r},(o,a)=>{if(a){a.type==="dir"&&(a.children=[]);let u=Lr.relative(t,o);u===""?n=a:hi(n,u.split(Lr.sep),a).children.push(a)}},o=>{o?s(o):(n&&fi(void 0,n,r),i(n))})})};Fr.validateInput=Qh;Fr.sync=tp;Fr.async=rp});var _r=F(Mr=>{"use strict";var uu=re(),np=J(),ip=(t,e)=>{let r=`${t}(path)`;np.argument(r,"path",e,["string"])},sp=t=>{try{let e=uu.statSync(t);return e.isDirectory()?"dir":e.isFile()?"file":"other"}catch(e){if(e.code!=="ENOENT")throw e}return!1},op=t=>new Promise((e,r)=>{uu.stat(t).then(n=>{n.isDirectory()?e("dir"):n.isFile()?e("file"):e("other")}).catch(n=>{n.code==="ENOENT"?e(!1):r(n)})});Mr.validateInput=ip;Mr.sync=sp;Mr.async=op});var mi=F(qr=>{"use strict";var Tt=require("path"),ae=re(),pi=We(),jr=_r(),cu=st(),ap=bt(),up=li(),lu=pr(),fu=Cr(),di=J(),cp=(t,e,r,n)=>{let i=`${t}(from, to, [options])`;di.argument(i,"from",e,["string"]),di.argument(i,"to",r,["string"]),di.options(i,"options",n,{overwrite:["boolean","function"],matching:["string","array of string"],ignoreCase:["boolean"]})},hu=(t,e)=>{let r=t||{},n={};return r.ignoreCase===void 0&&(r.ignoreCase=!1),n.overwrite=r.overwrite,r.matching?n.allowedToCopy=up.create(e,r.matching,r.ignoreCase):n.allowedToCopy=()=>!0,n},pu=t=>{let e=new Error(`Path to copy doesn't exist ${t}`);return e.code="ENOENT",e},Rr=t=>{let e=new Error(`Destination path already exists ${t}`);return e.code="EEXIST",e},kr={mode:!0,symlinks:"report",times:!0,absolutePath:!0},du=t=>typeof t.opts.overwrite!="function"&&t.opts.overwrite!==!0,lp=(t,e,r)=>{if(!jr.sync(t))throw pu(t);if(jr.sync(e)&&!r.overwrite)throw Rr(e)},fp=t=>{if(typeof t.opts.overwrite=="function"){let e=cu.sync(t.destPath,kr);return t.opts.overwrite(t.srcInspectData,e)}return t.opts.overwrite===!0},hp=(t,e,r,n)=>{let i=ae.readFileSync(t);try{ae.writeFileSync(e,i,{mode:r,flag:"wx"})}catch(s){if(s.code==="ENOENT")ap.sync(e,i,{mode:r});else if(s.code==="EEXIST"){if(fp(n))ae.writeFileSync(e,i,{mode:r});else if(du(n))throw Rr(n.destPath)}else throw s}},pp=(t,e)=>{let r=ae.readlinkSync(t);try{ae.symlinkSync(r,e)}catch(n){if(n.code==="EEXIST")ae.unlinkSync(e),ae.symlinkSync(r,e);else throw n}},dp=(t,e,r,n)=>{let i={srcPath:t,destPath:r,srcInspectData:e,opts:n},s=lu.normalizeFileMode(e.mode);e.type==="dir"?pi.createSync(r,{mode:s}):e.type==="file"?hp(t,r,s,i):e.type==="symlink"&&pp(t,r)},gp=(t,e,r)=>{let n=hu(r,t);lp(t,e,n),fu.sync(t,{inspectOptions:kr},(i,s)=>{let o=Tt.relative(t,i),a=Tt.resolve(e,o);n.allowedToCopy(i,a,s)&&dp(i,s,a,n)})},mp=(t,e,r)=>jr.async(t).then(n=>{if(n)return jr.async(e);throw pu(t)}).then(n=>{if(n&&!r.overwrite)throw Rr(e)}),yp=t=>new Promise((e,r)=>{typeof t.opts.overwrite=="function"?cu.async(t.destPath,kr).then(n=>{e(t.opts.overwrite(t.srcInspectData,n))}).catch(r):e(t.opts.overwrite===!0)}),gi=(t,e,r,n,i)=>new Promise((s,o)=>{let a=i||{},u="wx";a.overwrite&&(u="w");let c=ae.createReadStream(t),l=ae.createWriteStream(e,{mode:r,flags:u});c.on("error",o),l.on("error",f=>{c.resume(),f.code==="ENOENT"?pi.createAsync(Tt.dirname(e)).then(()=>{gi(t,e,r,n).then(s,o)}).catch(o):f.code==="EEXIST"?yp(n).then(p=>{p?gi(t,e,r,n,{overwrite:!0}).then(s,o):du(n)?o(Rr(e)):s()}).catch(o):o(f)}),l.on("finish",s),c.pipe(l)}),vp=(t,e)=>ae.readlink(t).then(r=>new Promise((n,i)=>{ae.symlink(r,e).then(n).catch(s=>{s.code==="EEXIST"?ae.unlink(e).then(()=>ae.symlink(r,e)).then(n,i):i(s)})})),bp=(t,e,r,n)=>{let i={srcPath:t,destPath:r,srcInspectData:e,opts:n},s=lu.normalizeFileMode(e.mode);return e.type==="dir"?pi.createAsync(r,{mode:s}):e.type==="file"?gi(t,r,s,i):e.type==="symlink"?vp(t,r):Promise.resolve()},wp=(t,e,r)=>new Promise((n,i)=>{let s=hu(r,t);mp(t,e,s).then(()=>{let o=!1,a=0;fu.async(t,{inspectOptions:kr},(u,c)=>{if(c){let l=Tt.relative(t,u),f=Tt.resolve(e,l);s.allowedToCopy(u,c,f)&&(a+=1,bp(u,c,f,s).then(()=>{a-=1,o&&a===0&&n()}).catch(i))}},u=>{u?i(u):(o=!0,o&&a===0&&n())})}).catch(i)});qr.validateInput=cp;qr.sync=gp;qr.async=wp});var vi=F(Br=>{"use strict";var gu=require("path"),ot=re(),yi=J(),mu=mi(),yu=We(),Ot=_r(),Xr=gr(),xp=(t,e,r,n)=>{let i=`${t}(from, to, [options])`;yi.argument(i,"from",e,["string"]),yi.argument(i,"to",r,["string"]),yi.options(i,"options",n,{overwrite:["boolean"]})},vu=t=>t||{},bu=t=>{let e=new Error(`Destination path already exists ${t}`);return e.code="EEXIST",e},wu=t=>{let e=new Error(`Path to move doesn't exist ${t}`);return e.code="ENOENT",e},Ep=(t,e,r)=>{let n=vu(r);if(Ot.sync(e)!==!1&&n.overwrite!==!0)throw bu(e);try{ot.renameSync(t,e)}catch(i){if(i.code==="EISDIR"||i.code==="EPERM")Xr.sync(e),ot.renameSync(t,e);else if(i.code==="EXDEV")mu.sync(t,e,{overwrite:!0}),Xr.sync(t);else if(i.code==="ENOENT"){if(!Ot.sync(t))throw wu(t);yu.createSync(gu.dirname(e)),ot.renameSync(t,e)}else throw i}},Tp=t=>new Promise((e,r)=>{let n=gu.dirname(t);Ot.async(n).then(i=>{i?r():yu.createAsync(n).then(e,r)}).catch(r)}),Op=(t,e,r)=>{let n=vu(r);return new Promise((i,s)=>{Ot.async(e).then(o=>{o!==!1&&n.overwrite!==!0?s(bu(e)):ot.rename(t,e).then(i).catch(a=>{a.code==="EISDIR"||a.code==="EPERM"?Xr.async(e).then(()=>ot.rename(t,e)).then(i,s):a.code==="EXDEV"?mu.async(t,e,{overwrite:!0}).then(()=>Xr.async(t)).then(i,s):a.code==="ENOENT"?Ot.async(t).then(u=>{u?Tp(e).then(()=>ot.rename(t,e)).then(i,s):s(wu(t))}).catch(s):s(a)})})})};Br.validateInput=xp;Br.sync=Ep;Br.async=Op});var Su=F(Ur=>{"use strict";var xu=re(),Eu=J(),Tu=["utf8","buffer","json","jsonWithDates"],Np=(t,e,r)=>{let n=`${t}(path, returnAs)`;if(Eu.argument(n,"path",e,["string"]),Eu.argument(n,"returnAs",r,["string","undefined"]),r&&Tu.indexOf(r)===-1)throw new Error(`Argument "returnAs" passed to ${n} must have one of values: ${Tu.join(", ")}`)},Ou=(t,e)=>typeof e=="string"&&/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*))(?:Z|(\+|-)([\d|:]*))?$/.exec(e)?new Date(e):e,Nu=(t,e)=>{let r=new Error(`JSON parsing failed while reading ${t} [${e}]`);return r.originalError=e,r},Sp=(t,e)=>{let r=e||"utf8",n,i="utf8";r==="buffer"&&(i=null);try{n=xu.readFileSync(t,{encoding:i})}catch(s){if(s.code==="ENOENT")return;throw s}try{r==="json"?n=JSON.parse(n):r==="jsonWithDates"&&(n=JSON.parse(n,Ou))}catch(s){throw Nu(t,s)}return n},Dp=(t,e)=>new Promise((r,n)=>{let i=e||"utf8",s="utf8";i==="buffer"&&(s=null),xu.readFile(t,{encoding:s}).then(o=>{try{r(i==="json"?JSON.parse(o):i==="jsonWithDates"?JSON.parse(o,Ou):o)}catch(a){n(Nu(t,a))}}).catch(o=>{o.code==="ENOENT"?r(void 0):n(o)})});Ur.validateInput=Np;Ur.sync=Sp;Ur.async=Dp});var Cu=F(zr=>{"use strict";var Nt=require("path"),Du=vi(),bi=J(),Cp=(t,e,r,n)=>{let i=`${t}(path, newName, [options])`;if(bi.argument(i,"path",e,["string"]),bi.argument(i,"newName",r,["string"]),bi.options(i,"options",n,{overwrite:["boolean"]}),Nt.basename(r)!==r)throw new Error(`Argument "newName" passed to ${i} should be a filename, not a path. Received "${r}"`)},Pp=(t,e,r)=>{let n=Nt.join(Nt.dirname(t),e);Du.sync(t,n,r)},Ip=(t,e,r)=>{let n=Nt.join(Nt.dirname(t),e);return Du.async(t,n,r)};zr.validateInput=Cp;zr.sync=Pp;zr.async=Ip});var Au=F(Vr=>{"use strict";var Pu=require("path"),$r=re(),Iu=J(),Lu=We(),Lp=(t,e,r)=>{let n=`${t}(symlinkValue, path)`;Iu.argument(n,"symlinkValue",e,["string"]),Iu.argument(n,"path",r,["string"])},Ap=(t,e)=>{try{$r.symlinkSync(t,e)}catch(r){if(r.code==="ENOENT")Lu.createSync(Pu.dirname(e)),$r.symlinkSync(t,e);else throw r}},Fp=(t,e)=>new Promise((r,n)=>{$r.symlink(t,e).then(r).catch(i=>{i.code==="ENOENT"?Lu.createAsync(Pu.dirname(e)).then(()=>$r.symlink(t,e)).then(r,n):n(i)})});Vr.validateInput=Lp;Vr.sync=Ap;Vr.async=Fp});var Mu=F(wi=>{"use strict";var Fu=require("fs");wi.createWriteStream=Fu.createWriteStream;wi.createReadStream=Fu.createReadStream});var Xu=F(Wr=>{"use strict";var xi=require("path"),Mp=require("os"),_u=require("crypto"),ju=We(),Ru=re(),_p=J(),jp=(t,e)=>{let r=`${t}([options])`;_p.options(r,"options",e,{prefix:["string"],basePath:["string"]})},ku=(t,e)=>{t=t||{};let r={};return typeof t.prefix!="string"?r.prefix="":r.prefix=t.prefix,typeof t.basePath=="string"?r.basePath=xi.resolve(e,t.basePath):r.basePath=Mp.tmpdir(),r},qu=32,Rp=(t,e)=>{let r=ku(e,t),n=_u.randomBytes(qu/2).toString("hex"),i=xi.join(r.basePath,r.prefix+n);try{Ru.mkdirSync(i)}catch(s){if(s.code==="ENOENT")ju.sync(i);else throw s}return i},kp=(t,e)=>new Promise((r,n)=>{let i=ku(e,t);_u.randomBytes(qu/2,(s,o)=>{if(s)n(s);else{let a=o.toString("hex"),u=xi.join(i.basePath,i.prefix+a);Ru.mkdir(u,c=>{c?c.code==="ENOENT"?ju.async(u).then(()=>{r(u)},n):n(c):r(u)})}})});Wr.validateInput=jp;Wr.sync=Rp;Wr.async=kp});var Vu=F((dg,$u)=>{"use strict";var Bu=require("util"),Ei=require("path"),Hr=ba(),Kr=We(),Gr=Ta(),Yr=iu(),Jr=st(),Qr=au(),Zr=mi(),en=_r(),tn=Or(),rn=vi(),nn=Su(),sn=gr(),on=Cu(),an=Au(),Uu=Mu(),un=Xu(),cn=bt(),zu=t=>{let e=()=>t||process.cwd(),r=function(){if(arguments.length===0)return e();let a=Array.prototype.slice.call(arguments),u=[e()].concat(a);return zu(Ei.resolve.apply(null,u))},n=a=>Ei.resolve(e(),a),i=function(){return Array.prototype.unshift.call(arguments,e()),Ei.resolve.apply(null,arguments)},s=a=>{let u=a||{};return u.cwd=e(),u},o={cwd:r,path:i,append:(a,u,c)=>{Hr.validateInput("append",a,u,c),Hr.sync(n(a),u,c)},appendAsync:(a,u,c)=>(Hr.validateInput("appendAsync",a,u,c),Hr.async(n(a),u,c)),copy:(a,u,c)=>{Zr.validateInput("copy",a,u,c),Zr.sync(n(a),n(u),c)},copyAsync:(a,u,c)=>(Zr.validateInput("copyAsync",a,u,c),Zr.async(n(a),n(u),c)),createWriteStream:(a,u)=>Uu.createWriteStream(n(a),u),createReadStream:(a,u)=>Uu.createReadStream(n(a),u),dir:(a,u)=>{Kr.validateInput("dir",a,u);let c=n(a);return Kr.sync(c,u),r(c)},dirAsync:(a,u)=>(Kr.validateInput("dirAsync",a,u),new Promise((c,l)=>{let f=n(a);Kr.async(f,u).then(()=>{c(r(f))},l)})),exists:a=>(en.validateInput("exists",a),en.sync(n(a))),existsAsync:a=>(en.validateInput("existsAsync",a),en.async(n(a))),file:(a,u)=>(Gr.validateInput("file",a,u),Gr.sync(n(a),u),o),fileAsync:(a,u)=>(Gr.validateInput("fileAsync",a,u),new Promise((c,l)=>{Gr.async(n(a),u).then(()=>{c(o)},l)})),find:(a,u)=>(typeof u=="undefined"&&typeof a=="object"&&(u=a,a="."),Yr.validateInput("find",a,u),Yr.sync(n(a),s(u))),findAsync:(a,u)=>(typeof u=="undefined"&&typeof a=="object"&&(u=a,a="."),Yr.validateInput("findAsync",a,u),Yr.async(n(a),s(u))),inspect:(a,u)=>(Jr.validateInput("inspect",a,u),Jr.sync(n(a),u)),inspectAsync:(a,u)=>(Jr.validateInput("inspectAsync",a,u),Jr.async(n(a),u)),inspectTree:(a,u)=>(Qr.validateInput("inspectTree",a,u),Qr.sync(n(a),u)),inspectTreeAsync:(a,u)=>(Qr.validateInput("inspectTreeAsync",a,u),Qr.async(n(a),u)),list:a=>(tn.validateInput("list",a),tn.sync(n(a||"."))),listAsync:a=>(tn.validateInput("listAsync",a),tn.async(n(a||"."))),move:(a,u,c)=>{rn.validateInput("move",a,u,c),rn.sync(n(a),n(u),c)},moveAsync:(a,u,c)=>(rn.validateInput("moveAsync",a,u,c),rn.async(n(a),n(u),c)),read:(a,u)=>(nn.validateInput("read",a,u),nn.sync(n(a),u)),readAsync:(a,u)=>(nn.validateInput("readAsync",a,u),nn.async(n(a),u)),remove:a=>{sn.validateInput("remove",a),sn.sync(n(a||"."))},removeAsync:a=>(sn.validateInput("removeAsync",a),sn.async(n(a||"."))),rename:(a,u,c)=>{on.validateInput("rename",a,u,c),on.sync(n(a),u,c)},renameAsync:(a,u,c)=>(on.validateInput("renameAsync",a,u,c),on.async(n(a),u,c)),symlink:(a,u)=>{an.validateInput("symlink",a,u),an.sync(a,n(u))},symlinkAsync:(a,u)=>(an.validateInput("symlinkAsync",a,u),an.async(a,n(u))),tmpDir:a=>{un.validateInput("tmpDir",a);let u=un.sync(e(),a);return r(u)},tmpDirAsync:a=>(un.validateInput("tmpDirAsync",a),new Promise((u,c)=>{un.async(e(),a).then(l=>{u(r(l))},c)})),write:(a,u,c)=>{cn.validateInput("write",a,u,c),cn.sync(n(a),u,c)},writeAsync:(a,u,c)=>(cn.validateInput("writeAsync",a,u,c),cn.async(n(a),u,c))};return Bu.inspect.custom!==void 0&&(o[Bu.inspect.custom]=()=>`[fs-jetpack CWD: ${e()}]`),o};$u.exports=zu});var ln=F((gg,Wu)=>{"use strict";var qp=Vu();Wu.exports=qp()});Tn(exports,{default:()=>Bi});var ue=ce(require("obsidian"));var Hu=ce(po()),Q=ce(require("path")),Ku=ce(Qo()),at=ce(ln()),Ti=class{constructor(e,r){this.name=e,this.url=r;let[n,i]=r.split("#");this.urlPath=n,this.urlHref=i??"",this.html=""}},Oi=class{constructor(e,r,n=new Array,i=0,s=null){this.sections=[new Ti(e,r)],this.subItems=n,this.level=i,this.parent=s}get name(){return this.sections[0].name??""}},Ni=class{constructor(e,r){this.toc=[];this.chapters=[];this.epubPath=e,this.moreLog=r}async init(){try{this.tmpPath=at.default.tmpDir().path(),this.moreLog&&console.log("tmp folder path is: ",this.tmpPath),Q.extname(this.epubPath)!=""?await(0,Ku.default)(this.epubPath,{dir:this.tmpPath}):at.default.copy(this.epubPath,this.tmpPath,{overwrite:!0}),[this.opfFilePath,this.opfContent]=await this.parseBySuffix("opf");try{[this.ncxFilePath,this.ncxContent]=await this.parseBySuffix("ncx")}catch(e){console.log("This epub does not have a .ncx file, parsing will be based on the .opf file content.")}await this.parseToc(),await this.parseCover(),await this.parseMeta()}catch(e){throw console.log(e),new Error("failed to parse the .epub file")}}async parseBySuffix(e){let r=new Hu.Parser,n=at.default.find(this.tmpPath,{matching:`**/*.${e}`})[0],i=at.default.read(n);return[n,await r.parseStringPromise(i)]}updateChaptersByToc(){this.chapters=[];let e=r=>{this.chapters.push(r),r.subItems.forEach(e,r)};this.toc.forEach(e)}getTocByNavPoints(e){let r=(n,i)=>{let s=new Oi(n.navLabel[0].text[0],Q.posix.join(Q.dirname(this.ncxFilePath),n.content[0].$.src),n.navPoint?.map(o=>r(o,i+1))??[],i);return s.subItems.forEach(o=>o.parent=s),s};return e.map(n=>r(n,0))}generateToc(){if(this.ncxFilePath){let i=this.ncxContent.ncx.navMap[0].navPoint;this.toc=this.getTocByNavPoints(i),this.updateChaptersByToc()}let e=this.opfContent.package.manifest[0].item.map(i=>i.$.href).filter(i=>[".htm",".html",".xhtml"].some(s=>i.includes(s))).map(i=>Q.posix.join(Q.dirname(this.opfFilePath),i)),r=[];this.chapters.forEach(i=>{r.push(e.indexOf(i.sections[0].urlPath))});let n=0;e.forEach((i,s)=>{if(!r.includes(s)){let o=r.indexOf([...r].sort((a,u)=>u-a).find(a=>a<s));o>0?this.chapters[o].sections.push(new Ti(null,i)):this.toc.splice(n++,0,new Oi(Q.basename(i,Q.extname(i)),i))}}),this.updateChaptersByToc(),this.sections=this.chapters.flatMap(i=>i.sections)}async parseToc(){this.generateToc();let e=[...new Set(this.sections.map(n=>n.urlPath))],r=[];e.forEach(n=>{let i={url:n,names:[],hrefs:[],html:""};this.sections.filter(s=>s.urlPath==n).forEach(s=>{i.names.push(s.name?Q.basename(s.name):null),i.hrefs.push(s.urlHref)});try{let s=at.default.read(n);s&&(i.html=s),r.push(i)}catch(s){console.warn(`Error reading file at ${n}:`,s),console.warn("The failure to read the file might be due to an invalid file path. If such errors are few in this parsing process, it could be because the epub contains some meaningless navPoints, or even advertisements. If this is the case, it will not cause any damage to the content of the book.")}}),this.moreLog&&console.log(r),r.forEach(n=>{if(!n.hrefs.length||n.hrefs.length===1)this.sections.find(i=>i.urlPath==n.url).html=n.html;else{let i=new RegExp(`<.*?id=['"](?:${n.hrefs.join("|")})['"].*?>`,"g"),o=((u,c,l)=>{let f=u.split(c);return l>f.length&&(l=f.length),f.slice(0,l-1).concat([f.slice(l-1).join(c)])})(n.html,i,n.hrefs.length+1);n.hrefs[0]!=""&&o.shift();let a=n.hrefs.map(u=>u?"#"+u:"");o.forEach((u,c)=>{try{this.sections.find(l=>l.url==n.url+a[c]).html=u}catch(l){console.warn("Some errors occurred when we split a .htm/.html/.xhtml file to sections")}})}})}async parseCover(){let e=this.opfContent.package.manifest[0].item.find(r=>["cover","Cover"].some(n=>r.$.id.includes(n))&&["png","jpg","jpeg"].includes(Q.extname(r.$.href).slice(1)));e&&(this.coverPath=Q.posix.join(Q.dirname(this.opfFilePath),e.$.href))}async parseMeta(){let e=this.opfContent.package.metadata[0],r=n=>e[n]?.[0]?e[n][0]:"";this.meta={title:r("dc:title"),publisher:r("dc:publisher"),language:r("dc:language"),author:e["dc:creator"]?.[0]?._?`"${e["dc:creator"][0]._}"`:"",bookName:Q.basename(this.epubPath,Q.extname(this.epubPath))}}};var hn=ce(ln());var fn=ce(require("obsidian")),Si=class extends fn.SuggestModal{constructor(e,r,n=!1){super(e);this.onSubmit=r;this.onSubmit=r,n&&this.listenForPaste()}listenForPaste(){this.inputEl.addEventListener("paste",e=>{let r=e.clipboardData;if(r.files.length===1){let n=r.files[0].path;this.inputEl.value=n}})}listenForEnter(e){this.inputEl.addEventListener("keyup",r=>{r.key==="Enter"&&this.inputEl.value&&this.trySubmit(this.inputEl.value,e)})}trySubmit(e,r){r(e)?(this.onSubmit(e),this.close()):new fn.Notice("Invalid value.")}};var Di=class extends Si{constructor(e,r,n){super(e,n,!0);this.libraries=r,this.listenForEnter(this.validatePath)}validatePath(e){return hn.default.exists(e)==="file"&&e.endsWith(".epub")}getSuggestions(e){let r=[];return this.libraries.forEach(n=>{hn.default.find(n,{matching:"**/*.epub"}).forEach(i=>{r.push(hn.default.path(i))})}),r.filter(n=>n.includes(e))}renderSuggestion(e,r){r.createEl("div",{text:e})}onChooseSuggestion(e){this.trySubmit(e,this.validatePath)}};var St=class{static parse(e,r,n){let i=new St(e);return i.parseImagePath(r,n),i.parseFontNote(),i.parseInnerLink(),i.parseHttpLink(),i.content}constructor(e){this.content=e}parseImagePath(e,r){this.content=this.content.replaceAll(/!\[.*?\]\((.*?)\.(jpg|jpeg|png)\)/g,"![](images/$1.$2)").replaceAll(/!\[\].*?\(.*?([^\\/]*)\.(jpg|jpeg|png)\)/g,"![](images/$1.$2)"),r=="![](imagePath)"&&(e=e.replaceAll(" ","%20")),r=="![[imagePath]]"&&(this.content=this.content.replaceAll(/!\[\]\(([^)]*images[^)]*)\)/g,"![[$1]]")),r=="![[imagePath|caption]]"&&(this.content=this.content.replaceAll(/!\[\]\(([^)]*images[^)]*)\)/g,"![[$1]]"),this.content=this.content.replaceAll(/!\[\[(.*images.*)\]\]\n+(\**图.*)\n/g,`![[$1|$2]]
`)),this.content=this.content.replaceAll(/images/g,e)}parseFontNote(){this.content=this.content.replace(/([^!])\[\[(\d+)\]\]\(.*?\)/g,"$1[^$2]"),this.content=this.content.replace(/([^!])\[(\d+)\]\(.*?\)/g,"$1[^$2]"),this.content=this.content.replace(/^(\[\^\d+\])(.*?)$/gm,"$1: $2")}parseInnerLink(){this.content=this.content.replaceAll(/([^!])\[\s*([^\]]*?)\s*\]\(\s*([^)]*?)\s*\)/g,"$1[[$3\\|$2]]")}parseHttpLink(){this.content=this.content.replaceAll(/\[\[(https:\/\/[^\]|]*?)(?:\|([^\]]*?))?]]/g,"[$2]($1)")}};var Gu={tag:"book",libraries:[],byDrag:!1,savePath:"",assetsPath:"{{savePath}}/{{bookName}}/images",granularity:4,mocName:"{{bookName}}",notePropertysTemplate:"",oneNote:!1,oneFolder:!0,mocPropertysTemplate:`title: {{bookName}}
author: {{author}}
publisher: {{publisher}}
status: false`,imageFormat:"![](imagePath)",autoOpenRightPanel:!1,removeDuplicateFolders:!1,moreLog:!1,leafID:""};var K=ce(require("obsidian"));function Z(t){return Z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(t)}function le(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ci(t,e){if(Z(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Z(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dt(t){var e=Ci(t,"string");return Z(e)==="symbol"?e:String(e)}function Yu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Dt(n.key),n)}}function fe(t,e,r){return e&&Yu(t.prototype,e),r&&Yu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ct(t,e){return Ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Ct(t,e)}function ut(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ct(t,e)}function He(t,e){if(e&&(Z(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ye(t)}function he(t){return he=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},he(t)}function Te(t,e,r){return e=Dt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pi(t){if(Array.isArray(t))return t}function Ii(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function pn(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Li(t,e){if(!!t){if(typeof t=="string")return pn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pn(t,e)}}function Ai(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fi(t){return Pi(t)||Ii(t)||Li(t)||Ai()}function Ju(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Qu(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ju(Object(r),!0).forEach(function(n){Te(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ju(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Xp={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,r){console&&console[e]&&console[e].apply(console,r)}},Bp=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};le(this,t),this.init(e,r)}return fe(t,[{key:"init",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=r||Xp,this.options=n,this.debug=n.debug}},{key:"setDebug",value:function(r){this.debug=r}},{key:"log",value:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return this.forward(n,"log","",!0)}},{key:"warn",value:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return this.forward(n,"warn","",!0)}},{key:"error",value:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return this.forward(n,"error","")}},{key:"deprecate",value:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(r,n,i,s){return s&&!this.debug?null:(typeof r[0]=="string"&&(r[0]="".concat(i).concat(this.prefix," ").concat(r[0])),this.logger[n](r))}},{key:"create",value:function(r){return new t(this.logger,Qu(Qu({},{prefix:"".concat(this.prefix,":").concat(r,":")}),this.options))}},{key:"clone",value:function(r){return r=r||this.options,r.prefix=r.prefix||this.prefix,new t(this.logger,r)}}]),t}(),Oe=new Bp,Ue=function(){function t(){le(this,t),this.observers={}}return fe(t,[{key:"on",value:function(r,n){var i=this;return r.split(" ").forEach(function(s){i.observers[s]=i.observers[s]||[],i.observers[s].push(n)}),this}},{key:"off",value:function(r,n){if(!!this.observers[r]){if(!n){delete this.observers[r];return}this.observers[r]=this.observers[r].filter(function(i){return i!==n})}}},{key:"emit",value:function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];if(this.observers[r]){var o=[].concat(this.observers[r]);o.forEach(function(u){u.apply(void 0,i)})}if(this.observers["*"]){var a=[].concat(this.observers["*"]);a.forEach(function(u){u.apply(u,[r].concat(i))})}}}]),t}();function Pt(){var t,e,r=new Promise(function(n,i){t=n,e=i});return r.resolve=t,r.reject=e,r}function Zu(t){return t==null?"":""+t}function Up(t,e,r){t.forEach(function(n){e[n]&&(r[n]=e[n])})}function Mi(t,e,r){function n(a){return a&&a.indexOf("###")>-1?a.replace(/###/g,"."):a}function i(){return!t||typeof t=="string"}for(var s=typeof e!="string"?[].concat(e):e.split(".");s.length>1;){if(i())return{};var o=n(s.shift());!t[o]&&r&&(t[o]=new r),Object.prototype.hasOwnProperty.call(t,o)?t=t[o]:t={}}return i()?{}:{obj:t,k:n(s.shift())}}function ec(t,e,r){var n=Mi(t,e,Object),i=n.obj,s=n.k;i[s]=r}function zp(t,e,r,n){var i=Mi(t,e,Object),s=i.obj,o=i.k;s[o]=s[o]||[],n&&(s[o]=s[o].concat(r)),n||s[o].push(r)}function dn(t,e){var r=Mi(t,e),n=r.obj,i=r.k;if(!!n)return n[i]}function $p(t,e,r){var n=dn(t,r);return n!==void 0?n:dn(e,r)}function tc(t,e,r){for(var n in e)n!=="__proto__"&&n!=="constructor"&&(n in t?typeof t[n]=="string"||t[n]instanceof String||typeof e[n]=="string"||e[n]instanceof String?r&&(t[n]=e[n]):tc(t[n],e[n],r):t[n]=e[n]);return t}function ct(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Vp={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Wp(t){return typeof t=="string"?t.replace(/[&<>"'\/]/g,function(e){return Vp[e]}):t}var gn=typeof window!="undefined"&&window.navigator&&typeof window.navigator.userAgentData=="undefined"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,Hp=[" ",",","?","!",";"];function Kp(t,e,r){e=e||"",r=r||"";var n=Hp.filter(function(a){return e.indexOf(a)<0&&r.indexOf(a)<0});if(n.length===0)return!0;var i=new RegExp("(".concat(n.map(function(a){return a==="?"?"\\?":a}).join("|"),")")),s=!i.test(t);if(!s){var o=t.indexOf(r);o>0&&!i.test(t.substring(0,o))&&(s=!0)}return s}function mn(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!!t){if(t[e])return t[e];for(var n=e.split(r),i=t,s=0;s<n.length;++s){if(!i||typeof i[n[s]]=="string"&&s+1<n.length)return;if(i[n[s]]===void 0){for(var o=2,a=n.slice(s,s+o).join(r),u=i[a];u===void 0&&n.length>s+o;)o++,a=n.slice(s,s+o).join(r),u=i[a];if(u===void 0)return;if(u===null)return null;if(e.endsWith(a)){if(typeof u=="string")return u;if(a&&typeof u[a]=="string")return u[a]}var c=n.slice(s+o).join(r);return c?mn(u,c,r):void 0}i=i[n[s]]}return i}}function rc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function yn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rc(Object(r),!0).forEach(function(n){Te(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Gp(t){var e=Yp();return function(){var n=he(t),i;if(e){var s=he(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return He(this,i)}}function Yp(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}var Jp=function(t){ut(r,t);var e=Gp(r);function r(n){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return le(this,r),i=e.call(this),gn&&Ue.call(ye(i)),i.data=n||{},i.options=s,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.options.ignoreJSONStructure===void 0&&(i.options.ignoreJSONStructure=!0),i}return fe(r,[{key:"addNamespaces",value:function(i){this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}},{key:"removeNamespaces",value:function(i){var s=this.options.ns.indexOf(i);s>-1&&this.options.ns.splice(s,1)}},{key:"getResource",value:function(i,s,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},u=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,c=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure,l=[i,s];o&&typeof o!="string"&&(l=l.concat(o)),o&&typeof o=="string"&&(l=l.concat(u?o.split(u):o)),i.indexOf(".")>-1&&(l=i.split("."));var f=dn(this.data,l);return f||!c||typeof o!="string"?f:mn(this.data&&this.data[i]&&this.data[i][s],o,u)}},{key:"addResource",value:function(i,s,o,a){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},c=u.keySeparator!==void 0?u.keySeparator:this.options.keySeparator,l=[i,s];o&&(l=l.concat(c?o.split(c):o)),i.indexOf(".")>-1&&(l=i.split("."),a=s,s=l[1]),this.addNamespaces(s),ec(this.data,l,a),u.silent||this.emit("added",i,s,o,a)}},{key:"addResources",value:function(i,s,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var u in o)(typeof o[u]=="string"||Object.prototype.toString.apply(o[u])==="[object Array]")&&this.addResource(i,s,u,o[u],{silent:!0});a.silent||this.emit("added",i,s,o)}},{key:"addResourceBundle",value:function(i,s,o,a,u){var c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},l=[i,s];i.indexOf(".")>-1&&(l=i.split("."),a=o,o=s,s=l[1]),this.addNamespaces(s);var f=dn(this.data,l)||{};a?tc(f,o,u):f=yn(yn({},f),o),ec(this.data,l,f),c.silent||this.emit("added",i,s,o)}},{key:"removeResourceBundle",value:function(i,s){this.hasResourceBundle(i,s)&&delete this.data[i][s],this.removeNamespaces(s),this.emit("removed",i,s)}},{key:"hasResourceBundle",value:function(i,s){return this.getResource(i,s)!==void 0}},{key:"getResourceBundle",value:function(i,s){return s||(s=this.options.defaultNS),this.options.compatibilityAPI==="v1"?yn(yn({},{}),this.getResource(i,s)):this.getResource(i,s)}},{key:"getDataByLanguage",value:function(i){return this.data[i]}},{key:"hasLanguageSomeTranslations",value:function(i){var s=this.getDataByLanguage(i),o=s&&Object.keys(s)||[];return!!o.find(function(a){return s[a]&&Object.keys(s[a]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),r}(Ue),nc={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,r,n,i,s){var o=this;return e.forEach(function(a){o.processors[a]&&(r=o.processors[a].process(r,n,i,s))}),r}};function ic(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ee(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ic(Object(r),!0).forEach(function(n){Te(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ic(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Qp(t){var e=Zp();return function(){var n=he(t),i;if(e){var s=he(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return He(this,i)}}function Zp(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}var sc={},oc=function(t){ut(r,t);var e=Qp(r);function r(n){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return le(this,r),i=e.call(this),gn&&Ue.call(ye(i)),Up(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],n,ye(i)),i.options=s,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.logger=Oe.create("translator"),i}return fe(r,[{key:"changeLanguage",value:function(i){i&&(this.language=i)}},{key:"exists",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(i==null)return!1;var o=this.resolve(i,s);return o&&o.res!==void 0}},{key:"extractFromKey",value:function(i,s){var o=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;o===void 0&&(o=":");var a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,u=s.ns||this.options.defaultNS||[],c=o&&i.indexOf(o)>-1,l=!this.options.userDefinedKeySeparator&&!s.keySeparator&&!this.options.userDefinedNsSeparator&&!s.nsSeparator&&!Kp(i,o,a);if(c&&!l){var f=i.match(this.interpolator.nestingRegexp);if(f&&f.length>0)return{key:i,namespaces:u};var p=i.split(o);(o!==a||o===a&&this.options.ns.indexOf(p[0])>-1)&&(u=p.shift()),i=p.join(a)}return typeof u=="string"&&(u=[u]),{key:i,namespaces:u}}},{key:"translate",value:function(i,s,o){var a=this;if(Z(s)!=="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),Z(s)==="object"&&(s=ee({},s)),s||(s={}),i==null)return"";Array.isArray(i)||(i=[String(i)]);var u=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,c=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,l=this.extractFromKey(i[i.length-1],s),f=l.key,p=l.namespaces,g=p[p.length-1],v=s.lng||this.language,E=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(v&&v.toLowerCase()==="cimode"){if(E){var S=s.nsSeparator||this.options.nsSeparator;return u?{res:"".concat(g).concat(S).concat(f),usedKey:f,exactUsedKey:f,usedLng:v,usedNS:g}:"".concat(g).concat(S).concat(f)}return u?{res:f,usedKey:f,exactUsedKey:f,usedLng:v,usedNS:g}:f}var N=this.resolve(i,s),T=N&&N.res,b=N&&N.usedKey||f,h=N&&N.exactUsedKey||f,d=Object.prototype.toString.apply(T),x=["[object Number]","[object Function]","[object RegExp]"],D=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject,P=typeof T!="string"&&typeof T!="boolean"&&typeof T!="number";if(y&&T&&P&&x.indexOf(d)<0&&!(typeof D=="string"&&d==="[object Array]")){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var O=this.options.returnedObjectHandler?this.options.returnedObjectHandler(b,T,ee(ee({},s),{},{ns:p})):"key '".concat(f," (").concat(this.language,")' returned an object instead of string.");return u?(N.res=O,N):O}if(c){var I=d==="[object Array]",A=I?[]:{},M=I?h:b;for(var R in T)if(Object.prototype.hasOwnProperty.call(T,R)){var k="".concat(M).concat(c).concat(R);A[R]=this.translate(k,ee(ee({},s),{joinArrays:!1,ns:p})),A[R]===k&&(A[R]=T[R])}T=A}}else if(y&&typeof D=="string"&&d==="[object Array]")T=T.join(D),T&&(T=this.extendTranslation(T,i,s,o));else{var _=!1,z=!1,q=s.count!==void 0&&typeof s.count!="string",pe=r.hasDefaultValue(s),ne=q?this.pluralResolver.getSuffix(v,s.count,s):"",De=s["defaultValue".concat(ne)]||s.defaultValue;!this.isValidLookup(T)&&pe&&(_=!0,T=De),this.isValidLookup(T)||(z=!0,T=f);var Lt=s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,At=Lt&&z?void 0:T,Me=pe&&De!==T&&this.options.updateMissing;if(z||_||Me){if(this.logger.log(Me?"updateKey":"missingKey",v,g,f,Me?De:T),c){var Ft=this.resolve(f,ee(ee({},s),{},{keySeparator:!1}));Ft&&Ft.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var w=[],m=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&m&&m[0])for(var L=0;L<m.length;L++)w.push(m[L]);else this.options.saveMissingTo==="all"?w=this.languageUtils.toResolveHierarchy(s.lng||this.language):w.push(s.lng||this.language);var C=function($,V,G){var te=pe&&G!==T?G:At;a.options.missingKeyHandler?a.options.missingKeyHandler($,g,V,te,Me,s):a.backendConnector&&a.backendConnector.saveMissing&&a.backendConnector.saveMissing($,g,V,te,Me,s),a.emit("missingKey",$,g,V,T)};this.options.saveMissing&&(this.options.saveMissingPlurals&&q?w.forEach(function(X){a.pluralResolver.getSuffixes(X,s).forEach(function($){C([X],f+$,s["defaultValue".concat($)]||De)})}):C(w,f,De))}T=this.extendTranslation(T,i,s,N,o),z&&T===f&&this.options.appendNamespaceToMissingKey&&(T="".concat(g,":").concat(f)),(z||_)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?T=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(g,":").concat(f):f,_?T:void 0):T=this.options.parseMissingKeyHandler(T))}return u?(N.res=T,N):T}},{key:"extendTranslation",value:function(i,s,o,a,u){var c=this;if(this.i18nFormat&&this.i18nFormat.parse)i=this.i18nFormat.parse(i,ee(ee({},this.options.interpolation.defaultVariables),o),a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init(ee(ee({},o),{interpolation:ee(ee({},this.options.interpolation),o.interpolation)}));var l=typeof i=="string"&&(o&&o.interpolation&&o.interpolation.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),f;if(l){var p=i.match(this.interpolator.nestingRegexp);f=p&&p.length}var g=o.replace&&typeof o.replace!="string"?o.replace:o;if(this.options.interpolation.defaultVariables&&(g=ee(ee({},this.options.interpolation.defaultVariables),g)),i=this.interpolator.interpolate(i,g,o.lng||this.language,o),l){var v=i.match(this.interpolator.nestingRegexp),E=v&&v.length;f<E&&(o.nest=!1)}!o.lng&&this.options.compatibilityAPI!=="v1"&&a&&a.res&&(o.lng=a.usedLng),o.nest!==!1&&(i=this.interpolator.nest(i,function(){for(var T=arguments.length,b=new Array(T),h=0;h<T;h++)b[h]=arguments[h];return u&&u[0]===b[0]&&!o.context?(c.logger.warn("It seems you are nesting recursively key: ".concat(b[0]," in key: ").concat(s[0])),null):c.translate.apply(c,b.concat([s]))},o)),o.interpolation&&this.interpolator.reset()}var S=o.postProcess||this.options.postProcess,N=typeof S=="string"?[S]:S;return i!=null&&N&&N.length&&o.applyPostProcessor!==!1&&(i=nc.handle(N,i,s,this.options&&this.options.postProcessPassResolved?ee({i18nResolved:a},o):o,this)),i}},{key:"resolve",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a,u,c,l,f;return typeof i=="string"&&(i=[i]),i.forEach(function(p){if(!s.isValidLookup(a)){var g=s.extractFromKey(p,o),v=g.key;u=v;var E=g.namespaces;s.options.fallbackNS&&(E=E.concat(s.options.fallbackNS));var S=o.count!==void 0&&typeof o.count!="string",N=S&&!o.ordinal&&o.count===0&&s.pluralResolver.shouldUseIntlApi(),T=o.context!==void 0&&(typeof o.context=="string"||typeof o.context=="number")&&o.context!=="",b=o.lngs?o.lngs:s.languageUtils.toResolveHierarchy(o.lng||s.language,o.fallbackLng);E.forEach(function(h){s.isValidLookup(a)||(f=h,!sc["".concat(b[0],"-").concat(h)]&&s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(f)&&(sc["".concat(b[0],"-").concat(h)]=!0,s.logger.warn('key "'.concat(u,'" for languages "').concat(b.join(", "),`" won't get resolved as namespace "`).concat(f,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),b.forEach(function(d){if(!s.isValidLookup(a)){l=d;var x=[v];if(s.i18nFormat&&s.i18nFormat.addLookupKeys)s.i18nFormat.addLookupKeys(x,v,d,h,o);else{var D;S&&(D=s.pluralResolver.getSuffix(d,o.count,o));var y="".concat(s.options.pluralSeparator,"zero");if(S&&(x.push(v+D),N&&x.push(v+y)),T){var P="".concat(v).concat(s.options.contextSeparator).concat(o.context);x.push(P),S&&(x.push(P+D),N&&x.push(P+y))}}for(var O;O=x.pop();)s.isValidLookup(a)||(c=O,a=s.getResource(d,h,O,o))}}))})}}),{res:a,usedKey:u,exactUsedKey:c,usedLng:l,usedNS:f}}},{key:"isValidLookup",value:function(i){return i!==void 0&&!(!this.options.returnNull&&i===null)&&!(!this.options.returnEmptyString&&i==="")}},{key:"getResource",value:function(i,s,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(i,s,o,a):this.resourceStore.getResource(i,s,o,a)}}],[{key:"hasDefaultValue",value:function(i){var s="defaultValue";for(var o in i)if(Object.prototype.hasOwnProperty.call(i,o)&&s===o.substring(0,s.length)&&i[o]!==void 0)return!0;return!1}}]),r}(Ue);function _i(t){return t.charAt(0).toUpperCase()+t.slice(1)}var ac=function(){function t(e){le(this,t),this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Oe.create("languageUtils")}return fe(t,[{key:"getScriptPartFromCode",value:function(r){if(!r||r.indexOf("-")<0)return null;var n=r.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}},{key:"getLanguagePartFromCode",value:function(r){if(!r||r.indexOf("-")<0)return r;var n=r.split("-");return this.formatLanguageCode(n[0])}},{key:"formatLanguageCode",value:function(r){if(typeof r=="string"&&r.indexOf("-")>-1){var n=["hans","hant","latn","cyrl","cans","mong","arab"],i=r.split("-");return this.options.lowerCaseLng?i=i.map(function(s){return s.toLowerCase()}):i.length===2?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),n.indexOf(i[1].toLowerCase())>-1&&(i[1]=_i(i[1].toLowerCase()))):i.length===3&&(i[0]=i[0].toLowerCase(),i[1].length===2&&(i[1]=i[1].toUpperCase()),i[0]!=="sgn"&&i[2].length===2&&(i[2]=i[2].toUpperCase()),n.indexOf(i[1].toLowerCase())>-1&&(i[1]=_i(i[1].toLowerCase())),n.indexOf(i[2].toLowerCase())>-1&&(i[2]=_i(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?r.toLowerCase():r}},{key:"isSupportedCode",value:function(r){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(r=this.getLanguagePartFromCode(r)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(r)>-1}},{key:"getBestMatchFromCodes",value:function(r){var n=this;if(!r)return null;var i;return r.forEach(function(s){if(!i){var o=n.formatLanguageCode(s);(!n.options.supportedLngs||n.isSupportedCode(o))&&(i=o)}}),!i&&this.options.supportedLngs&&r.forEach(function(s){if(!i){var o=n.getLanguagePartFromCode(s);if(n.isSupportedCode(o))return i=o;i=n.options.supportedLngs.find(function(a){if(a===o)return a;if(!(a.indexOf("-")<0&&o.indexOf("-")<0)&&a.indexOf(o)===0)return a})}}),i||(i=this.getFallbackCodes(this.options.fallbackLng)[0]),i}},{key:"getFallbackCodes",value:function(r,n){if(!r)return[];if(typeof r=="function"&&(r=r(n)),typeof r=="string"&&(r=[r]),Object.prototype.toString.apply(r)==="[object Array]")return r;if(!n)return r.default||[];var i=r[n];return i||(i=r[this.getScriptPartFromCode(n)]),i||(i=r[this.formatLanguageCode(n)]),i||(i=r[this.getLanguagePartFromCode(n)]),i||(i=r.default),i||[]}},{key:"toResolveHierarchy",value:function(r,n){var i=this,s=this.getFallbackCodes(n||this.options.fallbackLng||[],r),o=[],a=function(c){!c||(i.isSupportedCode(c)?o.push(c):i.logger.warn("rejecting language code not found in supportedLngs: ".concat(c)))};return typeof r=="string"&&r.indexOf("-")>-1?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(r)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(r)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(r))):typeof r=="string"&&a(this.formatLanguageCode(r)),s.forEach(function(u){o.indexOf(u)<0&&a(i.formatLanguageCode(u))}),o}}]),t}(),ed=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],td={1:function(e){return Number(e>1)},2:function(e){return Number(e!=1)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(e==1?0:e>=2&&e<=4?1:2)},7:function(e){return Number(e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(e==1?0:e==2?1:e!=8&&e!=11?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(e==1?0:e==2?1:e<7?2:e<11?3:4)},11:function(e){return Number(e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(e!==0)},14:function(e){return Number(e==1?0:e==2?1:e==3?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:e!==0?1:2)},17:function(e){return Number(e==1||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(e==0?0:e==1?1:2)},19:function(e){return Number(e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(e==1?0:e==0||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3)}},rd=["v1","v2","v3"],uc={zero:0,one:1,two:2,few:3,many:4,other:5};function nd(){var t={};return ed.forEach(function(e){e.lngs.forEach(function(r){t[r]={numbers:e.nr,plurals:td[e.fc]}})}),t}var id=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};le(this,t),this.languageUtils=e,this.options=r,this.logger=Oe.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl=="undefined"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=nd()}return fe(t,[{key:"addRule",value:function(r,n){this.rules[r]=n}},{key:"getRule",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(r,{type:n.ordinal?"ordinal":"cardinal"})}catch(i){return}return this.rules[r]||this.rules[this.languageUtils.getLanguagePartFromCode(r)]}},{key:"needsPlural",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(r,n);return this.shouldUseIntlApi()?i&&i.resolvedOptions().pluralCategories.length>1:i&&i.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(r,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(r,i).map(function(s){return"".concat(n).concat(s)})}},{key:"getSuffixes",value:function(r){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getRule(r,i);return s?this.shouldUseIntlApi()?s.resolvedOptions().pluralCategories.sort(function(o,a){return uc[o]-uc[a]}).map(function(o){return"".concat(n.options.prepend).concat(o)}):s.numbers.map(function(o){return n.getSuffix(r,o,i)}):[]}},{key:"getSuffix",value:function(r,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=this.getRule(r,i);return s?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(s.select(n)):this.getSuffixRetroCompatible(s,n):(this.logger.warn("no plural rule found for: ".concat(r)),"")}},{key:"getSuffixRetroCompatible",value:function(r,n){var i=this,s=r.noAbs?r.plurals(n):r.plurals(Math.abs(n)),o=r.numbers[s];this.options.simplifyPluralSuffix&&r.numbers.length===2&&r.numbers[0]===1&&(o===2?o="plural":o===1&&(o=""));var a=function(){return i.options.prepend&&o.toString()?i.options.prepend+o.toString():o.toString()};return this.options.compatibilityJSON==="v1"?o===1?"":typeof o=="number"?"_plural_".concat(o.toString()):a():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&r.numbers.length===2&&r.numbers[0]===1?a():this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString()}},{key:"shouldUseIntlApi",value:function(){return!rd.includes(this.options.compatibilityJSON)}}]),t}();function cc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ve(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cc(Object(r),!0).forEach(function(n){Te(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lc(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=$p(t,e,r);return!s&&i&&typeof r=="string"&&(s=mn(t,r,n),s===void 0&&(s=mn(e,r,n))),s}var sd=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};le(this,t),this.logger=Oe.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(r){return r},this.init(e)}return fe(t,[{key:"init",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};r.interpolation||(r.interpolation={escapeValue:!0});var n=r.interpolation;this.escape=n.escape!==void 0?n.escape:Wp,this.escapeValue=n.escapeValue!==void 0?n.escapeValue:!0,this.useRawValueToEscape=n.useRawValueToEscape!==void 0?n.useRawValueToEscape:!1,this.prefix=n.prefix?ct(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?ct(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?ct(n.nestingPrefix):n.nestingPrefixEscaped||ct("$t("),this.nestingSuffix=n.nestingSuffix?ct(n.nestingSuffix):n.nestingSuffixEscaped||ct(")"),this.nestingOptionsSeparator=n.nestingOptionsSeparator?n.nestingOptionsSeparator:n.nestingOptionsSeparator||",",this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.alwaysFormat=n.alwaysFormat!==void 0?n.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var r="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(r,"g");var n="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(n,"g");var i="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(i,"g")}},{key:"interpolate",value:function(r,n,i,s){var o=this,a,u,c,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function f(S){return S.replace(/\$/g,"$$$$")}var p=function(N){if(N.indexOf(o.formatSeparator)<0){var T=lc(n,l,N,o.options.keySeparator,o.options.ignoreJSONStructure);return o.alwaysFormat?o.format(T,void 0,i,ve(ve(ve({},s),n),{},{interpolationkey:N})):T}var b=N.split(o.formatSeparator),h=b.shift().trim(),d=b.join(o.formatSeparator).trim();return o.format(lc(n,l,h,o.options.keySeparator,o.options.ignoreJSONStructure),d,i,ve(ve(ve({},s),n),{},{interpolationkey:h}))};this.resetRegExp();var g=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,v=s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,E=[{regex:this.regexpUnescape,safeValue:function(N){return f(N)}},{regex:this.regexp,safeValue:function(N){return o.escapeValue?f(o.escape(N)):f(N)}}];return E.forEach(function(S){for(c=0;a=S.regex.exec(r);){var N=a[1].trim();if(u=p(N),u===void 0)if(typeof g=="function"){var T=g(r,a,s);u=typeof T=="string"?T:""}else if(s&&Object.prototype.hasOwnProperty.call(s,N))u="";else if(v){u=a[0];continue}else o.logger.warn("missed to pass in variable ".concat(N," for interpolating ").concat(r)),u="";else typeof u!="string"&&!o.useRawValueToEscape&&(u=Zu(u));var b=S.safeValue(u);if(r=r.replace(a[0],b),v?(S.regex.lastIndex+=u.length,S.regex.lastIndex-=a[0].length):S.regex.lastIndex=0,c++,c>=o.maxReplaces)break}}),r}},{key:"nest",value:function(r,n){var i=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,a,u;function c(g,v){var E=this.nestingOptionsSeparator;if(g.indexOf(E)<0)return g;var S=g.split(new RegExp("".concat(E,"[ ]*{"))),N="{".concat(S[1]);g=S[0],N=this.interpolate(N,u);var T=N.match(/'/g),b=N.match(/"/g);(T&&T.length%2==0&&!b||b.length%2!=0)&&(N=N.replace(/'/g,'"'));try{u=JSON.parse(N),v&&(u=ve(ve({},v),u))}catch(h){return this.logger.warn("failed parsing options string in nesting for key ".concat(g),h),"".concat(g).concat(E).concat(N)}return delete u.defaultValue,g}for(;o=this.nestingRegexp.exec(r);){var l=[];u=ve({},s),u=u.replace&&typeof u.replace!="string"?u.replace:u,u.applyPostProcessor=!1,delete u.defaultValue;var f=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){var p=o[1].split(this.formatSeparator).map(function(g){return g.trim()});o[1]=p.shift(),l=p,f=!0}if(a=n(c.call(this,o[1].trim(),u),u),a&&o[0]===r&&typeof a!="string")return a;typeof a!="string"&&(a=Zu(a)),a||(this.logger.warn("missed to resolve ".concat(o[1]," for nesting ").concat(r)),a=""),f&&(a=l.reduce(function(g,v){return i.format(g,v,s.lng,ve(ve({},s),{},{interpolationkey:o[1].trim()}))},a.trim())),r=r.replace(o[0],a),this.regexp.lastIndex=0}return r}}]),t}();function fc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Fe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fc(Object(r),!0).forEach(function(n){Te(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function od(t){var e=t.toLowerCase().trim(),r={};if(t.indexOf("(")>-1){var n=t.split("(");e=n[0].toLowerCase().trim();var i=n[1].substring(0,n[1].length-1);if(e==="currency"&&i.indexOf(":")<0)r.currency||(r.currency=i.trim());else if(e==="relativetime"&&i.indexOf(":")<0)r.range||(r.range=i.trim());else{var s=i.split(";");s.forEach(function(o){if(!!o){var a=o.split(":"),u=Fi(a),c=u[0],l=u.slice(1),f=l.join(":").trim().replace(/^'+|'+$/g,"");r[c.trim()]||(r[c.trim()]=f),f==="false"&&(r[c.trim()]=!1),f==="true"&&(r[c.trim()]=!0),isNaN(f)||(r[c.trim()]=parseInt(f,10))}})}}return{formatName:e,formatOptions:r}}function lt(t){var e={};return function(n,i,s){var o=i+JSON.stringify(s),a=e[o];return a||(a=t(i,s),e[o]=a),a(n)}}var ad=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};le(this,t),this.logger=Oe.create("formatter"),this.options=e,this.formats={number:lt(function(r,n){var i=new Intl.NumberFormat(r,Fe({},n));return function(s){return i.format(s)}}),currency:lt(function(r,n){var i=new Intl.NumberFormat(r,Fe(Fe({},n),{},{style:"currency"}));return function(s){return i.format(s)}}),datetime:lt(function(r,n){var i=new Intl.DateTimeFormat(r,Fe({},n));return function(s){return i.format(s)}}),relativetime:lt(function(r,n){var i=new Intl.RelativeTimeFormat(r,Fe({},n));return function(s){return i.format(s,n.range||"day")}}),list:lt(function(r,n){var i=new Intl.ListFormat(r,Fe({},n));return function(s){return i.format(s)}})},this.init(e)}return fe(t,[{key:"init",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},i=n.interpolation;this.formatSeparator=i.formatSeparator?i.formatSeparator:i.formatSeparator||","}},{key:"add",value:function(r,n){this.formats[r.toLowerCase().trim()]=n}},{key:"addCached",value:function(r,n){this.formats[r.toLowerCase().trim()]=lt(n)}},{key:"format",value:function(r,n,i){var s=this,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=n.split(this.formatSeparator),u=a.reduce(function(c,l){var f=od(l),p=f.formatName,g=f.formatOptions;if(s.formats[p]){var v=c;try{var E=o&&o.formatParams&&o.formatParams[o.interpolationkey]||{},S=E.locale||E.lng||o.locale||o.lng||i;v=s.formats[p](c,S,Fe(Fe(Fe({},g),o),E))}catch(N){s.logger.warn(N)}return v}else s.logger.warn("there was no format function for ".concat(p));return c},r);return u}}]),t}();function hc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function pc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hc(Object(r),!0).forEach(function(n){Te(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ud(t){var e=cd();return function(){var n=he(t),i;if(e){var s=he(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return He(this,i)}}function cd(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function ld(t,e){t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)}var fd=function(t){ut(r,t);var e=ud(r);function r(n,i,s){var o,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return le(this,r),o=e.call(this),gn&&Ue.call(ye(o)),o.backend=n,o.store=i,o.services=s,o.languageUtils=s.languageUtils,o.options=a,o.logger=Oe.create("backendConnector"),o.waitingReads=[],o.maxParallelReads=a.maxParallelReads||10,o.readingCalls=0,o.maxRetries=a.maxRetries>=0?a.maxRetries:5,o.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(s,a.backend,a),o}return fe(r,[{key:"queueLoad",value:function(i,s,o,a){var u=this,c={},l={},f={},p={};return i.forEach(function(g){var v=!0;s.forEach(function(E){var S="".concat(g,"|").concat(E);!o.reload&&u.store.hasResourceBundle(g,E)?u.state[S]=2:u.state[S]<0||(u.state[S]===1?l[S]===void 0&&(l[S]=!0):(u.state[S]=1,v=!1,l[S]===void 0&&(l[S]=!0),c[S]===void 0&&(c[S]=!0),p[E]===void 0&&(p[E]=!0)))}),v||(f[g]=!0)}),(Object.keys(c).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(c),pending:Object.keys(l),toLoadLanguages:Object.keys(f),toLoadNamespaces:Object.keys(p)}}},{key:"loaded",value:function(i,s,o){var a=i.split("|"),u=a[0],c=a[1];s&&this.emit("failedLoading",u,c,s),o&&this.store.addResourceBundle(u,c,o),this.state[i]=s?-1:2;var l={};this.queue.forEach(function(f){zp(f.loaded,[u],c),ld(f,i),s&&f.errors.push(s),f.pendingCount===0&&!f.done&&(Object.keys(f.loaded).forEach(function(p){l[p]||(l[p]={});var g=f.loaded[p];g.length&&g.forEach(function(v){l[p][v]===void 0&&(l[p][v]=!0)})}),f.done=!0,f.errors.length?f.callback(f.errors):f.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(function(f){return!f.done})}},{key:"read",value:function(i,s,o){var a=this,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,l=arguments.length>5?arguments[5]:void 0;if(!i.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:i,ns:s,fcName:o,tried:u,wait:c,callback:l});return}this.readingCalls++;var f=function(E,S){if(a.readingCalls--,a.waitingReads.length>0){var N=a.waitingReads.shift();a.read(N.lng,N.ns,N.fcName,N.tried,N.wait,N.callback)}if(E&&S&&u<a.maxRetries){setTimeout(function(){a.read.call(a,i,s,o,u+1,c*2,l)},c);return}l(E,S)},p=this.backend[o].bind(this.backend);if(p.length===2){try{var g=p(i,s);g&&typeof g.then=="function"?g.then(function(v){return f(null,v)}).catch(f):f(null,g)}catch(v){f(v)}return}return p(i,s,f)}},{key:"prepareLoading",value:function(i,s){var o=this,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),u&&u();typeof i=="string"&&(i=this.languageUtils.toResolveHierarchy(i)),typeof s=="string"&&(s=[s]);var c=this.queueLoad(i,s,a,u);if(!c.toLoad.length)return c.pending.length||u(),null;c.toLoad.forEach(function(l){o.loadOne(l)})}},{key:"load",value:function(i,s,o){this.prepareLoading(i,s,{},o)}},{key:"reload",value:function(i,s,o){this.prepareLoading(i,s,{reload:!0},o)}},{key:"loadOne",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=i.split("|"),u=a[0],c=a[1];this.read(u,c,"read",void 0,void 0,function(l,f){l&&s.logger.warn("".concat(o,"loading namespace ").concat(c," for language ").concat(u," failed"),l),!l&&f&&s.logger.log("".concat(o,"loaded namespace ").concat(c," for language ").concat(u),f),s.loaded(i,l,f)})}},{key:"saveMissing",value:function(i,s,o,a,u){var c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(s)){this.logger.warn('did not save key "'.concat(o,'" as the namespace "').concat(s,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(o==null||o==="")){if(this.backend&&this.backend.create){var f=pc(pc({},c),{},{isUpdate:u}),p=this.backend.create.bind(this.backend);if(p.length<6)try{var g;p.length===5?g=p(i,s,o,a,f):g=p(i,s,o,a),g&&typeof g.then=="function"?g.then(function(v){return l(null,v)}).catch(l):l(null,g)}catch(v){l(v)}else p(i,s,o,a,l,f)}!i||!i[0]||this.store.addResource(i[0],s,o,a)}}}]),r}(Ue);function dc(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var r={};if(Z(e[1])==="object"&&(r=e[1]),typeof e[1]=="string"&&(r.defaultValue=e[1]),typeof e[2]=="string"&&(r.tDescription=e[2]),Z(e[2])==="object"||Z(e[3])==="object"){var n=e[3]||e[2];Object.keys(n).forEach(function(i){r[i]=n[i]})}return r},interpolation:{escapeValue:!0,format:function(e,r,n,i){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function gc(t){return typeof t.ns=="string"&&(t.ns=[t.ns]),typeof t.fallbackLng=="string"&&(t.fallbackLng=[t.fallbackLng]),typeof t.fallbackNS=="string"&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function mc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ne(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mc(Object(r),!0).forEach(function(n){Te(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hd(t){var e=pd();return function(){var n=he(t),i;if(e){var s=he(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return He(this,i)}}function pd(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function vn(){}function dd(t){var e=Object.getOwnPropertyNames(Object.getPrototypeOf(t));e.forEach(function(r){typeof t[r]=="function"&&(t[r]=t[r].bind(t))})}var bn=function(t){ut(r,t);var e=hd(r);function r(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;if(le(this,r),n=e.call(this),gn&&Ue.call(ye(n)),n.options=gc(i),n.services={},n.logger=Oe,n.modules={external:[]},dd(ye(n)),s&&!n.isInitialized&&!i.isClone){if(!n.options.initImmediate)return n.init(i,s),He(n,ye(n));setTimeout(function(){n.init(i,s)},0)}return n}return fe(r,[{key:"init",value:function(){var i=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;typeof s=="function"&&(o=s,s={}),!s.defaultNS&&s.defaultNS!==!1&&s.ns&&(typeof s.ns=="string"?s.defaultNS=s.ns:s.ns.indexOf("translation")<0&&(s.defaultNS=s.ns[0]));var a=dc();this.options=Ne(Ne(Ne({},a),this.options),gc(s)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=Ne(Ne({},a.interpolation),this.options.interpolation)),s.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=s.keySeparator),s.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=s.nsSeparator);function u(N){return N?typeof N=="function"?new N:N:null}if(!this.options.isClone){this.modules.logger?Oe.init(u(this.modules.logger),this.options):Oe.init(null,this.options);var c;this.modules.formatter?c=this.modules.formatter:typeof Intl!="undefined"&&(c=ad);var l=new ac(this.options);this.store=new Jp(this.options.resources,this.options);var f=this.services;f.logger=Oe,f.resourceStore=this.store,f.languageUtils=l,f.pluralResolver=new id(l,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),c&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(f.formatter=u(c),f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new sd(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new fd(u(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",function(N){for(var T=arguments.length,b=new Array(T>1?T-1:0),h=1;h<T;h++)b[h-1]=arguments[h];i.emit.apply(i,[N].concat(b))}),this.modules.languageDetector&&(f.languageDetector=u(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=u(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new oc(this.services,this.options),this.translator.on("*",function(N){for(var T=arguments.length,b=new Array(T>1?T-1:0),h=1;h<T;h++)b[h-1]=arguments[h];i.emit.apply(i,[N].concat(b))}),this.modules.external.forEach(function(N){N.init&&N.init(i)})}if(this.format=this.options.interpolation.format,o||(o=vn),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var p=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);p.length>0&&p[0]!=="dev"&&(this.options.lng=p[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var g=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];g.forEach(function(N){i[N]=function(){var T;return(T=i.store)[N].apply(T,arguments)}});var v=["addResource","addResources","addResourceBundle","removeResourceBundle"];v.forEach(function(N){i[N]=function(){var T;return(T=i.store)[N].apply(T,arguments),i}});var E=Pt(),S=function(){var T=function(h,d){i.isInitialized&&!i.initializedStoreOnce&&i.logger.warn("init: i18next is already initialized. You should call init just once!"),i.isInitialized=!0,i.options.isClone||i.logger.log("initialized",i.options),i.emit("initialized",i.options),E.resolve(d),o(h,d)};if(i.languages&&i.options.compatibilityAPI!=="v1"&&!i.isInitialized)return T(null,i.t.bind(i));i.changeLanguage(i.options.lng,T)};return this.options.resources||!this.options.initImmediate?S():setTimeout(S,0),E}},{key:"loadResources",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vn,a=o,u=typeof i=="string"?i:this.language;if(typeof i=="function"&&(a=i),!this.options.resources||this.options.partialBundledLanguages){if(u&&u.toLowerCase()==="cimode")return a();var c=[],l=function(g){if(!!g){var v=s.services.languageUtils.toResolveHierarchy(g);v.forEach(function(E){c.indexOf(E)<0&&c.push(E)})}};if(u)l(u);else{var f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.forEach(function(p){return l(p)})}this.options.preload&&this.options.preload.forEach(function(p){return l(p)}),this.services.backendConnector.load(c,this.options.ns,function(p){!p&&!s.resolvedLanguage&&s.language&&s.setResolvedLanguage(s.language),a(p)})}else a(null)}},{key:"reloadResources",value:function(i,s,o){var a=Pt();return i||(i=this.languages),s||(s=this.options.ns),o||(o=vn),this.services.backendConnector.reload(i,s,function(u){a.resolve(),o(u)}),a}},{key:"use",value:function(i){if(!i)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!i.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return i.type==="backend"&&(this.modules.backend=i),(i.type==="logger"||i.log&&i.warn&&i.error)&&(this.modules.logger=i),i.type==="languageDetector"&&(this.modules.languageDetector=i),i.type==="i18nFormat"&&(this.modules.i18nFormat=i),i.type==="postProcessor"&&nc.addPostProcessor(i),i.type==="formatter"&&(this.modules.formatter=i),i.type==="3rdParty"&&this.modules.external.push(i),this}},{key:"setResolvedLanguage",value:function(i){if(!(!i||!this.languages)&&!(["cimode","dev"].indexOf(i)>-1))for(var s=0;s<this.languages.length;s++){var o=this.languages[s];if(!(["cimode","dev"].indexOf(o)>-1)&&this.store.hasLanguageSomeTranslations(o)){this.resolvedLanguage=o;break}}}},{key:"changeLanguage",value:function(i,s){var o=this;this.isLanguageChangingTo=i;var a=Pt();this.emit("languageChanging",i);var u=function(p){o.language=p,o.languages=o.services.languageUtils.toResolveHierarchy(p),o.resolvedLanguage=void 0,o.setResolvedLanguage(p)},c=function(p,g){g?(u(g),o.translator.changeLanguage(g),o.isLanguageChangingTo=void 0,o.emit("languageChanged",g),o.logger.log("languageChanged",g)):o.isLanguageChangingTo=void 0,a.resolve(function(){return o.t.apply(o,arguments)}),s&&s(p,function(){return o.t.apply(o,arguments)})},l=function(p){!i&&!p&&o.services.languageDetector&&(p=[]);var g=typeof p=="string"?p:o.services.languageUtils.getBestMatchFromCodes(p);g&&(o.language||u(g),o.translator.language||o.translator.changeLanguage(g),o.services.languageDetector&&o.services.languageDetector.cacheUserLanguage&&o.services.languageDetector.cacheUserLanguage(g)),o.loadResources(g,function(v){c(v,g)})};return!i&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!i&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(i),a}},{key:"getFixedT",value:function(i,s,o){var a=this,u=function c(l,f){var p;if(Z(f)!=="object"){for(var g=arguments.length,v=new Array(g>2?g-2:0),E=2;E<g;E++)v[E-2]=arguments[E];p=a.options.overloadTranslationOptionHandler([l,f].concat(v))}else p=Ne({},f);p.lng=p.lng||c.lng,p.lngs=p.lngs||c.lngs,p.ns=p.ns||c.ns,p.keyPrefix=p.keyPrefix||o||c.keyPrefix;var S=a.options.keySeparator||".",N;return p.keyPrefix&&Array.isArray(l)?N=l.map(function(T){return"".concat(p.keyPrefix).concat(S).concat(T)}):N=p.keyPrefix?"".concat(p.keyPrefix).concat(S).concat(l):l,a.t(N,p)};return typeof i=="string"?u.lng=i:u.lngs=i,u.ns=s,u.keyPrefix=o,u}},{key:"t",value:function(){var i;return this.translator&&(i=this.translator).translate.apply(i,arguments)}},{key:"exists",value:function(){var i;return this.translator&&(i=this.translator).exists.apply(i,arguments)}},{key:"setDefaultNamespace",value:function(i){this.options.defaultNS=i}},{key:"hasLoadedNamespace",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var a=o.lng||this.resolvedLanguage||this.languages[0],u=this.options?this.options.fallbackLng:!1,c=this.languages[this.languages.length-1];if(a.toLowerCase()==="cimode")return!0;var l=function(g,v){var E=s.services.backendConnector.state["".concat(g,"|").concat(v)];return E===-1||E===2};if(o.precheck){var f=o.precheck(this,l);if(f!==void 0)return f}return!!(this.hasResourceBundle(a,i)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(a,i)&&(!u||l(c,i)))}},{key:"loadNamespaces",value:function(i,s){var o=this,a=Pt();return this.options.ns?(typeof i=="string"&&(i=[i]),i.forEach(function(u){o.options.ns.indexOf(u)<0&&o.options.ns.push(u)}),this.loadResources(function(u){a.resolve(),s&&s(u)}),a):(s&&s(),Promise.resolve())}},{key:"loadLanguages",value:function(i,s){var o=Pt();typeof i=="string"&&(i=[i]);var a=this.options.preload||[],u=i.filter(function(c){return a.indexOf(c)<0});return u.length?(this.options.preload=a.concat(u),this.loadResources(function(c){o.resolve(),s&&s(c)}),o):(s&&s(),Promise.resolve())}},{key:"dir",value:function(i){if(i||(i=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!i)return"rtl";var s=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],o=this.services&&this.services.languageUtils||new ac(dc());return s.indexOf(o.getLanguagePartFromCode(i))>-1||i.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var i=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vn,a=Ne(Ne(Ne({},this.options),s),{isClone:!0}),u=new r(a);(s.debug!==void 0||s.prefix!==void 0)&&(u.logger=u.logger.clone(s));var c=["store","services","language"];return c.forEach(function(l){u[l]=i[l]}),u.services=Ne({},this.services),u.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},u.translator=new oc(u.services,u.options),u.translator.on("*",function(l){for(var f=arguments.length,p=new Array(f>1?f-1:0),g=1;g<f;g++)p[g-1]=arguments[g];u.emit.apply(u,[l].concat(p))}),u.init(a,o),u.translator.options=u.options,u.translator.backendConnector.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},u}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),r}(Ue);Te(bn,"createInstance",function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new bn(t,e)});var j=bn.createInstance();j.createInstance=bn.createInstance;var um=j.createInstance,cm=j.dir,lm=j.init,fm=j.loadResources,hm=j.reloadResources,pm=j.use,dm=j.changeLanguage,gm=j.getFixedT,mm=j.t,ym=j.exists,vm=j.setDefaultNamespace,bm=j.hasLoadedNamespace,wm=j.loadNamespaces,xm=j.loadLanguages;var ji=class extends K.PluginSettingTab{constructor(e,r){super(e,r);this.plugin=r}display(){let{containerEl:e}=this;e.empty(),new K.Setting(e).setName(j.t("Tag_o")).setDesc(j.t("Tag")).addText(r=>r.setPlaceholder("book").setValue(this.plugin.settings.tag).onChange(async n=>{this.plugin.settings.tag=n,await this.plugin.saveSettings()})),this.containerEl.createEl("h2",{text:j.t("import")}),new K.Setting(e).setName(j.t("Library_o")).setDesc(j.t("Library")).addTextArea(r=>{r.setValue(this.plugin.settings.libraries.join(`
`)).onChange(async n=>{this.plugin.settings.libraries=n.split(`
`).map(i=>i.trim()),await this.plugin.saveSettings()})}),new K.Setting(e).setName(j.t("byDrag_o")).setDesc(j.t("byDrag")).addToggle(r=>{r.setValue(this.plugin.settings.byDrag).onChange(async n=>{this.plugin.settings.byDrag=n,await this.plugin.saveSettings()})}),this.containerEl.createEl("h2",{text:j.t("storage")}),new K.Setting(e).setName(j.t("Save path_o")).setDesc(j.t("Save path")).addText(r=>r.setValue(this.plugin.settings.savePath).onChange(async n=>{this.plugin.settings.savePath=n,await this.plugin.saveSettings()})),new K.Setting(e).setName(j.t("Assets path_o")).setDesc(j.t("Assets path")).addText(r=>r.setValue(this.plugin.settings.assetsPath).onChange(async n=>{this.plugin.settings.assetsPath=n,await this.plugin.saveSettings()})),this.containerEl.createEl("h2",{text:j.t("display")}),new K.Setting(e).setName(j.t("Hierarchy depth_o")).setDesc(j.t("Hierarchy depth")).addSlider(r=>{r.setLimits(0,5,1).setDynamicTooltip().setValue(this.plugin.settings.granularity).onChange(async n=>{this.plugin.settings.granularity=n,await this.plugin.saveSettings()})}),new K.Setting(e).setName("moc file name").setDesc("filename for moc file.").addText(r=>r.setValue(this.plugin.settings.mocName).onChange(async n=>{this.plugin.settings.mocName=n,await this.plugin.saveSettings()})),new K.Setting(e).setName("notePropertysTemplate").setDesc("notePropertysTemplate.").addTextArea(r=>{r.setValue(this.plugin.settings.notePropertysTemplate).onChange(async n=>{this.plugin.settings.notePropertysTemplate=n,await this.plugin.saveSettings()})}),new K.Setting(e).setName("oneNote").setDesc("Convert the entire book into a single markdown file.").addToggle(r=>{r.setValue(this.plugin.settings.oneNote).onChange(async n=>{this.plugin.settings.oneNote=n,await this.plugin.saveSettings()})}),new K.Setting(e).setName("oneFolder").setDesc("Place oneNote in a folder with the same name.").addToggle(r=>{r.setValue(this.plugin.settings.oneFolder).onChange(async n=>{this.plugin.settings.oneFolder=n,await this.plugin.saveSettings()})}),new K.Setting(e).setName(j.t("Propertys template_o")).setDesc(j.t("Propertys template")).addTextArea(r=>{r.setValue(this.plugin.settings.mocPropertysTemplate).onChange(async n=>{this.plugin.settings.mocPropertysTemplate=n,await this.plugin.saveSettings()})}),this.containerEl.createEl("h2",{text:j.t("content")}),new K.Setting(e).setName(j.t("imageFormat_o")).setDesc(j.t("imageFormat")).addDropdown(r=>r.addOptions({"![](imagePath)":"![](imagePath)","![[imagePath]]":"![[imagePath]]","![[imagePath|caption]]":"![[imagePath|caption]]"}).setValue(this.plugin.settings.imageFormat).onChange(async n=>{this.plugin.settings.imageFormat=n,await this.plugin.saveSettings()})),this.containerEl.createEl("h2",{text:j.t("helper")}),new K.Setting(e).setName(j.t("Auto open right panel_o")).setDesc(j.t("Auto open right panel")).addToggle(r=>{r.setValue(this.plugin.settings.autoOpenRightPanel).onChange(async n=>{this.plugin.settings.autoOpenRightPanel=n,await this.plugin.saveSettings()})}),this.containerEl.createEl("h2",{text:j.t("developing")}),new K.Setting(e).setName(j.t("Remove duplicate folders_o")).setDesc(j.t("Remove duplicate folders")).addToggle(r=>{r.setValue(this.plugin.settings.removeDuplicateFolders).onChange(async n=>{this.plugin.settings.removeDuplicateFolders=n,await this.plugin.saveSettings()})}),new K.Setting(e).setName("more log").setDesc("more log").addToggle(r=>{r.setValue(this.plugin.settings.moreLog).onChange(async n=>{this.plugin.settings.moreLog=n,await this.plugin.saveSettings()})})}};var Se=ce(ln());var yc=ce(require("obsidian"));function vc(t,e){let r=t.vault.getMarkdownFiles(),n=[];return r.forEach(i=>{let s=t.metadataCache.getFileCache(i)?.frontmatter?.tags;!s||s.includes(e)&&n.push(i)}),n}function wn(t){return`---
`+(0,yc.stringifyYaml)(t)+`
---`}function It(t,e){return Object.keys(e).reduce((r,n)=>r.replaceAll(`{{${n}}}`,e[n]),t)}var H=ce(require("path"));var qi=ce(require("obsidian"));var Ri={};Tn(Ri,{"Assets path":()=>_c,"Assets path_o":()=>Mc,"Auto open right panel":()=>Wc,"Auto open right panel_o":()=>Vc,"Hierarchy depth":()=>kc,"Hierarchy depth_o":()=>Rc,Library:()=>Cc,Library_o:()=>Dc,"Propertys template":()=>Xc,"Propertys template_o":()=>qc,"Remove duplicate folders":()=>Gc,"Remove duplicate folders_o":()=>Kc,"Save path":()=>Fc,"Save path_o":()=>Ac,Tag:()=>Nc,Tag_o:()=>Oc,byDrag:()=>Ic,byDrag_o:()=>Pc,content:()=>Bc,default:()=>gd,developing:()=>Hc,display:()=>jc,helper:()=>$c,imageFormat:()=>zc,imageFormat_o:()=>Uc,import:()=>Sc,"import-epub":()=>bc,"no book in libraries":()=>Ec,"no libraries":()=>xc,storage:()=>Lc,"sync-libraries":()=>wc,"sync-libraries_r":()=>Tc});var bc="Import epub to your vault",wc="Import all epub from libraries to your vault",xc="You have not added any library to the settings page",Ec="There is no epub in the libraries",Tc="Successfully imported ${n} books",Oc="Tag",Nc="The tag is used to identify book objects",Sc="Import",Dc="Library",Cc="The plugin will search for .epub files from these paths. Please enter an absolute path, not a relative path in obsidan vault.",Pc="Import by drag",Ic="Import .epub file by drag it to obsidian vault. The .epub  file will be deleted after importing.",Lc="Storage",Ac="Save path",Fc="The plugin will save the imported book to this path.",Mc="Assets path",_c="The plugin will save the assets of the imported book to this path.",jc="Display/Indexing",Rc="Hierarchy depth",kc="Determine the Hierarchy depth of generated markdown notes.",qc="Propertys template",Xc="The plugin will add these propertys to the imported book.",Bc="Content/Format",Uc="imageFormat",zc="The type of imageFormat. caption only for chinese now.",$c="Helper",Vc="Auto open right panel",Wc="The plugin will open the book note on right panel when you open a book.",Hc="Developing",Kc="Remove duplicate folders",Gc="Remove duplicate folders(risky, for users who understand the usefulness of this option, or developers).",gd={"import-epub":bc,"sync-libraries":wc,"no libraries":xc,"no book in libraries":Ec,"sync-libraries_r":Tc,Tag_o:Oc,Tag:Nc,import:Sc,Library_o:Dc,Library:Cc,byDrag_o:Pc,byDrag:Ic,storage:Lc,"Save path_o":Ac,"Save path":Fc,"Assets path_o":Mc,"Assets path":_c,display:jc,"Hierarchy depth_o":Rc,"Hierarchy depth":kc,"Propertys template_o":qc,"Propertys template":Xc,content:Bc,imageFormat_o:Uc,imageFormat:zc,helper:$c,"Auto open right panel_o":Vc,"Auto open right panel":Wc,developing:Hc,"Remove duplicate folders_o":Kc,"Remove duplicate folders":Gc};var ki={};Tn(ki,{"Assets path":()=>hl,"Assets path_o":()=>fl,"Auto open right panel":()=>Tl,"Auto open right panel_o":()=>El,"Hierarchy depth":()=>gl,"Hierarchy depth_o":()=>dl,Library:()=>sl,Library_o:()=>il,"Propertys template":()=>yl,"Propertys template_o":()=>ml,"Remove duplicate folders":()=>Sl,"Remove duplicate folders_o":()=>Nl,"Save path":()=>ll,"Save path_o":()=>cl,Tag:()=>rl,Tag_o:()=>tl,byDrag:()=>al,byDrag_o:()=>ol,content:()=>vl,default:()=>md,developing:()=>Ol,display:()=>pl,helper:()=>xl,imageFormat:()=>wl,imageFormat_o:()=>bl,import:()=>nl,"import-epub":()=>Yc,"no book in libraries":()=>Zc,"no libraries":()=>Qc,storage:()=>ul,"sync-libraries":()=>Jc,"sync-libraries_r":()=>el});var Yc="\u5BFC\u5165epub\u5230\u5E93\u4E2D",Jc="\u5C06\u6240\u6709\u4E66\u5E93\u4E2D\u7684epub\u5BFC\u5165\u5230\u5E93\u4E2D",Qc="\u4F60\u6CA1\u6709\u5728\u8BBE\u7F6E\u9875\u4E2D\u6DFB\u52A0\u4EFB\u4F55\u4E66\u5E93",Zc="\u4E66\u5E93\u91CC\u6CA1\u6709\u4EFB\u4F55epub",el="\u6210\u529F\u5BFC\u5165\u4E86 ${n} \u672C\u4E66",tl="\u6807\u7B7E",rl="\u8FD9\u4E2A\u6807\u7B7E\u7528\u4E8E\u8BC6\u522B\u4E66\u7C4D\u5BF9\u8C61",nl="\u5BFC\u5165",il="\u4E66\u5E93",sl="\u8BE5\u63D2\u4EF6\u5C06\u4ECE\u8FD9\u4E9B\u8DEF\u5F84\u4E2D\u641C\u7D22 .epub \u6587\u4EF6\u3002 \u8BF7\u8F93\u5165\u7EDD\u5BF9\u8DEF\u5F84\uFF0C\u800C\u4E0D\u662Fobsidian vault\u4E2D\u7684\u76F8\u5BF9\u8DEF\u5F84\u3002",ol="\u901A\u8FC7\u62D6\u62FD\u5BFC\u5165",al="\u5C06.epub\u6587\u4EF6\u62D6\u62FD\u5230obsidian\u5E93\u4E2D\u6765\u5BFC\u5165\u5B83\u3002\u5BFC\u5165\u540E\u5C06\u5220\u9664\u8BE5.epub\u6587\u4EF6\u3002",ul="\u5B58\u50A8",cl="\u4FDD\u5B58\u8DEF\u5F84",ll="\u5BFC\u5165\u7684epub\u5C06\u4F1A\u88AB\u4FDD\u5B58\u5230\u8BE5\u8DEF\u5F84\u3002",fl="\u9644\u4EF6\u8DEF\u5F84",hl="\u9644\u4EF6\u5C06\u4F1A\u88AB\u4FDD\u5B58\u5230\u8BE5\u8DEF\u5F84\u3002",pl="\u663E\u793A/\u7D22\u5F15",dl="\u5C42\u7EA7\u6DF1\u5EA6",gl="\u51B3\u5B9A\u751F\u6210\u7684 Markdown \u7B14\u8BB0\u7684\u5C42\u7EA7\u7ED3\u6784\u6DF1\u5EA6\u3002",ml="\u5C5E\u6027\u6A21\u677F",yl="\u5C5E\u6027\u5C06\u4F1A\u88AB\u6DFB\u52A0\u5230\u751F\u6210\u7684 MOC \u6587\u4EF6\u4E2D\u3002",vl="\u5185\u5BB9/\u683C\u5F0F",bl="\u56FE\u7247\u683C\u5F0F",wl="\u56FE\u7247\u7684\u683C\u5F0F\uFF0C\u6807\u6CE8\u73B0\u5728\u4EC5\u652F\u6301\u4E2D\u6587\u3002",xl="\u8F85\u52A9",El="\u81EA\u52A8\u6253\u5F00\u53F3\u680F",Tl="\u4E8E\u4E00\u672C\u4E66\u7C4D\u5185\u6D4F\u89C8\u65F6\uFF0C\u5728\u53F3\u680F\u6253\u5F00MOC\u6587\u4EF6\uFF0C\u4EE5\u4F9B\u5BFC\u822A\u3002",Ol="\u5F00\u53D1",Nl="\u5220\u9664\u91CD\u590D\u6587\u4EF6\u5939",Sl="\u5220\u9664\u91CD\u590D\u7684\u6587\u4EF6\u5939\uFF08\u6709\u98CE\u9669\uFF0C\u4EC5\u9002\u7528\u4E8E\u4E86\u89E3\u6B64\u9009\u9879\u6709\u7528\u7684\u7528\u6237\u6216\u5F00\u53D1\u4EBA\u5458\uFF09\u3002",md={"import-epub":Yc,"sync-libraries":Jc,"no libraries":Qc,"no book in libraries":Zc,"sync-libraries_r":el,Tag_o:tl,Tag:rl,import:nl,Library_o:il,Library:sl,byDrag_o:ol,byDrag:al,storage:ul,"Save path_o":cl,"Save path":ll,"Assets path_o":fl,"Assets path":hl,display:pl,"Hierarchy depth_o":dl,"Hierarchy depth":gl,"Propertys template_o":ml,"Propertys template":yl,content:vl,imageFormat_o:bl,imageFormat:wl,helper:xl,"Auto open right panel_o":El,"Auto open right panel":Tl,developing:Ol,"Remove duplicate folders_o":Nl,"Remove duplicate folders":Sl};var Xi={en:{translation:Ri},zh_cn:{translation:ki}},Dl=Object.keys(Xi).find(t=>t==qi.moment.locale().replace("-","_"))?qi.moment.locale().replace("-","_"):"en";function xn(t){let e=/[<>:"\\/\\|?*]+/g;return t.replace(e,"_")}var Bi=class extends ue.Plugin{constructor(){super(...arguments);this.detachLeaf=!1}async onload(){j.init({lng:Dl,fallbackLng:"en",resources:Xi,returnNull:!1}),this.vaultPath=this.app.vault.adapter.basePath,await this.loadSettings(),this.addSettingTab(new ji(this.app,this)),this.addCommand({id:"import-epub",name:j.t("import-epub"),callback:()=>{new Di(this.app,this.settings.libraries,async e=>{await this.importEpub(e)}).open()}}),this.addCommand({id:"sync-libraries",name:j.t("sync-libraries"),callback:async()=>{let{libraries:e}=this.settings;if(!e.length){new ue.Notice(j.t("no libraries"));return}let r=e.map(i=>Se.default.find(i,{matching:"**/**.epub"})).flat(),n=r.length;for(let i of r)await this.importEpub(Se.default.path(i));if(n===0)new ue.Notice(j.t("no book in libraries")),console.log(j.t("no book in libraries"));else{let i=j.t("translation:sync-libraries_r").replace("${n}",n.toString());new ue.Notice(i),console.log(i)}}}),this.registerDomEvent(document,"drop",async e=>{if(this.settings.byDrag&&e.toElement.className=="nav-files-container node-insert-event"){let r=e.dataTransfer.files;r.length==1&&H.extname(r[0].name)==".epub"&&(await this.importEpub(r[0].path),Se.default.find(this.vaultPath,{matching:"**/**.epub"}).forEach(Se.default.remove))}}),this.registerEvent(this.app.workspace.on("file-open",async e=>{if(this.settings.leafID&&!this.detachLeaf){this.detachLeaf=!0,this.activeLeaf=this.app.workspace.getLeafById(this.settings.leafID);return}if(!this.settings.autoOpenRightPanel||!this.app.workspace.getActiveFile())return;let r=this.getMocPath(e);if(!r&&e.basename!="highlights")return this.activeBook="",this.activeLeaf.detach();let n=this.app.vault.getAbstractFileByPath(r).parent.name;this.activeBook!=n&&(this.activeLeaf&&this.activeLeaf.detach(),this.activeBook=n,this.activeLeaf=this.app.workspace.getRightLeaf(!1),this.settings.leafID=this.activeLeaf.id,await this.saveSettings(),this.activeLeaf.setViewState({type:"markdown",state:{file:r,mode:"preview",backlinks:!1,source:!1}}),this.activeLeaf.setPinned(!0),this.app.workspace.revealLeaf(this.activeLeaf))}))}async loadSettings(){this.settings=Object.assign({},Gu,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}async importEpub(e){let r=xn(H.basename(e,H.extname(e)).trim()),{assetsPath:n,mocPropertysTemplate:i,savePath:s,tag:o,granularity:a}=this.settings,u=H.posix.join(s,r);if(Se.default.exists(H.posix.join(this.vaultPath,u)))if(this.settings.removeDuplicateFolders)Se.default.remove(H.posix.join(this.vaultPath,u));else{new ue.Notice("Duplicate folder already exists.");return}if(this.assetsPath=It(n,{bookName:r,savePath:s}),this.parser=new Ni(e,this.settings.moreLog),await this.parser.init(),this.settings.moreLog&&console.log("toc is: ",this.parser.toc),this.properties=(0,ue.parseYaml)(It(i,this.parser.meta)),this.properties.tags=(this.properties.tags??[]).concat([o]),this.BookNote="",await this.app.vault.createFolder(u),this.copyImages(),this.settings.oneNote){[...this.parser.chapters].filter(f=>f.level!=0).sort((f,p)=>p.level-f.level).forEach(f=>f.parent.sections.push(...f.sections));let c="";for(let f of this.parser.chapters.filter(p=>p.level==0))c+=f.sections.map(p=>this.htmlToMD(p.html)).join(`

`);let l=u;return this.settings.oneFolder&&(l=H.posix.join(u,r)),await this.app.vault.create(l+".md",wn(this.properties)+`
`+c),0}[...this.parser.chapters].filter(c=>c.level>a).sort((c,l)=>l.level-c.level).forEach(c=>c.parent.sections.push(...c.sections));for(let c of this.parser.chapters.filter(l=>l.level<=a)){c.name.startsWith("... ")&&(c.sections[0].name=c.name.replace("... ",""));let l=[xn(c.name)],f=v=>{v.parent&&(l.unshift(v.parent.name),f(v.parent))};f(c),c.level<a&&c.subItems.length!=0&&l.push(xn(c.name));let p=H.posix.join(u,...l);await this.app.vault.createFolder(H.dirname(p)).catch(()=>{});let g="";if(this.settings.notePropertysTemplate){let v=It(this.settings.notePropertysTemplate,{created_time:Date.now().toString()}),E=(0,ue.parseYaml)(v);g+=wn(E)+`
`}g+=c.sections.map(v=>this.htmlToMD(v.html)).join(`

`);try{await this.app.vault.create(p+".md",g)}catch(v){console.warn(`Failed to create file at ${p}.md: ${v}`),console.warn("If such errors are few in this parsing process, it could be because the epub contains some repeated or wrong navPoints. If this is the case, it will not cause any damage to the content of the book.")}this.BookNote+=`${"	".repeat(c.level)}- [[${p}|${c.name}]]
`}this.BookNote=wn(this.properties)+`
`+this.BookNote,await this.app.vault.create(H.posix.join(u,It(this.settings.mocName,{bookName:r}))+".md",this.BookNote),Se.default.remove(this.parser.tmpPath),console.log(`Successfully imported ${r}`),new ue.Notice(`Successfully imported ${r}`)}copyImages(){let e=H.posix.join(this.vaultPath,this.assetsPath);Se.default.find(this.parser.tmpPath,{matching:["*.jpg","*.jpeg","*.png"]}).forEach(r=>Se.default.copy(r,H.posix.join(e,H.basename(r)),{overwrite:!0})),this.parser.coverPath&&(this.properties.cover=H.posix.join(this.assetsPath,H.basename(this.parser.coverPath)))}htmlToMD(e){let r=(0,ue.htmlToMarkdown)(e||"");return e&&!r&&(r=e.replace(/<[^>]+>/g,"")),St.parse(r,this.assetsPath,this.settings.imageFormat)}getMocPath(e){let r=vc(this.app,this.settings.tag);return r.includes(e)?e.path:r.find(n=>this.app.metadataCache.getCache(n.path).links.some(i=>i.link+".md"==e.path))?.path}};0&&(module.exports={});
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */
